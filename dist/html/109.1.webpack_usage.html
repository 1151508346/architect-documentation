<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>架构师成长计划</title><link rel="stylesheet" type="text/css" href="../static/css/main.css"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"><style>.page-toc>ul .red{background:#f3f3f3;z-index:1;border-left:3px solid #009a61;-webkit-transition:all .2s ease;transition:all .2s ease;color:#000}</style></head><body><div class="nav"><div class="logo">架构师成长计划</div><ul><li><a href="../index.html">0.api</a></li><li><a href="../html/0.Async.html">0.Async</a></li><li><a href="../html/0.module.html">0.module</a></li><li><a href="../html/1.ES2015.html">1.ES2015</a></li><li><a href="../html/2.Promise.html">2.Promise</a></li><li><a href="../html/3.Node.html">3.Node</a></li><li><a href="../html/4.NodeInstall.html">4.NodeInstall</a></li><li><a href="../html/5.REPL.html">5.REPL</a></li><li><a href="../html/6.NodeCore.html">6.NodeCore</a></li><li><a href="../html/7.module&NPM.html">7.module&NPM</a></li><li><a href="../html/8.Encoding.html">8.Encoding</a></li><li><a href="../html/9.Buffer.html">9.Buffer</a></li><li><a href="../html/10.fs.html">10.fs</a></li><li><a href="../html/11.Stream-1.html">11.Stream-1</a></li><li><a href="../html/11.Stream-2.html">11.Stream-2</a></li><li><a href="../html/11.Stream-3.html">11.Stream-3</a></li><li><a href="../html/11.Stream-4.html">11.Stream-4</a></li><li><a href="../html/12-Network-2.html">12-Network-2</a></li><li><a href="../html/12.NetWork-3.html">12.NetWork-3</a></li><li><a href="../html/12.Network-1.html">12.Network-1</a></li><li><a href="../html/13.tcp.html">13.tcp</a></li><li><a href="../html/14.http-1.html">14.http-1</a></li><li><a href="../html/14.http-2.html">14.http-2</a></li><li><a href="../html/15.compress.html">15.compress</a></li><li><a href="../html/16.crypto.html">16.crypto</a></li><li><a href="../html/17.process.html">17.process</a></li><li><a href="../html/18.yargs.html">18.yargs</a></li><li><a href="../html/19.cache.html">19.cache</a></li><li><a href="../html/20.action.html">20.action</a></li><li><a href="../html/21.https.html">21.https</a></li><li><a href="../html/22.cookie.html">22.cookie</a></li><li><a href="../html/23.session.html">23.session</a></li><li><a href="../html/24.express-1.html">24.express-1</a></li><li><a href="../html/24.express-2.html">24.express-2</a></li><li><a href="../html/24.express-3.html">24.express-3</a></li><li><a href="../html/24.express-4.html">24.express-4</a></li><li><a href="../html/25.koa-1.html">25.koa-1</a></li><li><a href="../html/26.webpack-1-basic.html">26.webpack-1-basic</a></li><li><a href="../html/26.webpack-2-optimize.html">26.webpack-2-optimize</a></li><li><a href="../html/26.webpack-3-file.html">26.webpack-3-file</a></li><li><a href="../html/26.webpack-4.tapable.html">26.webpack-4.tapable</a></li><li><a href="../html/26.webpack-5-AST.html">26.webpack-5-AST</a></li><li><a href="../html/26.webpack-6-sources.html">26.webpack-6-sources</a></li><li><a href="../html/26.webpack-7-loader.html">26.webpack-7-loader</a></li><li><a href="../html/26.webpack-8-plugin.html">26.webpack-8-plugin</a></li><li><a href="../html/26.webpack-9-hand.html">26.webpack-9-hand</a></li><li><a href="../html/26.webpack-10-prepare.html">26.webpack-10-prepare</a></li><li><a href="../html/28.redux.html">28.redux</a></li><li><a href="../html/28.redux-jwt-back.html">28.redux-jwt-back</a></li><li><a href="../html/28.redux-jwt-front.html">28.redux-jwt-front</a></li><li><a href="../html/29.mongodb-1.html">29.mongodb-1</a></li><li><a href="../html/29.mongodb-2.html">29.mongodb-2</a></li><li><a href="../html/29.mongodb-3.html">29.mongodb-3</a></li><li><a href="../html/29.mongodb-4.html">29.mongodb-4</a></li><li><a href="../html/29.mongodb-5.html">29.mongodb-5</a></li><li><a href="../html/29.mongodb-6.html">29.mongodb-6</a></li><li><a href="../html/30.cms-1-mysql.html">30.cms-1-mysql</a></li><li><a href="../html/30.cms-2-mysql.html">30.cms-2-mysql</a></li><li><a href="../html/30.cms-3-mysql.html">30.cms-3-mysql</a></li><li><a href="../html/30.cms-4-nunjucks.html">30.cms-4-nunjucks</a></li><li><a href="../html/30.cms-5-mock.html">30.cms-5-mock</a></li><li><a href="../html/30.cms-6-egg.html">30.cms-6-egg</a></li><li><a href="../html/30.cms-7-api.html">30.cms-7-api</a></li><li><a href="../html/30.cms-8-roadhog.html">30.cms-8-roadhog</a></li><li><a href="../html/30.cms-9-yaml.html">30.cms-9-yaml</a></li><li><a href="../html/30.cms-10-umi.html">30.cms-10-umi</a></li><li><a href="../html/30.cms-12-dva.html">30.cms-12-dva</a></li><li><a href="../html/30.cms-13-dva-ant.html">30.cms-13-dva-ant</a></li><li><a href="../html/30.cms-14-front.html">30.cms-14-front</a></li><li><a href="../html/30.cms-15-deploy.html">30.cms-15-deploy</a></li><li><a href="../html/31.dva.html">31.dva</a></li><li><a href="../html/31.cms-13-dva-antdesign.html">31.cms-13-dva-antdesign</a></li><li><a href="../html/33.redis.html">33.redis</a></li><li><a href="../html/34.unittest.html">34.unittest</a></li><li><a href="../html/35.jwt.html">35.jwt</a></li><li><a href="../html/36.websocket-1.html">36.websocket-1</a></li><li><a href="../html/36.websocket-2.html">36.websocket-2</a></li><li><a href="../html/38.chat-api-1.html">38.chat-api-1</a></li><li><a href="../html/38.chat-api-2.html">38.chat-api-2</a></li><li><a href="../html/38.chat-3.html">38.chat-3</a></li><li><a href="../html/38.chat-api-3.html">38.chat-api-3</a></li><li><a href="../html/38.chat.html">38.chat</a></li><li><a href="../html/38.chat2.html">38.chat2</a></li><li><a href="../html/38.chat2.html">38.chat2</a></li><li><a href="../html/39.crawl-0.html">39.crawl-0</a></li><li><a href="../html/39.crawl-1.html">39.crawl-1</a></li><li><a href="../html/39.crawl-2.html">39.crawl-2</a></li><li><a href="../html/40.deploy.html">40.deploy</a></li><li><a href="../html/41.safe.html">41.safe</a></li><li><a href="../html/42.test.html">42.test</a></li><li><a href="../html/43.nginx.html">43.nginx</a></li><li><a href="../html/44.enzyme.html">44.enzyme</a></li><li><a href="../html/45.docker.html">45.docker</a></li><li><a href="../html/46.elastic.html">46.elastic</a></li><li><a href="../html/47.oauth.html">47.oauth</a></li><li><a href="../html/48.wxpay.html">48.wxpay</a></li><li><a href="../html/index.html">index</a></li><li><a href="../html/52.UML.html">52.UML</a></li><li><a href="../html/53.design.html">53.design</a></li><li><a href="../html/index.html">index</a></li><li><a href="../html/54.linux.html">54.linux</a></li><li><a href="../html/57.ts.html">57.ts</a></li><li><a href="../html/56.react-ssr.html">56.react-ssr</a></li><li><a href="../html/58.ts_react.html">58.ts_react</a></li><li><a href="../html/59.ketang.html">59.ketang</a></li><li><a href="../html/59.ketang2.html">59.ketang2</a></li><li><a href="../html/61.1.devops-linux.html">61.1.devops-linux</a></li><li><a href="../html/61.2.devops-vi.html">61.2.devops-vi</a></li><li><a href="../html/61.3.devops-user.html">61.3.devops-user</a></li><li><a href="../html/61.4.devops-auth.html">61.4.devops-auth</a></li><li><a href="../html/61.5.devops-shell.html">61.5.devops-shell</a></li><li><a href="../html/61.6.devops-install.html">61.6.devops-install</a></li><li><a href="../html/61.7.devops-system.html">61.7.devops-system</a></li><li><a href="../html/61.8.devops-service.html">61.8.devops-service</a></li><li><a href="../html/61.9.devops-network.html">61.9.devops-network</a></li><li><a href="../html/61.10.devops-nginx.html">61.10.devops-nginx</a></li><li><a href="../html/61.11.devops-docker.html">61.11.devops-docker</a></li><li><a href="../html/61.12.devops-jekins.html">61.12.devops-jekins</a></li><li><a href="../html/61.13.devops-groovy.html">61.13.devops-groovy</a></li><li><a href="../html/61.14.devops-php.html">61.14.devops-php</a></li><li><a href="../html/61.15.devops-java.html">61.15.devops-java</a></li><li><a href="../html/61.16.devops-node.html">61.16.devops-node</a></li><li><a href="../html/61.17.devops-k8s.html">61.17.devops-k8s</a></li><li><a href="../html/62.1.react-basic.html">62.1.react-basic</a></li><li><a href="../html/62.2.react-state.html">62.2.react-state</a></li><li><a href="../html/62.3.react-high.html">62.3.react-high</a></li><li><a href="../html/62.4.react-optimize.html">62.4.react-optimize</a></li><li><a href="../html/62.5.react-hooks.html">62.5.react-hooks</a></li><li><a href="../html/62.6.react-immutable.html">62.6.react-immutable</a></li><li><a href="../html/62.7.react-mobx.html">62.7.react-mobx</a></li><li><a href="../html/62.8.react-source.html">62.8.react-source</a></li><li><a href="../html/63.1.redux.html">63.1.redux</a></li><li><a href="../html/63.2.redux-middleware.html">63.2.redux-middleware</a></li><li><a href="../html/63.3.redux-hooks.html">63.3.redux-hooks</a></li><li><a href="../html/63.4.redux-saga.html">63.4.redux-saga</a></li><li><a href="../html/63.5.redux-saga-hand.html">63.5.redux-saga-hand</a></li><li><a href="../html/64.1.router.html">64.1.router</a></li><li><a href="../html/64.2.router-connected.html">64.2.router-connected</a></li><li><a href="../html/65.1.typescript.html">65.1.typescript</a></li><li><a href="../html/65.2.typescript.html">65.2.typescript</a></li><li><a href="../html/65.3.typescript.html">65.3.typescript</a></li><li><a href="../html/65.4.antd.html">65.4.antd</a></li><li><a href="../html/65.4.definition.html">65.4.definition</a></li><li><a href="../html/66-1.vue-base.html">66-1.vue-base</a></li><li><a href="../html/66-2.vue-component.html">66-2.vue-component</a></li><li><a href="../html/66-3.vue-cli3.0.html">66-3.vue-cli3.0</a></li><li><a href="../html/66-4.$message组件.html">66-4.$message组件</a></li><li><a href="../html/66-5.Form组件.html">66-5.Form组件</a></li><li><a href="../html/66-6.tree.html">66-6.tree</a></li><li><a href="../html/66-7.vue-router-apply.html">66-7.vue-router-apply</a></li><li><a href="../html/66-8.axios-apply.html">66-8.axios-apply</a></li><li><a href="../html/66-9.vuex-apply.html">66-9.vuex-apply</a></li><li><a href="../html/66-10.jwt-vue.html">66-10.jwt-vue</a></li><li><a href="../html/66-11.vue-ssr.html">66-11.vue-ssr</a></li><li><a href="../html/66-12.nuxt-apply.html">66-12.nuxt-apply</a></li><li><a href="../html/66-13.pwa.html">66-13.pwa</a></li><li><a href="../html/66-14.vue单元测试.html">66-14.vue单元测试</a></li><li><a href="../html/66-15.权限校验.html">66-15.权限校验</a></li><li><a href="../html/67-1-network.html">67-1-network</a></li><li><a href="../html/68-2-wireshark.html">68-2-wireshark</a></li><li><a href="../html/7.npm2.html">7.npm2</a></li><li><a href="../html/69-hooks.html">69-hooks</a></li><li><a href="../html/70-deploy.html">70-deploy</a></li><li><a href="../html/71-hmr.html">71-hmr</a></li><li><a href="../html/72.deploy.html">72.deploy</a></li><li><a href="../html/73.import.html">73.import</a></li><li><a href="../html/74.mobile.html">74.mobile</a></li><li><a href="../html/75.webpack-1.文件分析.html">75.webpack-1.文件分析</a></li><li><a href="../html/75.webpack-2.loader.html">75.webpack-2.loader</a></li><li><a href="../html/75.webpack-3.源码流程.html">75.webpack-3.源码流程</a></li><li><a href="../html/75.webpack-4.tapable.html">75.webpack-4.tapable</a></li><li><a href="../html/75.webpack-5.prepare.html">75.webpack-5.prepare</a></li><li><a href="../html/75.webpack-6.resolve.html">75.webpack-6.resolve</a></li><li><a href="../html/75.webpack-7.loader.html">75.webpack-7.loader</a></li><li><a href="../html/75.webpack-8.module.html">75.webpack-8.module</a></li><li><a href="../html/75.webpack-9.chunk.html">75.webpack-9.chunk</a></li><li><a href="../html/75.webpack-10.asset.html">75.webpack-10.asset</a></li><li><a href="../html/75.webpack-11.实现.html">75.webpack-11.实现</a></li><li><a href="../html/76.react_optimize.html">76.react_optimize</a></li><li><a href="../html/77.ts_ketang_back.html">77.ts_ketang_back</a></li><li><a href="../html/77.ts_ketang_front.html">77.ts_ketang_front</a></li><li><a href="../html/78.vue-domdiff.html">78.vue-domdiff</a></li><li><a href="../html/79.grammar.html">79.grammar</a></li><li><a href="../html/80.tree.html">80.tree</a></li><li><a href="../html/81.axios.html">81.axios</a></li><li><a href="../html/82.1.react.html">82.1.react</a></li><li><a href="../html/82.2.react-high.html">82.2.react-high</a></li><li><a href="../html/82.3.react-router.html">82.3.react-router</a></li><li><a href="../html/82.4.redux.html">82.4.redux</a></li><li><a href="../html/82.5.redux_middleware.html">82.5.redux_middleware</a></li><li><a href="../html/82.6.connected.html">82.6.connected</a></li><li><a href="../html/82.7.saga.html">82.7.saga</a></li><li><a href="../html/82.8.dva.html">82.8.dva</a></li><li><a href="../html/82.8.dva-source.html">82.8.dva-source</a></li><li><a href="../html/82.9.roadhog.html">82.9.roadhog</a></li><li><a href="../html/82.10.umi.html">82.10.umi</a></li><li><a href="../html/82.11.antdesign.html">82.11.antdesign</a></li><li><a href="../html/82.12.ketang-front.html">82.12.ketang-front</a></li><li><a href="../html/82.12.ketang-back.html">82.12.ketang-back</a></li><li><a href="../html/83.upload.html">83.upload</a></li><li><a href="../html/84.graphql.html">84.graphql</a></li><li><a href="../html/85.antpro.html">85.antpro</a></li><li><a href="../html/86.1.uml.html">86.1.uml</a></li><li><a href="../html/86.2.design.html">86.2.design</a></li><li><a href="../html/87.postcss.html">87.postcss</a></li><li><a href="../html/88.react16-1.html">88.react16-1</a></li><li><a href="../html/89.nextjs.html">89.nextjs</a></li><li><a href="../html/90.react-test.html">90.react-test</a></li><li><a href="../html/91.react-ts.html">91.react-ts</a></li><li><a href="../html/92.rbac.html">92.rbac</a></li><li><a href="../html/93.tsnode.html">93.tsnode</a></li><li><a href="../html/94.1.JavaScript.html">94.1.JavaScript</a></li><li><a href="../html/94.2.JavaScript.html">94.2.JavaScript</a></li><li><a href="../html/94.3.MODULE.html">94.3.MODULE</a></li><li><a href="../html/94.4.EventLoop.html">94.4.EventLoop</a></li><li><a href="../html/94.5.文件上传.html">94.5.文件上传</a></li><li><a href="../html/94.6.https.html">94.6.https</a></li><li><a href="../html/94.7. nginx.html">94.7. nginx</a></li><li><a href="../html/95.1. react.html">95.1. react</a></li><li><a href="../html/95.2.react.html">95.2.react</a></li><li><a href="../html/96.1.react16.html">96.1.react16</a></li><li><a href="../html/96.2.fiber.html">96.2.fiber</a></li><li><a href="../html/96.3.fiber.html">96.3.fiber</a></li><li><a href="../html/97.serverless.html">97.serverless</a></li><li><a href="../html/98.websocket.html">98.websocket</a></li><li><a href="../html/100.1.react-basic.html">100.1.react-basic</a></li><li><a href="../html/101.1.monitor.html">101.1.monitor</a></li><li><a href="../html/101.2.monitor.html">101.2.monitor</a></li><li><a href="../html/102.java.html">102.java</a></li><li><a href="../html/103.1.webpack-usage.html">103.1.webpack-usage</a></li><li><a href="../html/103.2.webpack-bundle.html">103.2.webpack-bundle</a></li><li><a href="../html/103.3.webpack-ast.html">103.3.webpack-ast</a></li><li><a href="../html/103.4.webpack-flow.html">103.4.webpack-flow</a></li><li><a href="../html/103.5.webpack-loader.html">103.5.webpack-loader</a></li><li><a href="../html/103.6.webpack-tapable.html">103.6.webpack-tapable</a></li><li><a href="../html/103.7.webpack-plugin.html">103.7.webpack-plugin</a></li><li><a href="../html/103.8.webpack-optimize1.html">103.8.webpack-optimize1</a></li><li><a href="../html/103.9.webpack-optimize2.html">103.9.webpack-optimize2</a></li><li><a href="../html/103.10.webpack-hand.html">103.10.webpack-hand</a></li><li><a href="../html/103.11.webpack-hmr.html">103.11.webpack-hmr</a></li><li><a href="../html/103.13.splitChunks.html">103.13.splitChunks</a></li><li><a href="../html/103.14.webpack-sourcemap.html">103.14.webpack-sourcemap</a></li><li><a href="../html/103.15.webpack-compiler1.html">103.15.webpack-compiler1</a></li><li><a href="../html/103.15.webpack-compiler2.html">103.15.webpack-compiler2</a></li><li><a href="../html/103.16.vite.basic.html">103.16.vite.basic</a></li><li><a href="../html/103.16.vite.source.html">103.16.vite.source</a></li><li><a href="../html/103.17.polyfill.html">103.17.polyfill</a></li><li><a href="../html/104.1.binary.html">104.1.binary</a></li><li><a href="../html/104.2.binary.html">104.2.binary</a></li><li><a href="../html/105.skeleton.html">105.skeleton</a></li><li><a href="../html/106.1.react.html">106.1.react</a></li><li><a href="../html/106.2.react_hooks.html">106.2.react_hooks</a></li><li><a href="../html/106.3.react_router.html">106.3.react_router</a></li><li><a href="../html/106.4.redux.html">106.4.redux</a></li><li><a href="../html/106.5.redux_middleware.html">106.5.redux_middleware</a></li><li><a href="../html/106.6.connected-react-router.html">106.6.connected-react-router</a></li><li><a href="../html/106.6.redux-first-history.html">106.6.redux-first-history</a></li><li><a href="../html/106.7.redux-saga.html">106.7.redux-saga</a></li><li><a href="../html/106.8.dva.html">106.8.dva</a></li><li><a href="../html/106.9.umi.html">106.9.umi</a></li><li><a href="../html/106.10.ketang.html">106.10.ketang</a></li><li><a href="../html/106.11.antdesign.html">106.11.antdesign</a></li><li><a href="../html/106.12.antpro.html">106.12.antpro</a></li><li><a href="../html/106.13.router-6.html">106.13.router-6</a></li><li><a href="../html/107.fiber.html">107.fiber</a></li><li><a href="../html/108.http.html">108.http</a></li><li><a href="../html/109.1.webpack_usage.html">109.1.webpack_usage</a></li><li><a href="../html/109.2.webpack_source.html">109.2.webpack_source</a></li><li><a href="../html/109.3.dll.html">109.3.dll</a></li><li><a href="../html/110.nest.js.html">110.nest.js</a></li><li><a href="../html/111.xstate.html">111.xstate</a></li><li><a href="../html/112.Form.html">112.Form</a></li><li><a href="../html/113.redux-saga.html">113.redux-saga</a></li><li><a href="../html/114.react+typescript.html">114.react+typescript</a></li><li><a href="../html/115.immer.html">115.immer</a></li><li><a href="../html/116.pro5.html">116.pro5</a></li><li><a href="../html/117.css-loader.html">117.css-loader</a></li><li><a href="../html/118.1.umi-core.html">118.1.umi-core</a></li><li><a href="../html/119.2.module-federation.html">119.2.module-federation</a></li><li><a href="../html/119.1.module-federation.html">119.1.module-federation</a></li><li><a href="../html/120.create-react-app.html">120.create-react-app</a></li><li><a href="../html/121.react-scripts.html">121.react-scripts</a></li><li><a href="../html/122.react-optimize.html">122.react-optimize</a></li><li><a href="../html/123.jsx-runtime.html">123.jsx-runtime</a></li><li><a href="../html/124.next.js.html">124.next.js</a></li><li><a href="../html/125.1.linux.html">125.1.linux</a></li><li><a href="../html/125.2.linux-vi.html">125.2.linux-vi</a></li><li><a href="../html/125.3.linux-user.html">125.3.linux-user</a></li><li><a href="../html/125.4.linux-auth.html">125.4.linux-auth</a></li><li><a href="../html/125.5.linux-shell.html">125.5.linux-shell</a></li><li><a href="../html/125.6.linux-install.html">125.6.linux-install</a></li><li><a href="../html/125.7.linux-system.html">125.7.linux-system</a></li><li><a href="../html/125.8.linux-service.html">125.8.linux-service</a></li><li><a href="../html/125.9.linux-network.html">125.9.linux-network</a></li><li><a href="../html/125.10.nginx.html">125.10.nginx</a></li><li><a href="../html/125.11.docker.html">125.11.docker</a></li><li><a href="../html/125.12.ci.html">125.12.ci</a></li><li><a href="../html/125.13.k8s.html">125.13.k8s</a></li><li><a href="../html/125.14.k8s.html">125.14.k8s</a></li><li><a href="../html/125.15.k8s.html">125.15.k8s</a></li><li><a href="../html/125.16.k8s.html">125.16.k8s</a></li><li><a href="../html/126.11.react-1.html">126.11.react-1</a></li><li><a href="../html/126.12.react-2.html">126.12.react-2</a></li><li><a href="../html/126.12.react-3.html">126.12.react-3</a></li><li><a href="../html/126.12.react-4.html">126.12.react-4</a></li><li><a href="../html/126.12.react-5.html">126.12.react-5</a></li><li><a href="../html/127.frontend.html">127.frontend</a></li><li><a href="../html/128.rollup.html">128.rollup</a></li><li><a href="../html/129.px2rem-loader.html">129.px2rem-loader</a></li><li><a href="../html/130.health.html">130.health</a></li><li><a href="../html/131.hooks.html">131.hooks</a></li><li><a href="../html/132.keepalive.html">132.keepalive</a></li><li><a href="../html/133.vue-cli.html">133.vue-cli</a></li><li><a href="../html/134.react18.html">134.react18</a></li><li><a href="../html/135.function.html">135.function</a></li><li><a href="../html/136.toolkit.html">136.toolkit</a></li><li><a href="../html/137.lerna.html">137.lerna</a></li><li><a href="../html/138.create-vite.html">138.create-vite</a></li><li><a href="../html/139.cli.html">139.cli</a></li><li><a href="../html/140.antd.html">140.antd</a></li><li><a href="../html/141.react-dnd.html">141.react-dnd</a></li><li><a href="../html/142.1.link.html">142.1.link</a></li><li><a href="../html/143.1.gulp.html">143.1.gulp</a></li><li><a href="../html/143.2.stream.html">143.2.stream</a></li><li><a href="../html/143.3.gulp.html">143.3.gulp</a></li><li><a href="../html/144.1.closure.html">144.1.closure</a></li><li><a href="../html/144.2.v8.html">144.2.v8</a></li><li><a href="../html/144.3.gc.html">144.3.gc</a></li><li class="active"><a href="../html/145.react-router-v6.html">145.react-router-v6</a></li></ul></div><div class="warpper"><div class="page-toc"><ul><li><a href="#t01.与webpack类似的工具还有哪些?谈谈你为什么选择使用或放弃webpack?">1.与webpack类似的工具还有哪些?谈谈你为什么选择使用或放弃webpack?</a><ul><li><a href="#t11.1 grunt">1.1 grunt</a><ul><li><a href="#t21.1.1 优点">1.1.1 优点</a></li><li><a href="#t31.1.2 缺点">1.1.2 缺点</a></li><li><a href="#t41.1.3 执行任务">1.1.3 执行任务</a></li></ul></li><li><a href="#t51.2 gulp">1.2 gulp</a><ul><li><a href="#t61.2.1 优点">1.2.1 优点</a></li><li><a href="#t71.2.2 缺点">1.2.2 缺点</a></li><li><a href="#t81.2.3 执行任务">1.2.3 执行任务</a></li></ul></li><li><a href="#t91.3 webpack">1.3 webpack</a><ul><li><a href="#t101.3.1 优点">1.3.1 优点</a></li><li><a href="#t111.3.2 缺点">1.3.2 缺点</a></li><li><a href="#t121.3.3 执行任务">1.3.3 执行任务</a></li></ul></li><li><a href="#t131.4 rollup">1.4 rollup</a><ul><li><a href="#t141.4.1 优点">1.4.1 优点</a></li><li><a href="#t151.4.2 缺点">1.4.2 缺点</a></li><li><a href="#t161.4.3 执行任务">1.4.3 执行任务</a></li></ul></li><li><a href="#t171.5 parcel">1.5 parcel</a><ul><li><a href="#t181.5.1 优点">1.5.1 优点</a></li><li><a href="#t191.5.2 缺点">1.5.2 缺点</a></li><li><a href="#t201.5.3 执行任务">1.5.3 执行任务</a></li></ul></li><li><a href="#t212 如何调试webpack代码">2 如何调试webpack代码</a></li></ul></li><li><a href="#t223. Loader和Plugin的不同?">3. Loader和Plugin的不同?</a></li><li><a href="#t234. webpack的构建流程是什么?">4. webpack的构建流程是什么?</a><ul><li><a href="#t244.1 webpack.config.js">4.1 webpack.config.js</a></li><li><a href="#t254.2 flow.js">4.2 flow.js</a></li><li><a href="#t264.3 RunPlugin.js">4.3 RunPlugin.js</a></li><li><a href="#t274.4 DonePlugin.js">4.4 DonePlugin.js</a></li></ul></li><li><a href="#t285.有哪些常见的Loader和Plugin?他们是解决什么问题的?">5.有哪些常见的Loader和Plugin?他们是解决什么问题的?</a><ul><li><a href="#t295.1 loader">5.1 loader</a></li><li><a href="#t305.2 plugin">5.2 plugin</a></li><li><a href="#t315.3 配置">5.3 配置</a><ul><li><a href="#t325.3.1 webpack.config.js">5.3.1 webpack.config.js</a></li><li><a href="#t335.3.2 paths.js">5.3.2 paths.js</a></li><li><a href="#t345.3.3 env.js">5.3.3 env.js</a></li><li><a href="#t355.3.4 webpackDevServer.config.js">5.3.4 webpackDevServer.config.js</a></li><li><a href="#t365.3.5 webpack.dev.config.js">5.3.5 webpack.dev.config.js</a></li><li><a href="#t375.3.6 postcss.config.js">5.3.6 postcss.config.js</a></li><li><a href="#t385.3.7 .eslintrc.json">5.3.7 .eslintrc.json</a></li><li><a href="#t395.3.8 package.json">5.3.8 package.json</a></li></ul></li></ul></li><li><a href="#t406. source map是什么？生产环境怎么用?">6. source map是什么？生产环境怎么用?</a><ul><li><a href="#t416.1 source map的类型">6.1 source map的类型</a></li><li><a href="#t426.2 如何选择source map的类型">6.2 如何选择source map的类型</a></li></ul></li><li><a href="#t437.如何利用webpack来优化前端性能?">7.如何利用webpack来优化前端性能?</a><ul><li><a href="#t447.1. 安装">7.1. 安装</a></li><li><a href="#t457.2.压缩JS">7.2.压缩JS</a></li><li><a href="#t467.3. 压缩CSS">7.3. 压缩CSS</a></li><li><a href="#t477.4. 压缩图片">7.4. 压缩图片</a></li><li><a href="#t487.5. 清除无用的CSS">7.5. 清除无用的CSS</a></li><li><a href="#t497.6. Tree Shaking">7.6. Tree Shaking</a></li><li><a href="#t507.7. Scope Hoisting">7.7. Scope Hoisting</a></li><li><a href="#t517.8. 代码分割">7.8. 代码分割</a><ul><li><a href="#t527.8.1 入口点分割">7.8.1 入口点分割</a></li><li><a href="#t537.8.2  动态导入和懒加载">7.8.2 动态导入和懒加载</a><ul><li><a href="#t547.8.2.1 hello.js">7.8.2.1 hello.js</a></li><li><a href="#t557.8.2.2 按需加载">7.8.2.2 按需加载</a><ul><li><a href="#t567.8.2.2.1 index.js">7.8.2.2.1 index.js</a></li><li><a href="#t577.8.2.2.2 Loading.js">7.8.2.2.2 Loading.js</a></li><li><a href="#t587.8.2.2.3 Title.js">7.8.2.2.3 Title.js</a></li></ul></li></ul></li><li><a href="#t597.8.3 preload(预先加载)">7.8.3 preload(预先加载)</a></li><li><a href="#t607.8.4 prefetch(预先拉取)">7.8.4 prefetch(预先拉取)</a></li><li><a href="#t617.8.5 preload vs prefetch">7.8.5 preload vs prefetch</a></li><li><a href="#t627.8.6 提取公共代码">7.8.6 提取公共代码</a><ul><li><a href="#t637.8.6.1 为什么需要提取公共代码">7.8.6.1 为什么需要提取公共代码</a></li><li><a href="#t647.8.6.2 如何提取">7.8.6.2 如何提取</a></li><li><a href="#t657.8.6.3 splitChunks">7.8.6.3 splitChunks</a></li><li><a href="#t667.8.6.3.1 module chunk  bundle">7.8.6.3.1 module chunk bundle</a></li><li><a href="#t677.8.6.3.2  默认配置">7.8.6.3.2 默认配置</a></li></ul></li></ul></li><li><a href="#t687.9 CDN">7.9 CDN</a><ul><li><a href="#t697.9.1 webpack.config.js">7.9.1 webpack.config.js</a></li><li><a href="#t707.9.2 UploadPlugin.js">7.9.2 UploadPlugin.js</a></li></ul></li></ul></li><li><a href="#t718. webpack中hash、chunkhash、contenthash区别?">8. webpack中hash、chunkhash、contenthash区别?</a><ul><li><a href="#t728.1  hash">8.1 hash</a></li><li><a href="#t738.2 chunkhash">8.2 chunkhash</a></li><li><a href="#t748.3 contenthash">8.3 contenthash</a></li></ul></li><li><a href="#t759.如何对bundle体积进行监控和分析？">9.如何对bundle体积进行监控和分析？</a><ul><li><a href="#t769.1 安装">9.1 安装</a></li><li><a href="#t779.2 先生成文件再分析">9.2 先生成文件再分析</a></li></ul></li><li><a href="#t7810.如何提高webpack的构建速度?">10.如何提高webpack的构建速度?</a><ul><li><a href="#t7910.1 费时分析">10.1 费时分析</a></li><li><a href="#t8010.2 缩小范围">10.2 缩小范围</a><ul><li><a href="#t8110.2.1 extensions">10.2.1 extensions</a></li><li><a href="#t8210.2.2 alias">10.2.2 alias</a></li><li><a href="#t8310.2.3 modules">10.2.3 modules</a></li><li><a href="#t8410.2.4 mainFields">10.2.4 mainFields</a></li><li><a href="#t8510.2.5 mainFiles">10.2.5 mainFiles</a></li><li><a href="#t8610.2.6 resolveLoader">10.2.6 resolveLoader</a></li></ul></li><li><a href="#t8710.3 noParse">10.3 noParse</a></li><li><a href="#t8810.4 IgnorePlugin">10.4 IgnorePlugin</a></li><li><a href="#t8910.5 日志优化">10.5 日志优化</a><ul><li><a href="#t9010.5.1 friendly-errors-webpack-plugin">10.5.1 friendly-errors-webpack-plugin</a></li></ul></li><li><a href="#t9110.6.DLL">10.6.DLL</a><ul><li><a href="#t9210.6.1 定义Dll">10.6.1 定义Dll</a></li><li><a href="#t9310.6.2 使用动态链接库文件">10.6.2 使用动态链接库文件</a></li><li><a href="#t9410.6.3 html中使用">10.6.3 html中使用</a></li></ul></li><li><a href="#t9510.7 利用缓存">10.7 利用缓存</a><ul><li><a href="#t9610.7.1 babel-loader">10.7.1 babel-loader</a></li><li><a href="#t9710.7.2 cache-loader">10.7.2 cache-loader</a></li><li><a href="#t9810.7.3 hard-source-webpack-plugin">10.7.3 hard-source-webpack-plugin</a></li><li><a href="#t9910.7.4 oneOf">10.7.4 oneOf</a></li></ul></li><li><a href="#t10010.8 多进程处理">10.8 多进程处理</a><ul><li><a href="#t10110.8.1 thread-loader">10.8.1 thread-loader</a></li><li><a href="#t10210.8.2 parallel">10.8.2 parallel</a></li></ul></li></ul></li></ul></div><div class="content markdown-body"><p>&#x54A8;&#x8BE2;&#x73E0;&#x5CF0;&#x67B6;&#x6784;&#x8BFE;&#x8BF7;&#x52A0;&#x5FAE;&#x4FE1;<img src="../C:\Users\83687\Desktop\temp\kf.jpg" alt="kf"></p><h2 id="t01.&#x4E0E;webpack&#x7C7B;&#x4F3C;&#x7684;&#x5DE5;&#x5177;&#x8FD8;&#x6709;&#x54EA;&#x4E9B;?&#x8C08;&#x8C08;&#x4F60;&#x4E3A;&#x4EC0;&#x4E48;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x6216;&#x653E;&#x5F03;webpack?">1.&#x4E0E;webpack&#x7C7B;&#x4F3C;&#x7684;&#x5DE5;&#x5177;&#x8FD8;&#x6709;&#x54EA;&#x4E9B;?&#x8C08;&#x8C08;&#x4F60;&#x4E3A;&#x4EC0;&#x4E48;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x6216;&#x653E;&#x5F03;webpack? <a href="#t01.&#x4E0E;webpack&#x7C7B;&#x4F3C;&#x7684;&#x5DE5;&#x5177;&#x8FD8;&#x6709;&#x54EA;&#x4E9B;?&#x8C08;&#x8C08;&#x4F60;&#x4E3A;&#x4EC0;&#x4E48;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x6216;&#x653E;&#x5F03;webpack?">#</a></h2><h3 id="t11.1 grunt">1.1 grunt <a href="#t11.1 grunt">#</a></h3><ul><li>&#x4E00;&#x53E5;&#x8BDD;&#xFF1A;&#x81EA;&#x52A8;&#x5316;&#x3002;&#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x53CD;&#x590D;&#x91CD;&#x590D;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x4F8B;&#x5982;&#x538B;&#x7F29;&#xFF08;minification&#xFF09;&#x3001;&#x7F16;&#x8BD1;&#x3001;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x3001;linting&#x7B49;&#xFF0C;&#x81EA;&#x52A8;&#x5316;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x51CF;&#x8F7B;&#x4F60;&#x7684;&#x52B3;&#x52A8;&#xFF0C;&#x7B80;&#x5316;&#x4F60;&#x7684;&#x5DE5;&#x4F5C;&#x3002;&#x5F53;&#x4F60;&#x5728; <code>Gruntfile</code> &#x6587;&#x4EF6;&#x6B63;&#x786E;&#x914D;&#x7F6E;&#x597D;&#x4E86;&#x4EFB;&#x52A1;&#xFF0C;&#x4EFB;&#x52A1;&#x8FD0;&#x884C;&#x5668;&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x5E2E;&#x4F60;&#x6216;&#x4F60;&#x7684;&#x5C0F;&#x7EC4;&#x5B8C;&#x6210;&#x5927;&#x90E8;&#x5206;&#x65E0;&#x804A;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</li><li>&#x6700;&#x8001;&#x724C;&#x7684;&#x6253;&#x5305;&#x5DE5;&#x5177;,&#x5B83;&#x8FD0;&#x7528;&#x914D;&#x7F6E;&#x7684;&#x601D;&#x60F3;&#x6765;&#x5199;&#x6253;&#x5305;&#x811A;&#x672C;&#xFF0C;&#x4E00;&#x5207;&#x7686;&#x914D;&#x7F6E;</li></ul><h4 id="t21.1.1 &#x4F18;&#x70B9;">1.1.1 &#x4F18;&#x70B9; <a href="#t21.1.1 &#x4F18;&#x70B9;">#</a></h4><ul><li>&#x51FA;&#x73B0;&#x7684;&#x6BD4;&#x8F83;&#x65E9;<h4 id="t31.1.2 &#x7F3A;&#x70B9;">1.1.2 &#x7F3A;&#x70B9; <a href="#t31.1.2 &#x7F3A;&#x70B9;">#</a></h4></li><li>&#x914D;&#x7F6E;&#x9879;&#x592A;&#x591A;</li><li>&#x800C;&#x4E14;&#x4E0D;&#x540C;&#x7684;&#x63D2;&#x4EF6;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x81EA;&#x5DF1;&#x6269;&#x5C55;&#x5B57;&#x6BB5;</li><li>&#x5B66;&#x4E60;&#x6210;&#x672C;&#x9AD8;,&#x8FD0;&#x7528;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x660E;&#x767D;&#x5404;&#x79CD;&#x63D2;&#x4EF6;&#x7684;&#x914D;&#x7F6E;&#x89C4;&#x5219;&#x548C;&#x914D;&#x5408;&#x65B9;&#x5F0F;</li></ul><h4 id="t41.1.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">1.1.3 &#x6267;&#x884C;&#x4EFB;&#x52A1; <a href="#t41.1.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">#</a></h4><pre><code class="lang-js">npm run build
</code></pre><h3 id="t51.2 gulp">1.2 gulp <a href="#t51.2 gulp">#</a></h3><ul><li>&#x57FA;&#x4E8E; nodejs &#x7684; <code>steam</code> &#x6D41;&#x6253;&#x5305;</li><li>&#x5B9A;&#x4F4D;&#x662F;&#x57FA;&#x4E8E;&#x4EFB;&#x52A1;&#x6D41;&#x7684;&#x81EA;&#x52A8;&#x5316;&#x6784;&#x5EFA;&#x5DE5;&#x5177;</li><li>Gulp&#x662F;&#x901A;&#x8FC7;task&#x5BF9;&#x6574;&#x4E2A;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x8FDB;&#x884C;&#x6784;&#x5EFA;</li></ul><h4 id="t61.2.1 &#x4F18;&#x70B9;">1.2.1 &#x4F18;&#x70B9; <a href="#t61.2.1 &#x4F18;&#x70B9;">#</a></h4><ul><li>&#x6D41;&#x5F0F;&#x7684;&#x5199;&#x6CD5;&#x7B80;&#x5355;&#x76F4;&#x89C2;</li><li>API&#x7B80;&#x5355;,&#x4EE3;&#x7801;&#x91CF;&#x5C11;</li><li>&#x6613;&#x4E8E;&#x5B66;&#x4E60;&#x548C;&#x4F7F;&#x7528;</li><li>&#x9002;&#x5408;&#x591A;&#x9875;&#x9762;&#x5E94;&#x7528;&#x5F00;&#x53D1;</li></ul><h4 id="t71.2.2 &#x7F3A;&#x70B9;">1.2.2 &#x7F3A;&#x70B9; <a href="#t71.2.2 &#x7F3A;&#x70B9;">#</a></h4><ul><li>&#x5F02;&#x5E38;&#x5904;&#x7406;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;</li><li>&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x987A;&#x5E8F;&#x96BE;&#x4EE5;&#x7CBE;&#x7EC6;&#x63A7;&#x5236;</li><li>&#x4E0D;&#x592A;&#x9002;&#x5408;&#x5355;&#x9875;&#x6216;&#x8005;&#x81EA;&#x5B9A;&#x4E49;&#x6A21;&#x5757;&#x7684;&#x5F00;&#x53D1;</li></ul><h4 id="t81.2.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">1.2.3 &#x6267;&#x884C;&#x4EFB;&#x52A1; <a href="#t81.2.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">#</a></h4><pre><code class="lang-js">npm run build
</code></pre><h3 id="t91.3 webpack">1.3 webpack <a href="#t91.3 webpack">#</a></h3><ul><li>webpack &#x662F;&#x6A21;&#x5757;&#x5316;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x548C;&#x6253;&#x5305;&#x5DE5;&#x5177;&#x3002;&#x901A;&#x8FC7; loader &#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x4EFB;&#x4F55;&#x5F62;&#x5F0F;&#x7684;&#x8D44;&#x6E90;&#x90FD;&#x53EF;&#x4EE5;&#x89C6;&#x4F5C;&#x6A21;&#x5757;&#xFF0C;&#x6BD4;&#x5982; CommonJs &#x6A21;&#x5757;&#x3001;AMD &#x6A21;&#x5757;&#x3001;ES6 &#x6A21;&#x5757;&#x3001;CSS&#x3001;&#x56FE;&#x7247;&#x7B49;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x5C06;&#x8BB8;&#x591A;&#x677E;&#x6563;&#x7684;&#x6A21;&#x5757;&#x6309;&#x7167;&#x4F9D;&#x8D56;&#x548C;&#x89C4;&#x5219;&#x6253;&#x5305;&#x6210;&#x7B26;&#x5408;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x90E8;&#x7F72;&#x7684;&#x524D;&#x7AEF;&#x8D44;&#x6E90;</li><li>&#x8FD8;&#x53EF;&#x4EE5;&#x5C06;&#x6309;&#x9700;&#x52A0;&#x8F7D;&#x7684;&#x6A21;&#x5757;&#x8FDB;&#x884C;&#x4EE3;&#x7801;&#x5206;&#x9694;&#xFF0C;&#x7B49;&#x5230;&#x5B9E;&#x9645;&#x9700;&#x8981;&#x7684;&#x65F6;&#x5019;&#x518D;&#x5F02;&#x6B65;&#x52A0;&#x8F7D;</li><li>&#x5B83;&#x5B9A;&#x4F4D;&#x662F;&#x6A21;&#x5757;&#x6253;&#x5305;&#x5668;&#xFF0C;&#x800C; Gulp/Grunt &#x5C5E;&#x4E8E;&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#x3002;Webpack &#x53EF;&#x4EE5;&#x4EE3;&#x66FF; Gulp/Grunt &#x7684;&#x4E00;&#x4E9B;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x804C;&#x80FD;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x4EE5;&#x914D;&#x5408;&#x4F7F;&#x7528;</li></ul><h4 id="t101.3.1 &#x4F18;&#x70B9;">1.3.1 &#x4F18;&#x70B9; <a href="#t101.3.1 &#x4F18;&#x70B9;">#</a></h4><ul><li>&#x53EF;&#x4EE5;&#x6A21;&#x5757;&#x5316;&#x7684;&#x6253;&#x5305;&#x4EFB;&#x4F55;&#x8D44;&#x6E90;</li><li>&#x9002;&#x914D;&#x4EFB;&#x4F55;&#x6A21;&#x5757;&#x7CFB;&#x7EDF;</li><li>&#x9002;&#x5408;SPA&#x5355;&#x9875;&#x5E94;&#x7528;&#x7684;&#x5F00;&#x53D1;</li></ul><h4 id="t111.3.2 &#x7F3A;&#x70B9;">1.3.2 &#x7F3A;&#x70B9; <a href="#t111.3.2 &#x7F3A;&#x70B9;">#</a></h4><ul><li>&#x5B66;&#x4E60;&#x6210;&#x672C;&#x9AD8;,&#x914D;&#x7F6E;&#x590D;&#x6742;</li><li>&#x901A;&#x8FC7;babel&#x7F16;&#x8BD1;&#x540E;&#x7684;js&#x4EE3;&#x7801;&#x6253;&#x5305;&#x540E;&#x4F53;&#x79EF;&#x8FC7;&#x5927;</li></ul><h4 id="t121.3.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">1.3.3 &#x6267;&#x884C;&#x4EFB;&#x52A1; <a href="#t121.3.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">#</a></h4><h3 id="t131.4 rollup">1.4 rollup <a href="#t131.4 rollup">#</a></h3><ul><li>rollup &#x4E0B;&#x4E00;&#x4EE3; ES6 &#x6A21;&#x5757;&#x5316;&#x5DE5;&#x5177;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x4EAE;&#x70B9;&#x662F;&#x5229;&#x7528; ES6 &#x6A21;&#x5757;&#x8BBE;&#x8BA1;&#xFF0C;&#x5229;&#x7528; tree-shaking&#x751F;&#x6210;&#x66F4;&#x7B80;&#x6D01;&#x3001;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x4EE3;&#x7801;</li><li>&#x4E00;&#x822C;&#x800C;&#x8A00;&#xFF0C;&#x5BF9;&#x4E8E;&#x5E94;&#x7528;&#x4F7F;&#x7528; Webpack&#xFF0C;&#x5BF9;&#x4E8E;&#x7C7B;&#x5E93;&#x4F7F;&#x7528; Rollup</li><li>&#x9700;&#x8981;&#x4EE3;&#x7801;&#x62C6;&#x5206;(Code Splitting)&#xFF0C;&#x6216;&#x8005;&#x5F88;&#x591A;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x9700;&#x8981;&#x5904;&#x7406;&#xFF0C;&#x518D;&#x6216;&#x8005;&#x6784;&#x5EFA;&#x7684;&#x9879;&#x76EE;&#x9700;&#x8981;&#x5F15;&#x5165;&#x5F88;&#x591A; CommonJS &#x6A21;&#x5757;&#x7684;&#x4F9D;&#x8D56;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; webpack</li><li>&#x4EE3;&#x7801;&#x5E93;&#x662F;&#x57FA;&#x4E8E; ES6 &#x6A21;&#x5757;&#xFF0C;&#x800C;&#x4E14;&#x5E0C;&#x671B;&#x4EE3;&#x7801;&#x80FD;&#x591F;&#x88AB;&#x5176;&#x4ED6;&#x4EBA;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;&#x4F7F;&#x7528; Rollup</li></ul><h4 id="t141.4.1 &#x4F18;&#x70B9;">1.4.1 &#x4F18;&#x70B9; <a href="#t141.4.1 &#x4F18;&#x70B9;">#</a></h4><ul><li>&#x7528;&#x6807;&#x51C6;&#x5316;&#x7684;&#x683C;&#x5F0F;&#xFF08;es6&#xFF09;&#x6765;&#x5199;&#x4EE3;&#x7801;&#xFF0C;&#x901A;&#x8FC7;&#x51CF;&#x5C11;&#x6B7B;&#x4EE3;&#x7801;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x7F29;&#x5C0F;&#x5305;&#x4F53;&#x79EF;<h4 id="t151.4.2 &#x7F3A;&#x70B9;">1.4.2 &#x7F3A;&#x70B9; <a href="#t151.4.2 &#x7F3A;&#x70B9;">#</a></h4></li><li>&#x5BF9;&#x4EE3;&#x7801;&#x62C6;&#x5206;&#x3001;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x3001;CommonJS&#x6A21;&#x5757;&#x652F;&#x6301;&#x4E0D;&#x597D;</li></ul><h4 id="t161.4.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">1.4.3 &#x6267;&#x884C;&#x4EFB;&#x52A1; <a href="#t161.4.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">#</a></h4><pre><code class="lang-js">npm run build
</code></pre><h3 id="t171.5 parcel">1.5 parcel <a href="#t171.5 parcel">#</a></h3><ul><li>Parcel &#x662F;&#x5FEB;&#x901F;&#x3001;&#x96F6;&#x914D;&#x7F6E;&#x7684; Web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6253;&#x5305;&#x5668;</li><li>&#x76EE;&#x524D; Parcel &#x53EA;&#x80FD;&#x7528;&#x6765;&#x6784;&#x5EFA;&#x7528;&#x4E8E;&#x8FD0;&#x884C;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x7684;&#x7F51;&#x9875;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4ED6;&#x7684;&#x51FA;&#x53D1;&#x70B9;&#x548C;&#x4E13;&#x6CE8;&#x70B9;</li></ul><h4 id="t181.5.1 &#x4F18;&#x70B9;">1.5.1 &#x4F18;&#x70B9; <a href="#t181.5.1 &#x4F18;&#x70B9;">#</a></h4><ul><li>Parcel &#x5185;&#x7F6E;&#x4E86;&#x5E38;&#x89C1;&#x573A;&#x666F;&#x7684;&#x6784;&#x5EFA;&#x65B9;&#x6848;&#x53CA;&#x5176;&#x4F9D;&#x8D56;&#xFF0C;&#x65E0;&#x9700;&#x518D;&#x5B89;&#x88C5;&#x5404;&#x79CD;&#x4F9D;&#x8D56;</li><li>Parcel &#x80FD;&#x4EE5; HTML &#x4E3A;&#x5165;&#x53E3;&#xFF0C;&#x81EA;&#x52A8;&#x68C0;&#x6D4B;&#x548C;&#x6253;&#x5305;&#x4F9D;&#x8D56;&#x8D44;&#x6E90;</li><li>Parcel &#x9ED8;&#x8BA4;&#x652F;&#x6301;&#x6A21;&#x5757;&#x70ED;&#x66FF;&#x6362;&#xFF0C;&#x771F;&#x6B63;&#x7684;&#x5F00;&#x7BB1;&#x5373;&#x7528;</li></ul><h4 id="t191.5.2 &#x7F3A;&#x70B9;">1.5.2 &#x7F3A;&#x70B9; <a href="#t191.5.2 &#x7F3A;&#x70B9;">#</a></h4><ul><li>&#x4E0D;&#x652F;&#x6301; SourceMap</li><li>&#x4E0D;&#x652F;&#x6301;&#x5254;&#x9664;&#x65E0;&#x6548;&#x4EE3;&#x7801;(TreeShaking)</li><li>&#x914D;&#x7F6E;&#x4E0D;&#x7075;&#x6D3B;<h4 id="t201.5.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">1.5.3 &#x6267;&#x884C;&#x4EFB;&#x52A1; <a href="#t201.5.3 &#x6267;&#x884C;&#x4EFB;&#x52A1;">#</a></h4><pre><code class="lang-js">npm run start
</code></pre></li></ul><h3 id="t212 &#x5982;&#x4F55;&#x8C03;&#x8BD5;webpack&#x4EE3;&#x7801;">2 &#x5982;&#x4F55;&#x8C03;&#x8BD5;webpack&#x4EE3;&#x7801; <a href="#t212 &#x5982;&#x4F55;&#x8C03;&#x8BD5;webpack&#x4EE3;&#x7801;">#</a></h3><p>debug.js</p><pre><code class="lang-js"><span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;webpack&quot;</span>);
<span class="hljs-keyword">const</span> config = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./webpack.config.js&quot;</span>); <span class="hljs-comment">//1.&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span>
<span class="hljs-keyword">debugger</span>;
<span class="hljs-keyword">const</span> compiler = webpack(config);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compilerCallback</span>(<span class="hljs-params">err, stats</span>) </span>{
  <span class="hljs-keyword">const</span> statsString = stats.toString();
  <span class="hljs-built_in">console</span>.log(statsString);
}
<span class="hljs-keyword">debugger</span>
compiler.run(<span class="hljs-function">(<span class="hljs-params">err, stats</span>) =&gt;</span> {
  compilerCallback(err, stats);
});
</code></pre><h2 id="t223. Loader&#x548C;Plugin&#x7684;&#x4E0D;&#x540C;?">3. Loader&#x548C;Plugin&#x7684;&#x4E0D;&#x540C;? <a href="#t223. Loader&#x548C;Plugin&#x7684;&#x4E0D;&#x540C;?">#</a></h2><ul><li>Loader&#x76F4;&#x8BD1;&#x4E3A;<code>&#x52A0;&#x8F7D;&#x5668;</code>&#x3002;Webpack&#x5C06;&#x4E00;&#x5207;&#x6587;&#x4EF6;&#x89C6;&#x4E3A;&#x6A21;&#x5757;&#xFF0C;&#x4F46;&#x662F;webpack&#x539F;&#x751F;&#x662F;&#x53EA;&#x80FD;&#x89E3;&#x6790;js&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x5C06;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x4E5F;&#x6253;&#x5305;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x4F1A;&#x7528;&#x5230;loader&#x3002; &#x6240;&#x4EE5;Loader&#x7684;&#x4F5C;&#x7528;&#x662F;&#x8BA9;webpack&#x62E5;&#x6709;&#x4E86;&#x52A0;&#x8F7D;&#x548C;&#x89E3;&#x6790;&#x975E;JavaScript&#x6587;&#x4EF6;&#x7684;&#x80FD;&#x529B;</li><li>Plugin&#x76F4;&#x8BD1;&#x4E3A;<code>&#x63D2;&#x4EF6;</code>&#x3002;Plugin&#x53EF;&#x4EE5;&#x6269;&#x5C55;webpack&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8BA9;webpack&#x5177;&#x6709;&#x66F4;&#x591A;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x3002; &#x5728; Webpack &#x8FD0;&#x884C;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x4E2D;&#x4F1A;&#x5E7F;&#x64AD;&#x51FA;&#x8BB8;&#x591A;&#x4E8B;&#x4EF6;&#xFF0C;Plugin &#x53EF;&#x4EE5;&#x76D1;&#x542C;&#x8FD9;&#x4E9B;&#x4E8B;&#x4EF6;&#xFF0C;&#x5728;&#x5408;&#x9002;&#x7684;&#x65F6;&#x673A;&#x901A;&#x8FC7; Webpack &#x63D0;&#x4F9B;&#x7684; API &#x6539;&#x53D8;&#x8F93;&#x51FA;&#x7ED3;&#x679C;</li></ul><h2 id="t234. webpack&#x7684;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;&#x662F;&#x4EC0;&#x4E48;?">4. webpack&#x7684;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;&#x662F;&#x4EC0;&#x4E48;? <a href="#t234. webpack&#x7684;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;&#x662F;&#x4EC0;&#x4E48;?">#</a></h2><ul><li>&#x521D;&#x59CB;&#x5316;&#x53C2;&#x6570;&#xFF1A;&#x4ECE;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x548C;Shell&#x8BED;&#x53E5;&#x4E2D;&#x8BFB;&#x53D6;&#x4E0E;&#x5408;&#x5E76;&#x53C2;&#x6570;&#xFF0C;&#x5F97;&#x51FA;&#x6700;&#x7EC8;&#x7684;&#x53C2;&#x6570;&#xFF1B;</li><li>&#x5F00;&#x59CB;&#x7F16;&#x8BD1;&#xFF1A;&#x7528;&#x4E0A;&#x4E00;&#x6B65;&#x5F97;&#x5230;&#x7684;&#x53C2;&#x6570;&#x521D;&#x59CB;&#x5316;Compiler&#x5BF9;&#x8C61;&#xFF0C;&#x52A0;&#x8F7D;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x6267;&#x884C;&#x5BF9;&#x8C61;&#x7684;run&#x65B9;&#x6CD5;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x7F16;&#x8BD1;&#xFF1B; &#x786E;&#x5B9A;&#x5165;&#x53E3;&#xFF1A;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x4E2D;&#x7684;entry&#x627E;&#x51FA;&#x6240;&#x6709;&#x7684;&#x5165;&#x53E3;&#x6587;&#x4EF6;</li><li>&#x7F16;&#x8BD1;&#x6A21;&#x5757;&#xFF1A;&#x4ECE;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x51FA;&#x53D1;&#xFF0C;&#x8C03;&#x7528;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x7684;Loader&#x5BF9;&#x6A21;&#x5757;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#xFF0C;&#x518D;&#x627E;&#x51FA;&#x8BE5;&#x6A21;&#x5757;&#x4F9D;&#x8D56;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x518D;&#x9012;&#x5F52;&#x672C;&#x6B65;&#x9AA4;&#x76F4;&#x5230;&#x6240;&#x6709;&#x5165;&#x53E3;&#x4F9D;&#x8D56;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x7ECF;&#x8FC7;&#x4E86;&#x672C;&#x6B65;&#x9AA4;&#x7684;&#x5904;&#x7406;&#xFF1B;</li><li>&#x5B8C;&#x6210;&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#xFF1A;&#x5728;&#x7ECF;&#x8FC7;&#x7B2C; 4 &#x6B65;&#x4F7F;&#x7528;Loader&#x7FFB;&#x8BD1;&#x5B8C;&#x6240;&#x6709;&#x6A21;&#x5757;&#x540E;&#xFF0C;&#x5F97;&#x5230;&#x4E86;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x88AB;&#x7FFB;&#x8BD1;&#x540E;&#x7684;&#x6700;&#x7EC8;&#x5185;&#x5BB9;&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB; &#x8F93;&#x51FA;&#x8D44;&#x6E90;&#xFF1A;&#x6839;&#x636E;&#x5165;&#x53E3;&#x548C;&#x6A21;&#x5757;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x7EC4;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x4E2A;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x6A21;&#x5757;&#x7684; Chunk&#xFF0C;&#x518D;&#x628A;&#x6BCF;&#x4E2A;Chunk&#x8F6C;&#x6362;&#x6210;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6;&#x52A0;&#x5165;&#x5230;&#x8F93;&#x51FA;&#x5217;&#x8868;&#xFF0C;&#x8FD9;&#x6B65;&#x662F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x8F93;&#x51FA;&#x5185;&#x5BB9;&#x7684;&#x6700;&#x540E;&#x673A;&#x4F1A;</li><li>&#x8F93;&#x51FA;&#x5B8C;&#x6210;&#xFF1A;&#x5728;&#x786E;&#x5B9A;&#x597D;&#x8F93;&#x51FA;&#x5185;&#x5BB9;&#x540E;&#xFF0C;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x786E;&#x5B9A;&#x8F93;&#x51FA;&#x7684;&#x8DEF;&#x5F84;&#x548C;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x628A;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5199;&#x5165;&#x5230;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;<blockquote><p>&#x5728;&#x4EE5;&#x4E0A;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;Webpack &#x4F1A;&#x5728;&#x7279;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x70B9;&#x5E7F;&#x64AD;&#x51FA;&#x7279;&#x5B9A;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x63D2;&#x4EF6;&#x5728;&#x76D1;&#x542C;&#x5230;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x4E8B;&#x4EF6;&#x540E;&#x4F1A;&#x6267;&#x884C;&#x7279;&#x5B9A;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x5E76;&#x4E14;&#x63D2;&#x4EF6;&#x53EF;&#x4EE5;&#x8C03;&#x7528; Webpack &#x63D0;&#x4F9B;&#x7684; API &#x6539;&#x53D8; Webpack &#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;</p></blockquote></li></ul><p><img src="../static/zhufengImg/webpackflow2020.jpg" alt="webpackflow2020"></p><h3 id="t244.1 webpack.config.js">4.1 webpack.config.js <a href="#t244.1 webpack.config.js">#</a></h3><pre><code class="lang-js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;path&quot;</span>);
<span class="hljs-keyword">const</span> RunPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./plugins/RunPlugin&quot;</span>);
<span class="hljs-keyword">const</span> DonePlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./plugins/DonePlugin&quot;</span>);
<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">context</span>: process.cwd(),
  <span class="hljs-attr">mode</span>: <span class="hljs-string">&quot;development&quot;</span>,
  <span class="hljs-attr">devtool</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">entry</span>: <span class="hljs-string">&quot;./src/app.js&quot;</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">path</span>: path.resolve(__dirname, <span class="hljs-string">&quot;dist&quot;</span>),
    <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;main.js&quot;</span>,
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jsx?$/</span>,
        <span class="hljs-attr">use</span>: {
          <span class="hljs-attr">loader</span>: <span class="hljs-string">&quot;babel-loader&quot;</span>,
          <span class="hljs-attr">options</span>: {
            <span class="hljs-attr">presets</span>: [<span class="hljs-string">&quot;@babel/preset-env&quot;</span>],
          },
        },
        <span class="hljs-attr">include</span>: path.join(__dirname, <span class="hljs-string">&quot;src&quot;</span>),
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
      },
    ],
  },
  <span class="hljs-attr">plugins</span>: [<span class="hljs-keyword">new</span> RunPlugin(),<span class="hljs-keyword">new</span> DonePlugin()],
  <span class="hljs-attr">devServer</span>: {},
};

</code></pre><h3 id="t254.2 flow.js">4.2 flow.js <a href="#t254.2 flow.js">#</a></h3><p>flow.js</p><pre><code class="lang-js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fs&apos;</span>);
<span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>);
<span class="hljs-keyword">const</span> { SyncHook } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;tapable&quot;</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Compiler</span> </span>{
  <span class="hljs-keyword">constructor</span>(options) {
    <span class="hljs-keyword">this</span>.options = options;
    <span class="hljs-keyword">this</span>.hooks = {
      <span class="hljs-attr">run</span>: <span class="hljs-keyword">new</span> SyncHook(),
      <span class="hljs-attr">done</span>: <span class="hljs-keyword">new</span> SyncHook(),
    };
  }
  run() {
    <span class="hljs-keyword">this</span>.hooks.run.call();  
    <span class="hljs-keyword">let</span> modules = [];
    <span class="hljs-keyword">let</span> chunks = [];
    <span class="hljs-keyword">let</span> files = [];
    <span class="hljs-comment">// &#x786E;&#x5B9A;&#x5165;&#x53E3;&#xFF1A;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x4E2D;&#x7684;entry&#x627E;&#x51FA;&#x6240;&#x6709;&#x7684;&#x5165;&#x53E3;&#x6587;&#x4EF6;</span>
    <span class="hljs-keyword">let</span> entry = path.join(<span class="hljs-keyword">this</span>.options.context, <span class="hljs-keyword">this</span>.options.entry);
    <span class="hljs-comment">//&#x4ECE;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x51FA;&#x53D1;&#xFF0C;&#x8C03;&#x7528;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x7684;Loader&#x5BF9;&#x6A21;&#x5757;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#xFF0C;</span>
    <span class="hljs-keyword">let</span> entryContent = fs.readFileSync(entry, <span class="hljs-string">&quot;utf8&quot;</span>);
    <span class="hljs-keyword">let</span> entrySource = babelLoader(entryContent);
    <span class="hljs-keyword">let</span> entryModule = { <span class="hljs-attr">id</span>: entry, <span class="hljs-attr">source</span>: entrySource };
    modules.push(entryModule);
    <span class="hljs-comment">//&#x518D;&#x627E;&#x51FA;&#x8BE5;&#x6A21;&#x5757;&#x4F9D;&#x8D56;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x518D;&#x9012;&#x5F52;&#x672C;&#x6B65;&#x9AA4;&#x76F4;&#x5230;&#x6240;&#x6709;&#x5165;&#x53E3;&#x4F9D;&#x8D56;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x7ECF;&#x8FC7;&#x4E86;&#x672C;&#x6B65;&#x9AA4;&#x7684;&#x5904;&#x7406;</span>
    <span class="hljs-keyword">let</span> title = path.join(<span class="hljs-keyword">this</span>.options.context, <span class="hljs-string">&quot;./src/title.js&quot;</span>);
    <span class="hljs-keyword">let</span> titleContent = fs.readFileSync(title, <span class="hljs-string">&quot;utf8&quot;</span>);
    <span class="hljs-keyword">let</span> titleSource = babelLoader(titleContent);
    <span class="hljs-keyword">let</span> titleModule = { <span class="hljs-attr">id</span>: title, <span class="hljs-attr">source</span>: titleSource };
    modules.push(titleModule);
    <span class="hljs-comment">//&#x6839;&#x636E;&#x5165;&#x53E3;&#x548C;&#x6A21;&#x5757;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x7EC4;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x4E2A;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x6A21;&#x5757;&#x7684; Chunk</span>
    <span class="hljs-keyword">let</span> chunk = { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;main&quot;</span>, modules };
    chunks.push(chunk);
    <span class="hljs-comment">//&#x518D;&#x628A;&#x6BCF;&#x4E2A;Chunk&#x8F6C;&#x6362;&#x6210;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6;&#x52A0;&#x5165;&#x5230;&#x8F93;&#x51FA;&#x5217;&#x8868;</span>
    <span class="hljs-keyword">let</span> file = {
      <span class="hljs-attr">file</span>: <span class="hljs-keyword">this</span>.options.output.filename,
      <span class="hljs-attr">source</span>: <span class="hljs-string">`
(function (modules) {
   function __webpack_require__(moduleId) {
     var module = { exports: {} };
     modules[moduleId].call(
     module.exports,
     module,
     module.exports,
     __webpack_require__
     );
     return module.exports;
   }
   return __webpack_require__(&quot;./src/app.js&quot;);
 })(
{
 &quot;./src/app.js&quot;: function (module, exports, __webpack_require__) {
     var title = __webpack_require__(&quot;./src/title.js&quot;);
     console.log(title);
 },
 &quot;./src/title.js&quot;: function (module) {
     module.exports = &quot;title&quot;;
 },
});
`</span>,
    };
    files.push(file);
    <span class="hljs-comment">//&#x5728;&#x786E;&#x5B9A;&#x597D;&#x8F93;&#x51FA;&#x5185;&#x5BB9;&#x540E;&#xFF0C;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x786E;&#x5B9A;&#x8F93;&#x51FA;&#x7684;&#x8DEF;&#x5F84;&#x548C;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x628A;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5199;&#x5165;&#x5230;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</span>
    <span class="hljs-keyword">let</span> outputPath = path.join(
      <span class="hljs-keyword">this</span>.options.output.path,
      <span class="hljs-keyword">this</span>.options.output.filename
    );
    fs.writeFileSync(outputPath, file.source,<span class="hljs-string">&apos;utf8&apos;</span>);
      <span class="hljs-keyword">this</span>.hooks.done.call();  
  }
}
<span class="hljs-comment">//1.&#x4ECE;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x548C;Shell&#x8BED;&#x53E5;&#x4E2D;&#x8BFB;&#x53D6;&#x4E0E;&#x5408;&#x5E76;&#x53C2;&#x6570;&#xFF0C;&#x5F97;&#x51FA;&#x6700;&#x7EC8;&#x7684;&#x53C2;&#x6570;</span>
<span class="hljs-keyword">let</span> options = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./webpack.config&apos;</span>);
<span class="hljs-comment">//2.&#x7528;&#x4E0A;&#x4E00;&#x6B65;&#x5F97;&#x5230;&#x7684;&#x53C2;&#x6570;&#x521D;&#x59CB;&#x5316;Compiler&#x5BF9;&#x8C61;</span>
<span class="hljs-keyword">let</span> compiler = <span class="hljs-keyword">new</span> Compiler(options);
<span class="hljs-comment">//3.&#x52A0;&#x8F7D;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x7684;&#x63D2;&#x4EF6;</span>
<span class="hljs-keyword">if</span> (options.plugins &amp;&amp; <span class="hljs-built_in">Array</span>.isArray(options.plugins)) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> plugin <span class="hljs-keyword">of</span> options.plugins) {
   plugin.apply(compiler);
  }
}
<span class="hljs-comment">//4.&#x6267;&#x884C;&#x5BF9;&#x8C61;&#x7684;run&#x65B9;&#x6CD5;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x7F16;&#x8BD1;</span>
compiler.run();
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">babelLoader</span>(<span class="hljs-params">source</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`var sum = function sum(a, b) {
              return a + b;
            };`</span>;
}
</code></pre><h3 id="t264.3 RunPlugin.js">4.3 RunPlugin.js <a href="#t264.3 RunPlugin.js">#</a></h3><p>plugins\RunPlugin.js</p><pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RunPlugin</span> </span>{
  apply(compiler) {
    compiler.hooks.run.tap(<span class="hljs-string">&quot;RunPlugin&quot;</span>, () =&gt; {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;RunPlugin&quot;</span>);
    });
  }
}
</code></pre><h3 id="t274.4 DonePlugin.js">4.4 DonePlugin.js <a href="#t274.4 DonePlugin.js">#</a></h3><p>plugins\DonePlugin.js</p><pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DonePlugin</span> </span>{
  apply(compiler) {
    compiler.hooks.done.tap(<span class="hljs-string">&quot;DonePlugin&quot;</span>, () =&gt; {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;DonePlugin&quot;</span>);
    });
  }
};
</code></pre><h2 id="t285.&#x6709;&#x54EA;&#x4E9B;&#x5E38;&#x89C1;&#x7684;Loader&#x548C;Plugin?&#x4ED6;&#x4EEC;&#x662F;&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x7684;?">5.&#x6709;&#x54EA;&#x4E9B;&#x5E38;&#x89C1;&#x7684;Loader&#x548C;Plugin?&#x4ED6;&#x4EEC;&#x662F;&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x7684;? <a href="#t285.&#x6709;&#x54EA;&#x4E9B;&#x5E38;&#x89C1;&#x7684;Loader&#x548C;Plugin?&#x4ED6;&#x4EEC;&#x662F;&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x7684;?">#</a></h2><h3 id="t295.1 loader">5.1 loader <a href="#t295.1 loader">#</a></h3><table><thead><tr><th style="text-align:left">loader</th><th style="text-align:left">&#x89E3;&#x51B3;&#x95EE;&#x9898;</th></tr></thead><tbody><tr><td style="text-align:left">babel-loader</td><td style="text-align:left">&#x628A; ES6 &#x6216;React&#x8F6C;&#x6362;&#x6210; ES5</td></tr><tr><td style="text-align:left">css-loader</td><td style="text-align:left">&#x52A0;&#x8F7D; CSS&#xFF0C;&#x652F;&#x6301;&#x6A21;&#x5757;&#x5316;&#x3001;&#x538B;&#x7F29;&#x3001;&#x6587;&#x4EF6;&#x5BFC;&#x5165;&#x7B49;&#x7279;&#x6027;</td></tr><tr><td style="text-align:left">eslint-loader</td><td style="text-align:left">&#x901A;&#x8FC7; ESLint &#x68C0;&#x67E5; JavaScript &#x4EE3;&#x7801;</td></tr><tr><td style="text-align:left">file-loader</td><td style="text-align:left">&#x628A;&#x6587;&#x4EF6;&#x8F93;&#x51FA;&#x5230;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x901A;&#x8FC7;&#x76F8;&#x5BF9; URL &#x53BB;&#x5F15;&#x7528;&#x8F93;&#x51FA;&#x7684;&#x6587;&#x4EF6;</td></tr><tr><td style="text-align:left">url-loader</td><td style="text-align:left">&#x548C; file-loader &#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;&#x80FD;&#x5728;&#x6587;&#x4EF6;&#x5F88;&#x5C0F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4EE5; base64 &#x7684;&#x65B9;&#x5F0F;&#x628A;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x6CE8;&#x5165;&#x5230;&#x4EE3;&#x7801;&#x4E2D;&#x53BB;</td></tr><tr><td style="text-align:left">sass-loader</td><td style="text-align:left">&#x628A;Sass/SCSS&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x6210;CSS</td></tr><tr><td style="text-align:left">postcss-loader</td><td style="text-align:left">&#x4F7F;&#x7528;PostCSS&#x5904;&#x7406;CSS</td></tr><tr><td style="text-align:left">css-loader</td><td style="text-align:left">&#x4E3B;&#x8981;&#x6765;&#x5904;&#x7406;background:(url)&#x8FD8;&#x6709;@import&#x8FD9;&#x4E9B;&#x8BED;&#x6CD5;&#x3002;&#x8BA9;webpack&#x80FD;&#x591F;&#x6B63;&#x786E;&#x7684;&#x5BF9;&#x5176;&#x8DEF;&#x5F84;&#x8FDB;&#x884C;&#x6A21;&#x5757;&#x5316;&#x5904;&#x7406;</td></tr><tr><td style="text-align:left">style-loader</td><td style="text-align:left">&#x628A; CSS &#x4EE3;&#x7801;&#x6CE8;&#x5165;&#x5230; JavaScript &#x4E2D;&#xFF0C;&#x901A;&#x8FC7; DOM &#x64CD;&#x4F5C;&#x53BB;&#x52A0;&#x8F7D; CSS&#x3002;</td></tr></tbody></table><h3 id="t305.2 plugin">5.2 plugin <a href="#t305.2 plugin">#</a></h3><table><thead><tr><th style="text-align:left">&#x63D2;&#x4EF6;</th><th style="text-align:left">&#x89E3;&#x51B3;&#x95EE;&#x9898;</th></tr></thead><tbody><tr><td style="text-align:left">case-sensitive-paths-webpack-plugin</td><td style="text-align:left">&#x5982;&#x679C;&#x8DEF;&#x5F84;&#x6709;&#x8BEF;&#x5219;&#x76F4;&#x63A5;&#x62A5;&#x9519;</td></tr><tr><td style="text-align:left">terser-webpack-plugin</td><td style="text-align:left">&#x4F7F;&#x7528;terser&#x6765;&#x538B;&#x7F29;JavaScript</td></tr><tr><td style="text-align:left">pnp-webpack-plugin</td><td style="text-align:left">Yarn Plug&apos;n&apos;Play&#x63D2;&#x4EF6;</td></tr><tr><td style="text-align:left">html-webpack-plugin</td><td style="text-align:left">&#x81EA;&#x52A8;&#x751F;&#x6210;&#x5E26;&#x6709;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x5F15;&#x7528;&#x7684;index.html</td></tr><tr><td style="text-align:left">webpack-manifest-plugin</td><td style="text-align:left">&#x751F;&#x4EA7;&#x8D44;&#x4EA7;&#x7684;&#x663E;&#x793A;&#x6E05;&#x5355;&#x6587;&#x4EF6;</td></tr><tr><td style="text-align:left">optimize-css-assets-webpack-plugin</td><td style="text-align:left">&#x7528;&#x4E8E;&#x4F18;&#x5316;&#x6216;&#x8005;&#x538B;&#x7F29;CSS&#x8D44;&#x6E90;</td></tr><tr><td style="text-align:left">mini-css-extract-plugin</td><td style="text-align:left">&#x5C06;CSS&#x63D0;&#x53D6;&#x4E3A;&#x72EC;&#x7ACB;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5BF9;&#x6BCF;&#x4E2A;&#x5305;&#x542B;css&#x7684;js&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;CSS&#x6587;&#x4EF6;&#xFF0C;&#x652F;&#x6301;&#x6309;&#x9700;&#x52A0;&#x8F7D;css&#x548C;sourceMap</td></tr><tr><td style="text-align:left">ModuleScopePlugin</td><td style="text-align:left">&#x5982;&#x679C;&#x5F15;&#x7528;&#x4E86;src&#x76EE;&#x5F55;&#x5916;&#x7684;&#x6587;&#x4EF6;&#x62A5;&#x8B66;&#x63D2;&#x4EF6;</td></tr><tr><td style="text-align:left">InterpolateHtmlPlugin</td><td style="text-align:left">&#x548C;HtmlWebpackPlugin&#x4E32;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x5141;&#x8BB8;&#x5728;index.html&#x4E2D;&#x6DFB;&#x52A0;&#x53D8;&#x91CF;</td></tr><tr><td style="text-align:left">ModuleNotFoundPlugin</td><td style="text-align:left">&#x627E;&#x4E0D;&#x5230;&#x6A21;&#x5757;&#x7684;&#x65F6;&#x5019;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4FE1;&#x606F;</td></tr><tr><td style="text-align:left">DefinePlugin</td><td style="text-align:left">&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x53EF;&#x914D;&#x7F6E;&#x7684;&#x5168;&#x5C40;&#x5E38;&#x91CF;,&#x5982;&#x679C;&#x4F60;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x53D8;&#x91CF;PRODUCTION,&#x53EF;&#x5728;&#x6B64;&#x8BBE;&#x7F6E;&#x5176;&#x503C;&#x6765;&#x533A;&#x5206;&#x5F00;&#x53D1;&#x8FD8;&#x662F;&#x751F;&#x4EA7;&#x73AF;&#x5883;</td></tr><tr><td style="text-align:left">HotModuleReplacementPlugin</td><td style="text-align:left">&#x542F;&#x7528;&#x6A21;&#x5757;&#x70ED;&#x66FF;&#x6362;</td></tr><tr><td style="text-align:left">WatchMissingNodeModulesPlugin</td><td style="text-align:left">:&#x6B64;&#x63D2;&#x4EF6;&#x5141;&#x8BB8;&#x4F60;&#x5B89;&#x88C5;&#x5E93;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x6253;&#x5305;&#x6587;&#x4EF6;</td></tr></tbody></table><h3 id="t315.3 &#x914D;&#x7F6E;">5.3 &#x914D;&#x7F6E; <a href="#t315.3 &#x914D;&#x7F6E;">#</a></h3><h4 id="t325.3.1 webpack.config.js">5.3.1 webpack.config.js <a href="#t325.3.1 webpack.config.js">#</a></h4><pre><code class="lang-js"><span class="hljs-meta">&apos;use strict&apos;</span>;

<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack&apos;</span>);
<span class="hljs-keyword">const</span> paths = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./paths&quot;</span>);
<span class="hljs-keyword">const</span> CaseSensitivePathsPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;case-sensitive-paths-webpack-plugin&quot;</span>);
<span class="hljs-keyword">const</span> TerserPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;terser-webpack-plugin&quot;</span>);
<span class="hljs-keyword">const</span> PnpWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;pnp-webpack-plugin&quot;</span>);
<span class="hljs-keyword">const</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;html-webpack-plugin&quot;</span>);
<span class="hljs-keyword">const</span> ManifestPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;webpack-manifest-plugin&quot;</span>);
<span class="hljs-keyword">const</span> MiniCssExtractPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;mini-css-extract-plugin&quot;</span>);
<span class="hljs-keyword">const</span> OptimizeCSSAssetsPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;optimize-css-assets-webpack-plugin&quot;</span>);
<span class="hljs-keyword">const</span> InlineChunkHtmlPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;react-dev-utils/InlineChunkHtmlPlugin&quot;</span>);
<span class="hljs-keyword">const</span> WatchMissingNodeModulesPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;react-dev-utils/WatchMissingNodeModulesPlugin&quot;</span>);
<span class="hljs-keyword">const</span> ModuleScopePlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;react-dev-utils/ModuleScopePlugin&quot;</span>);
<span class="hljs-keyword">const</span> InterpolateHtmlPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;react-dev-utils/InterpolateHtmlPlugin&quot;</span>);
<span class="hljs-keyword">const</span> ModuleNotFoundPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;react-dev-utils/ModuleNotFoundPlugin&quot;</span>);
<span class="hljs-keyword">const</span> getClientEnvironment = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./env&quot;</span>);
<span class="hljs-keyword">const</span> cssRegex = <span class="hljs-regexp">/\.css$/</span>;
<span class="hljs-keyword">const</span> sassRegex = <span class="hljs-regexp">/\.(scss|sass)$/</span>;
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">webpackEnv</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;webpackEnv&quot;</span>, webpackEnv); <span class="hljs-comment">//webpackEnv development</span>
  <span class="hljs-comment">//&#x5F00;&#x53D1;&#x73AF;&#x5883;</span>
  <span class="hljs-keyword">const</span> isEnvDevelopment = webpackEnv === <span class="hljs-string">&quot;development&quot;</span>;
  <span class="hljs-comment">//&#x751F;&#x4EA7;&#x73AF;&#x5883;</span>
  <span class="hljs-keyword">const</span> isEnvProduction = webpackEnv === <span class="hljs-string">&quot;production&quot;</span>;
  <span class="hljs-comment">//set GENERATE_SOURCEMAP=false</span>
  <span class="hljs-keyword">const</span> shouldUseSourceMap = process.env.GENERATE_SOURCEMAP !== <span class="hljs-string">&quot;false&quot;</span>;
  <span class="hljs-keyword">const</span> shouldInlineRuntimeChunk = process.env.INLINE_RUNTIME_CHUNK !== <span class="hljs-string">&quot;false&quot;</span>;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;shouldInlineRuntimeChunk&quot;</span>, shouldInlineRuntimeChunk);
  <span class="hljs-comment">// %PUBLIC_URL% in `index.html` and `process.env.PUBLIC_URL` in JavaScript.</span>
  <span class="hljs-comment">//&#x5FFD;&#x7565;&#x7ED3;&#x675F;&#x7684;/  &#x628A;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#x6CE8;&#x5165;&#x5230;&#x5F53;&#x524D;&#x5E94;&#x7528;&#x4E2D;&#x6765;</span>
  <span class="hljs-keyword">const</span> env = getClientEnvironment(paths.publicUrlOrPath.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>));
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;env&quot;</span>, env);
  <span class="hljs-keyword">const</span> getStyleLoaders = <span class="hljs-function">(<span class="hljs-params">cssOptions, preProcessor</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> loaders = [
      isEnvDevelopment &amp;&amp; <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;style-loader&quot;</span>),
      isEnvProduction &amp;&amp; {
        <span class="hljs-attr">loader</span>: MiniCssExtractPlugin.loader,
      },
      {
        <span class="hljs-attr">loader</span>: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;css-loader&quot;</span>),
        <span class="hljs-attr">options</span>: cssOptions,
      },
      {
        <span class="hljs-attr">loader</span>: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;postcss-loader&quot;</span>),
      },
    ].filter(<span class="hljs-built_in">Boolean</span>);
        <span class="hljs-keyword">if</span> (preProcessor) {
          loaders.push(
            {
              <span class="hljs-attr">loader</span>: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;resolve-url-loader&quot;</span>)
            },
            {
              <span class="hljs-attr">loader</span>: <span class="hljs-built_in">require</span>.resolve(preProcessor),
              <span class="hljs-attr">options</span>: {
                <span class="hljs-attr">sourceMap</span>: <span class="hljs-literal">true</span>,
              },
            }
          );
        }
    <span class="hljs-keyword">return</span> loaders;
  };
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">mode</span>: isEnvProduction ? <span class="hljs-string">&quot;production&quot;</span> : <span class="hljs-string">&quot;development&quot;</span>,
    <span class="hljs-attr">devtool</span>: isEnvProduction
      ? shouldUseSourceMap
        ? <span class="hljs-string">&quot;source-map&quot;</span>
        : <span class="hljs-literal">false</span>
      : isEnvDevelopment &amp;&amp; <span class="hljs-string">&quot;cheap-module-source-map&quot;</span>,
    <span class="hljs-attr">entry</span>: [
      isEnvDevelopment &amp;&amp;
        <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;react-dev-utils/webpackHotDevClient&quot;</span>),
      paths.appIndexJs,
    ].filter(<span class="hljs-built_in">Boolean</span>),
    <span class="hljs-attr">output</span>: {
      <span class="hljs-attr">path</span>: isEnvProduction ? paths.appBuild : <span class="hljs-literal">undefined</span>, <span class="hljs-comment">//&#x8F93;&#x51FA;&#x7684;&#x76EE;&#x6807;&#x8DEF;&#x5F84;</span>
      <span class="hljs-comment">//&#x4E00;&#x4E2A;main bundle&#x4E00;&#x4E2A;&#x6587;&#x4EF6;,&#x6BCF;&#x4E2A;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x4E5F;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x6587;&#x4EF6; ,&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;,&#x5E76;&#x4E0D;&#x4EA7;&#x51FA;&#x771F;&#x6B63;&#x7684;&#x6587;&#x4EF6;</span>
      <span class="hljs-attr">filename</span>: isEnvProduction
        ? <span class="hljs-string">&quot;static/js/[name].[contenthash:8].js&quot;</span>
        : <span class="hljs-string">&quot;static/js/bundle.js&quot;</span>,
      <span class="hljs-comment">//&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E86;&#x4EE3;&#x7801;&#x5206;&#x5272;&#x7684;&#x8BDD;,&#x8FD9;&#x91CC;&#x6709;&#x989D;&#x5916;&#x7684;JS&#x4EE3;&#x7801;&#x5757;&#x6587;&#x4EF6;</span>
      <span class="hljs-attr">chunkFilename</span>: isEnvProduction
        ? <span class="hljs-string">&quot;static/js/[name].[contenthash:8].chunk.js&quot;</span>
        : <span class="hljs-string">&quot;static/js/[name].chunk.js&quot;</span>,
      <span class="hljs-comment">//&#x6253;&#x540E;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;</span>
      <span class="hljs-attr">publicPath</span>: paths.publicUrlOrPath,
    },
    <span class="hljs-attr">optimization</span>: {
      <span class="hljs-attr">minimize</span>: isEnvProduction,
      <span class="hljs-attr">minimizer</span>: [
        <span class="hljs-comment">//&#x538B;&#x7F29;JS</span>
        <span class="hljs-keyword">new</span> TerserPlugin({}),
        <span class="hljs-comment">//&#x538B;&#x7F29;CSS</span>
        <span class="hljs-keyword">new</span> OptimizeCSSAssetsPlugin({}),
      ],
      <span class="hljs-comment">//&#x81EA;&#x52A8;&#x5206;&#x5272;&#x7B2C;&#x4E09;&#x65B9;&#x6A21;&#x5757;&#x548C;&#x516C;&#x5171;&#x6A21;&#x5757;</span>
      <span class="hljs-attr">splitChunks</span>: {
        <span class="hljs-attr">chunks</span>: <span class="hljs-string">&quot;all&quot;</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-literal">false</span>,
      },
      <span class="hljs-comment">//&#x4E3A;&#x4E86;&#x957F;&#x671F;&#x7F13;&#x5B58;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#x65F6;&#x4EE3;&#x7801;&#x5757;&#x662F;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6;</span>
      <span class="hljs-attr">runtimeChunk</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-function">(<span class="hljs-params">entrypoint</span>) =&gt;</span> <span class="hljs-string">`runtime-<span class="hljs-subst">${entrypoint.name}</span>`</span>,
      },
    },
    <span class="hljs-attr">resolve</span>: {
      <span class="hljs-comment">//&#x8BBE;&#x7F6E;modules&#x7684;&#x76EE;&#x5F55;</span>
      <span class="hljs-attr">modules</span>: [<span class="hljs-string">&quot;node_modules&quot;</span>, paths.appNodeModules],
      <span class="hljs-comment">//&#x6307;&#x5B9A;&#x6269;&#x5C55;&#x540D;</span>
      <span class="hljs-attr">extensions</span>: paths.moduleFileExtensions.map(<span class="hljs-function">(<span class="hljs-params">ext</span>) =&gt;</span> <span class="hljs-string">`.<span class="hljs-subst">${ext}</span>`</span>),
      <span class="hljs-attr">alias</span>: {
        <span class="hljs-comment">//&#x8BBE;&#x7F6E;&#x522B;&#x540D;</span>
        <span class="hljs-string">&quot;react-native&quot;</span>: <span class="hljs-string">&quot;react-native-web&quot;</span>,
      },
      <span class="hljs-attr">plugins</span>: [
        PnpWebpackPlugin,
        <span class="hljs-comment">//&#x9632;&#x6B62;&#x7528;&#x6237;&#x5F15;&#x7528;&#x5728;src&#x6216;&#x8005;node_modules&#x4E4B;&#x5916;&#x7684;&#x6587;&#x4EF6;</span>
        <span class="hljs-keyword">new</span> ModuleScopePlugin(paths.appSrc, [paths.appPackageJson]),
      ],
    },
    <span class="hljs-attr">resolveLoader</span>: {
      <span class="hljs-attr">plugins</span>: [PnpWebpackPlugin.moduleLoader(<span class="hljs-built_in">module</span>)],
    },
    <span class="hljs-attr">module</span>: {
      <span class="hljs-attr">rules</span>: [
        <span class="hljs-comment">//&#x5728;babel&#x5904;&#x7406;&#x4E4B;&#x524D;&#x6267;&#x884C;linter</span>
        {
          <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(js|mjs|jsx|ts|tsx)$/</span>,
          <span class="hljs-attr">enforce</span>: <span class="hljs-string">&quot;pre&quot;</span>,
          <span class="hljs-attr">use</span>: [
            {
              <span class="hljs-attr">loader</span>: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;eslint-loader&quot;</span>),
            },
          ],
          <span class="hljs-attr">include</span>: paths.appSrc,
        },
        {
          <span class="hljs-comment">//OneOf&#x4F1A;&#x904D;&#x5386;&#x63A5;&#x4E0B;&#x6765;&#x7684;loader&#x76F4;&#x5230;&#x627E;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x8981;&#x6C42;&#x7684;,&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5339;&#x914D;&#x7684;&#x4F1A;&#x8D70;file-loader</span>
          <span class="hljs-attr">oneOf</span>: [
            {
              <span class="hljs-attr">test</span>: [<span class="hljs-regexp">/\.bmp$/</span>, /\.gif$/, /\.jpe?g$/, /\.png$/],
              <span class="hljs-attr">loader</span>: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;url-loader&quot;</span>),
            },
            {
              <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(js|mjs|jsx|ts|tsx)$/</span>,
              <span class="hljs-attr">include</span>: paths.appSrc,
              <span class="hljs-attr">loader</span>: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;babel-loader&quot;</span>),
            },
            {
              <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(js|mjs)$/</span>,
              <span class="hljs-attr">loader</span>: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;babel-loader&quot;</span>),
            },
            {
              <span class="hljs-attr">test</span>: cssRegex,
              <span class="hljs-comment">//&#x7528;&#x4E8E;&#x914D;&#x7F6E;css-loader,&#x4F5C;&#x7528;&#x4E8E;@import&#x8D44;&#x6E90;&#x4E4B;&#x524D;&#x6709;&#x591A;&#x5C11;&#x4E2A;loader</span>
              <span class="hljs-comment">//0=&gt;&#x65E0;(&#x9ED8;&#x8BA4;) 1=&gt;postcss-loader 2 postcss-loader sass-loader</span>
              <span class="hljs-attr">use</span>: getStyleLoaders({ <span class="hljs-attr">importLoaders</span>: <span class="hljs-number">1</span> }),
            },
            {
              <span class="hljs-attr">test</span>: sassRegex,
              <span class="hljs-comment">//postcss-loader  sass-loader</span>
              <span class="hljs-attr">use</span>: getStyleLoaders({ <span class="hljs-attr">importLoaders</span>: <span class="hljs-number">3</span> }, <span class="hljs-string">&quot;sass-loader&quot;</span>),
            },
            {
              <span class="hljs-attr">loader</span>: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&quot;file-loader&quot;</span>),
              <span class="hljs-attr">exclude</span>: [<span class="hljs-regexp">/\.(js|mjs|jsx|ts|tsx)$/</span>, /\.html$/, /\.json$/],
              <span class="hljs-attr">options</span>: {
                <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;static/media/[name].[hash:8].[ext]&quot;</span>,
              },
            },
          ],
        },
      ],
    },
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-comment">//&#x4F7F;&#x7528;&#x63D2;&#x5165;&#x7684;script&#x6807;&#x7B7E;&#x751F;&#x6210;&#x4E00;&#x4E2A;index.html&#x6807;&#x7B7E;</span>
      <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
        <span class="hljs-attr">inject</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">template</span>: paths.appHtml,
      }),
      isEnvProduction &amp;&amp;
        shouldInlineRuntimeChunk &amp;&amp;
        <span class="hljs-keyword">new</span> InlineChunkHtmlPlugin(HtmlWebpackPlugin, [<span class="hljs-regexp">/runtime-.+[.]js/</span>]),
      <span class="hljs-comment">//&#x4FDD;&#x8BC1;&#x5728;index.html&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x73AF;&#x5883;&#x53D8;&#x91CF;public URL&#x53EF;&#x4EE5;&#x901A;&#x8FC7;%PUBLIC_URL%&#x83B7;&#x53D6;</span>
      <span class="hljs-keyword">new</span> InterpolateHtmlPlugin(HtmlWebpackPlugin, env.raw),
      <span class="hljs-comment">//&#x6A21;&#x5757;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x65F6;&#x5019;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x5FC5;&#x8981;&#x4E0A;&#x4E0B;&#x6587;&#x4FE1;&#x606F;</span>
      <span class="hljs-keyword">new</span> ModuleNotFoundPlugin(paths.appPath),
      <span class="hljs-comment">//&#x4FDD;&#x8BC1;&#x5728;JS&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x73AF;&#x5883;&#x53D8;&#x91CF;if (process.env.NODE_ENV === &apos;production&apos;) { ... }</span>
      <span class="hljs-keyword">new</span> webpack.DefinePlugin(env.stringified),
      <span class="hljs-comment">//&#x6A21;&#x5757;&#x70ED;&#x66F4;&#x65B0;&#x63D2;&#x4EF6;</span>
      isEnvDevelopment &amp;&amp; <span class="hljs-keyword">new</span> webpack.HotModuleReplacementPlugin(),
      <span class="hljs-comment">//&#x5F53;&#x4F60;&#x5927;&#x5C0F;&#x5199;&#x62FC;&#x9519;&#x7684;&#x65F6;&#x5019;&#x8FDB;&#x884C;&#x63D0;&#x793A;</span>
      isEnvDevelopment &amp;&amp; <span class="hljs-keyword">new</span> CaseSensitivePathsPlugin(),
      <span class="hljs-comment">//&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x6A21;&#x5757;&#x540E;&#x4E0D;&#x7528;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x5F00;&#x53D1;&#x670D;&#x52A1;&#x5668;</span>
      isEnvDevelopment &amp;&amp;
        <span class="hljs-keyword">new</span> WatchMissingNodeModulesPlugin(paths.appNodeModules),
      <span class="hljs-comment">//&#x63D0;&#x53D6;CSS</span>
      isEnvProduction &amp;&amp;
        <span class="hljs-keyword">new</span> MiniCssExtractPlugin({
          <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;static/css/[name].[contenthash:8].css&quot;</span>,
          <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">&quot;static/css/[name].[contenthash:8].chunk.css&quot;</span>,
        }),
      <span class="hljs-comment">//&#x751F;&#x6210;&#x4E00;&#x4E2A;manifest&#x6587;&#x4EF6;</span>
      <span class="hljs-keyword">new</span> ManifestPlugin({
        <span class="hljs-attr">fileName</span>: <span class="hljs-string">&quot;asset-manifest.json&quot;</span>,
        <span class="hljs-attr">publicPath</span>: paths.publicUrlOrPath,
        <span class="hljs-attr">generate</span>: <span class="hljs-function">(<span class="hljs-params">seed, files, entrypoints</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> manifestFiles = files.reduce(<span class="hljs-function">(<span class="hljs-params">manifest, file</span>) =&gt;</span> {
            manifest[file.name] = file.path;
            <span class="hljs-keyword">return</span> manifest;
          }, seed);
          <span class="hljs-keyword">const</span> entrypointFiles = entrypoints.main.filter(
            <span class="hljs-function">(<span class="hljs-params">fileName</span>) =&gt;</span> !fileName.endsWith(<span class="hljs-string">&quot;.map&quot;</span>)
          );

          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">files</span>: manifestFiles,
            <span class="hljs-attr">entrypoints</span>: entrypointFiles,
          };
        },
      }),
    ].filter(<span class="hljs-built_in">Boolean</span>),
  };
};

</code></pre><h4 id="t335.3.2 paths.js">5.3.2 paths.js <a href="#t335.3.2 paths.js">#</a></h4><p>paths.js</p><pre><code class="lang-js"><span class="hljs-meta">&apos;use strict&apos;</span>;

<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fs&apos;</span>);

<span class="hljs-comment">//&#x5F53;&#x524D;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</span>
<span class="hljs-keyword">const</span> appDirectory = fs.realpathSync(process.cwd());
<span class="hljs-comment">//&#x4ECE;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x4E2D;&#x89E3;&#x6790;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</span>
<span class="hljs-keyword">const</span> resolveApp = <span class="hljs-function"><span class="hljs-params">relativePath</span> =&gt;</span> path.resolve(appDirectory, relativePath);
<span class="hljs-comment">//&#x83B7;&#x53D6;PublicUrlOrPath</span>
<span class="hljs-keyword">const</span> publicUrlOrPath = <span class="hljs-built_in">require</span>(resolveApp(<span class="hljs-string">&quot;package.json&quot;</span>)).homepage || process.env.PUBLIC_URL || <span class="hljs-string">&quot;&quot;</span>;
<span class="hljs-comment">//&#x9ED8;&#x8BA4;&#x7684;&#x6A21;&#x5757;&#x6269;&#x5C55;&#x540D;</span>
<span class="hljs-keyword">const</span> moduleFileExtensions = [
  <span class="hljs-string">&apos;web.mjs&apos;</span>,
  <span class="hljs-string">&apos;mjs&apos;</span>,
  <span class="hljs-string">&apos;web.js&apos;</span>,
  <span class="hljs-string">&apos;js&apos;</span>,
  <span class="hljs-string">&apos;web.ts&apos;</span>,
  <span class="hljs-string">&apos;ts&apos;</span>,
  <span class="hljs-string">&apos;web.tsx&apos;</span>,
  <span class="hljs-string">&apos;tsx&apos;</span>,
  <span class="hljs-string">&apos;json&apos;</span>,
  <span class="hljs-string">&apos;web.jsx&apos;</span>,
  <span class="hljs-string">&apos;jsx&apos;</span>,
];
<span class="hljs-comment">//&#x89E3;&#x6790;&#x6A21;&#x5757;&#x8DEF;&#x5F84;</span>
<span class="hljs-keyword">const</span> resolveModule = <span class="hljs-function">(<span class="hljs-params">resolveFn, filePath</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> extension = moduleFileExtensions.find(<span class="hljs-function"><span class="hljs-params">extension</span> =&gt;</span>
    fs.existsSync(resolveFn(<span class="hljs-string">`<span class="hljs-subst">${filePath}</span>.<span class="hljs-subst">${extension}</span>`</span>))
  );

  <span class="hljs-keyword">if</span> (extension) {
    <span class="hljs-keyword">return</span> resolveFn(<span class="hljs-string">`<span class="hljs-subst">${filePath}</span>.<span class="hljs-subst">${extension}</span>`</span>);
  }

  <span class="hljs-keyword">return</span> resolveFn(<span class="hljs-string">`<span class="hljs-subst">${filePath}</span>.js`</span>);
};

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">dotenv</span>: resolveApp(<span class="hljs-string">&apos;.env&apos;</span>),<span class="hljs-comment">//&#x5BA2;&#x6237;&#x7AEF;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x8DEF;&#x5F84;</span>
  <span class="hljs-attr">appPath</span>: resolveApp(<span class="hljs-string">&apos;.&apos;</span>),<span class="hljs-comment">//&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x8DEF;&#x5F84;</span>
  <span class="hljs-attr">appBuild</span>: resolveApp(<span class="hljs-string">&apos;build&apos;</span>),<span class="hljs-comment">//&#x8F93;&#x51FA;&#x7684;build&#x76EE;&#x6807;&#x8DEF;&#x5F84;</span>
  <span class="hljs-attr">appPublic</span>: resolveApp(<span class="hljs-string">&apos;public&apos;</span>),<span class="hljs-comment">//public&#x76EE;&#x5F55;</span>
  <span class="hljs-attr">appHtml</span>: resolveApp(<span class="hljs-string">&apos;public/index.html&apos;</span>),<span class="hljs-comment">//html&#x6587;&#x4EF6;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</span>
  <span class="hljs-attr">appIndexJs</span>: resolveModule(resolveApp, <span class="hljs-string">&apos;src/index&apos;</span>),<span class="hljs-comment">//&#x5165;&#x53E3;&#x6587;&#x4EF6;</span>
  <span class="hljs-attr">appPackageJson</span>: resolveApp(<span class="hljs-string">&apos;package.json&apos;</span>),<span class="hljs-comment">//package.json&#x6587;&#x4EF6;&#x8DEF;&#x5F84;</span>
  <span class="hljs-attr">appSrc</span>: resolveApp(<span class="hljs-string">&apos;src&apos;</span>),<span class="hljs-comment">//src&#x8DEF;&#x5F84;</span>
  <span class="hljs-attr">appTsConfig</span>: resolveApp(<span class="hljs-string">&apos;tsconfig.json&apos;</span>),
  <span class="hljs-attr">appJsConfig</span>: resolveApp(<span class="hljs-string">&apos;jsconfig.json&apos;</span>),
  <span class="hljs-attr">appNodeModules</span>: resolveApp(<span class="hljs-string">&apos;node_modules&apos;</span>),
  publicUrlOrPath,
};

<span class="hljs-built_in">module</span>.exports.moduleFileExtensions = moduleFileExtensions;

</code></pre><h4 id="t345.3.3 env.js">5.3.3 env.js <a href="#t345.3.3 env.js">#</a></h4><p>env.js</p><pre><code class="lang-js"><span class="hljs-meta">&apos;use strict&apos;</span>;

<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fs&apos;</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>);
<span class="hljs-keyword">const</span> paths = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./paths&apos;</span>);
<span class="hljs-comment">//&#x4E00;&#x822C;&#x53EF;&#x80FD;&#x662F;production&#x6216;&#x8005;development set NODE_ENV=development</span>
<span class="hljs-keyword">const</span> NODE_ENV = process.env.NODE_ENV;

<span class="hljs-comment">//&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;</span>
<span class="hljs-keyword">const</span> dotenvFiles = [
  <span class="hljs-string">`<span class="hljs-subst">${paths.dotenv}</span>.<span class="hljs-subst">${NODE_ENV}</span>.local`</span>, <span class="hljs-comment">// .env.development.local</span>
  <span class="hljs-string">`<span class="hljs-subst">${paths.dotenv}</span>.<span class="hljs-subst">${NODE_ENV}</span>`</span>,       <span class="hljs-comment">// .env.development</span>
  <span class="hljs-comment">//&#x5728;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x4E0B;&#x4E0D;&#x8981;&#x5305;&#x62EC;.env.local</span>
  NODE_ENV !== <span class="hljs-string">&apos;test&apos;</span> &amp;&amp; <span class="hljs-string">`<span class="hljs-subst">${paths.dotenv}</span>.local`</span>, <span class="hljs-comment">// .env.local</span>
  paths.dotenv,<span class="hljs-comment">//.env</span>
].filter(<span class="hljs-built_in">Boolean</span>);

<span class="hljs-comment">//&#x4ECE;.env*&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x8F7D;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span>
dotenvFiles.forEach(<span class="hljs-function"><span class="hljs-params">dotenvFile</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (fs.existsSync(dotenvFile)) {
    <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;dotenv-expand&apos;</span>)(
      <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;dotenv&apos;</span>).config({
        <span class="hljs-attr">path</span>: dotenvFile,
      })
    );
  }
});

<span class="hljs-comment">//&#x652F;&#x6301;&#x901A;&#x8FC7;NODE_PATH&#x52A0;&#x8F7D;&#x89E3;&#x6790;&#x6A21;&#x5757; set NODE_PATH=modules;extraModules</span>
<span class="hljs-keyword">const</span> appDirectory = fs.realpathSync(process.cwd());
process.env.NODE_PATH = (process.env.NODE_PATH || <span class="hljs-string">&apos;&apos;</span>)
  .split(path.delimiter)
  .filter(<span class="hljs-function"><span class="hljs-params">folder</span> =&gt;</span> folder &amp;&amp; !path.isAbsolute(folder))
  .map(<span class="hljs-function"><span class="hljs-params">folder</span> =&gt;</span> path.resolve(appDirectory, folder))
  .join(path.delimiter);

<span class="hljs-comment">//&#x83B7;&#x53D6;NODE_ENV and REACT_APP_*&#x73AF;&#x5883;&#x53D8;&#x91CF;,&#x5E76;&#x4E14;&#x51C6;&#x5907;&#x901A;&#x8FC7;DefinePlugin&#x63D2;&#x5165;&#x5E94;&#x7528;</span>
<span class="hljs-comment">//set REACT_APP_NAME=zhufeng</span>
<span class="hljs-keyword">const</span> REACT_APP = <span class="hljs-regexp">/^REACT_APP_/i</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getClientEnvironment</span>(<span class="hljs-params">publicUrl</span>) </span>{
  <span class="hljs-keyword">const</span> raw = <span class="hljs-built_in">Object</span>.keys(process.env)
    .filter(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> REACT_APP.test(key))
    .reduce(
      <span class="hljs-function">(<span class="hljs-params">env, key</span>) =&gt;</span> {
        env[key] = process.env[key];
        <span class="hljs-keyword">return</span> env;
      },
      {
        <span class="hljs-comment">//&#x51B3;&#x5B9A;&#x5F53;&#x524D;&#x662F;&#x5426;&#x5904;&#x4E8E;&#x5F00;&#x53D1;&#x6A21;&#x5F0F;</span>
        <span class="hljs-attr">NODE_ENV</span>: process.env.NODE_ENV || <span class="hljs-string">&quot;development&quot;</span>,
        <span class="hljs-comment">//&#x7528;&#x6765;&#x89E3;&#x6790;&#x5904;&#x4E8E;public&#x4E0B;&#x9762;&#x7684;&#x6B63;&#x786E;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;</span>
        <span class="hljs-attr">PUBLIC_URL</span>: publicUrl,
      }
    );
  <span class="hljs-comment">//&#x628A;&#x6240;&#x6709;&#x7684;&#x503C;&#x8F6C;&#x6210;&#x5B57;&#x7B26;&#x4E32;&#x4EE5;&#x4FBF;&#x5728;DefinePlugin&#x4E2D;&#x4F7F;&#x7528;</span>
  <span class="hljs-keyword">const</span> stringified = {
    <span class="hljs-string">&quot;process.env&quot;</span>: <span class="hljs-built_in">Object</span>.keys(raw).reduce(<span class="hljs-function">(<span class="hljs-params">env, key</span>) =&gt;</span> {
      env[key] = <span class="hljs-built_in">JSON</span>.stringify(raw[key]);
      <span class="hljs-keyword">return</span> env;
    }, {}),
  };

  <span class="hljs-keyword">return</span> { raw, stringified };
}

<span class="hljs-built_in">module</span>.exports = getClientEnvironment;
</code></pre><h4 id="t355.3.4 webpackDevServer.config.js">5.3.4 webpackDevServer.config.js <a href="#t355.3.4 webpackDevServer.config.js">#</a></h4><pre><code class="lang-js"><span class="hljs-meta">&apos;use strict&apos;</span>;

<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fs&apos;</span>);
<span class="hljs-keyword">const</span> errorOverlayMiddleware = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;react-dev-utils/errorOverlayMiddleware&apos;</span>);
<span class="hljs-keyword">const</span> evalSourceMapMiddleware = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;react-dev-utils/evalSourceMapMiddleware&apos;</span>);
<span class="hljs-keyword">const</span> ignoredFiles = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;react-dev-utils/ignoredFiles&apos;</span>);
<span class="hljs-keyword">const</span> redirectServedPath = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;react-dev-utils/redirectServedPathMiddleware&apos;</span>);
<span class="hljs-keyword">const</span> paths = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./paths&apos;</span>);
<span class="hljs-keyword">const</span> host = process.env.HOST || <span class="hljs-string">&apos;0.0.0.0&apos;</span>;

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">proxy, allowedHost</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">//&#x7981;&#x7528;&#x4E3B;&#x673A;&#x68C0;&#x67E5;</span>
    <span class="hljs-attr">disableHostCheck</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">//&#x542F;&#x52A8;gzip&#x538B;&#x7F29;</span>
    <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">//&#x7981;&#x7528;WebpackDevServer&#x81EA;&#x5DF1;&#x7684;&#x65E5;&#x5FD7;,&#x8B66;&#x544A;&#x548C;&#x9519;&#x8BEF;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x663E;&#x793A;&#x7684;</span>
    <span class="hljs-attr">clientLogLevel</span>: <span class="hljs-string">&quot;none&quot;</span>,
    <span class="hljs-comment">//&#x9759;&#x6001;&#x6587;&#x4EF6;&#x6839;&#x76EE;&#x5F55;</span>
    <span class="hljs-attr">contentBase</span>: paths.appPublic,
    <span class="hljs-attr">contentBasePublicPath</span>: paths.publicUrlOrPath,
    <span class="hljs-comment">//&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;contentBase&#x91CC;&#x7684;&#x6587;&#x4EF6;&#x53D8;&#x66F4;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x9875;&#x9762;&#x5237;&#x65B0;</span>
    <span class="hljs-attr">watchContentBase</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">//&#x542F;&#x7528;&#x70ED;&#x66F4;&#x65B0;</span>
    <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">//&#x4F7F;&#x7528;ws&#x800C;&#x975E;socketjs-node&#x6A21;&#x5757;</span>
    <span class="hljs-attr">transportMode</span>: <span class="hljs-string">&quot;ws&quot;</span>,
    <span class="hljs-comment">//&#x4E0D;&#x9700;&#x8981;&#x6CE8;&#x5165;WS&#x5BA2;&#x6237;&#x7AEF;</span>
    <span class="hljs-attr">injectClient</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">//&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;</span>
    <span class="hljs-attr">publicPath</span>: paths.publicUrlOrPath.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>),
    <span class="hljs-comment">//&#x66F4;&#x5C11;&#x7684;WebpackDevServer&#x65E5;&#x5FD7;</span>
    <span class="hljs-attr">quiet</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">watchOptions</span>: {
      <span class="hljs-attr">ignored</span>: ignoredFiles(paths.appSrc), <span class="hljs-comment">//&#x4E0D;&#x8981;&#x76D1;&#x63A7;src&#x76EE;&#x5F55;</span>
    },
    host,
    <span class="hljs-attr">historyApiFallback</span>: {
      <span class="hljs-comment">//&#x7981;&#x7528;dotRule</span>
      <span class="hljs-attr">disableDotRule</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">index</span>: paths.publicUrlOrPath,
    },
    <span class="hljs-attr">public</span>: allowedHost,
    <span class="hljs-comment">//proxy&#x4F1A;&#x5728;before&#x548C;after&#x4E4B;&#x95F4;&#x6267;&#x884C;</span>
    proxy,
    before(app, server) {
      <span class="hljs-comment">//&#x5728;&#x51FA;&#x9519;&#x7684;&#x65F6;&#x5019;&#x83B7;&#x53D6;&#x6E90;&#x7801;&#x5185;&#x5BB9;</span>
      app.use(evalSourceMapMiddleware(server));
      <span class="hljs-comment">//&#x8BA9;&#x6211;&#x4EEC;&#x4ECE;&#x8FD0;&#x884C;&#x65F6;&#x9519;&#x8BEF;&#x6253;&#x5F00;&#x6587;&#x4EF6;</span>
      app.use(errorOverlayMiddleware());
      <span class="hljs-comment">//&#x7531;&#x4E8E;&#x4EE3;&#x7406;&#x6CE8;&#x518C;&#x7684;&#x4E2D;&#x95F4;&#x4EF6; </span>
      <span class="hljs-keyword">if</span> (fs.existsSync(paths.proxySetup)) {
        <span class="hljs-built_in">require</span>(paths.proxySetup)(app);
      }
    },
    after(app) {
      <span class="hljs-comment">//&#x5982;&#x679C;URL&#x4E0D;&#x5339;&#x914D;&#x91CD;&#x5B9A;&#x5411;&#x5230;`PUBLIC_URL` or `homepage` from `package.json`</span>
      app.use(redirectServedPath(paths.publicUrlOrPath));
    },
  };
};

</code></pre><h4 id="t365.3.5 webpack.dev.config.js">5.3.5 webpack.dev.config.js <a href="#t365.3.5 webpack.dev.config.js">#</a></h4><p>webpack.dev.config.js</p><pre><code class="lang-js">
<span class="hljs-keyword">const</span> { merge } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;webpack-merge&quot;</span>);
<span class="hljs-keyword">let</span> config = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./webpack.config&apos;</span>);
<span class="hljs-keyword">let</span> devServerConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./webpackDevServer.config&apos;</span>);
<span class="hljs-built_in">module</span>.exports = merge(config(<span class="hljs-string">&apos;development&apos;</span>), {
  <span class="hljs-attr">devServer</span>: devServerConfig()
});
</code></pre><h4 id="t375.3.6 postcss.config.js">5.3.6 postcss.config.js <a href="#t375.3.6 postcss.config.js">#</a></h4><p>postcss.config.js</p><pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;autoprefixer&quot;</span>)({ <span class="hljs-attr">overrideBrowserslist</span>: [<span class="hljs-string">&quot;&gt; 0.15% in CN&quot;</span>] }), <span class="hljs-comment">// &#x81EA;&#x52A8;&#x6DFB;&#x52A0;css&#x524D;&#x7F00;</span>
  ],
};
</code></pre><h4 id="t385.3.7 .eslintrc.json">5.3.7 .eslintrc.json <a href="#t385.3.7 .eslintrc.json">#</a></h4><pre><code class="lang-js">{
    <span class="hljs-string">&quot;env&quot;</span>: {
        <span class="hljs-string">&quot;browser&quot;</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">&quot;es2020&quot;</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">&quot;parserOptions&quot;</span>: {
        <span class="hljs-string">&quot;ecmaVersion&quot;</span>: <span class="hljs-number">2020</span>,
        <span class="hljs-string">&quot;sourceType&quot;</span>: <span class="hljs-string">&quot;module&quot;</span>
    },
    <span class="hljs-string">&quot;rules&quot;</span>: {
    }
}
</code></pre><h4 id="t395.3.8 package.json">5.3.8 package.json <a href="#t395.3.8 package.json">#</a></h4><pre><code class="lang-json">{
    <span class="hljs-attr">&quot;scripts&quot;</span>: {
      <span class="hljs-attr">&quot;build&quot;</span>: <span class="hljs-string">&quot;webpack --env=production&quot;</span>,
      <span class="hljs-attr">&quot;start&quot;</span>: <span class="hljs-string">&quot;webpack-dev-server --env=development --config webpack.dev.config.js&quot;</span>
    }
}
</code></pre><h2 id="t406. source map&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x600E;&#x4E48;&#x7528;?">6. source map&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x600E;&#x4E48;&#x7528;? <a href="#t406. source map&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x600E;&#x4E48;&#x7528;?">#</a></h2><ul><li>sourcemap&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x5F00;&#x53D1;&#x4EE3;&#x7801;&#x4E0E;&#x5B9E;&#x9645;&#x8FD0;&#x884C;&#x4EE3;&#x7801;&#x4E0D;&#x4E00;&#x81F4;&#x65F6;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;debug&#x5230;&#x539F;&#x59CB;&#x5F00;&#x53D1;&#x4EE3;&#x7801;&#x7684;&#x6280;&#x672F;</li><li>webpack&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x7ED9;&#x6211;&#x4EEC;<code>source maps</code>&#x6587;&#x4EF6;&#xFF0C;<code>map</code>&#x6587;&#x4EF6;&#x662F;&#x4E00;&#x79CD;&#x5BF9;&#x5E94;&#x7F16;&#x8BD1;&#x6587;&#x4EF6;&#x548C;&#x6E90;&#x6587;&#x4EF6;&#x7684;&#x65B9;&#x6CD5;</li><li><a href="https://github.com/webpack/docs/wiki/build-performance#sourcemaps">whyeval</a></li><li><a href="https://github.com/mozilla/source-map">source-map</a></li><li><a href="http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html">javascript_source_map&#x7B97;&#x6CD5;</a></li></ul><h3 id="t416.1 source map&#x7684;&#x7C7B;&#x578B;">6.1 source map&#x7684;&#x7C7B;&#x578B; <a href="#t416.1 source map&#x7684;&#x7C7B;&#x578B;">#</a></h3><table><thead><tr><th style="text-align:left">&#x7C7B;&#x578B;</th><th style="text-align:left">&#x542B;&#x4E49;</th></tr></thead><tbody><tr><td style="text-align:left">source-map</td><td style="text-align:left">&#x539F;&#x59CB;&#x4EE3;&#x7801; &#x6700;&#x597D;&#x7684;sourcemap&#x8D28;&#x91CF;&#x6709;&#x5B8C;&#x6574;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x5F88;&#x6162;</td></tr><tr><td style="text-align:left">eval-source-map</td><td style="text-align:left">&#x539F;&#x59CB;&#x4EE3;&#x7801; &#x540C;&#x6837;&#x9053;&#x7406;&#xFF0C;&#x4F46;&#x662F;&#x6700;&#x9AD8;&#x7684;&#x8D28;&#x91CF;&#x548C;&#x6700;&#x4F4E;&#x7684;&#x6027;&#x80FD;</td></tr><tr><td style="text-align:left">cheap-module-eval-source-map</td><td style="text-align:left">&#x539F;&#x59CB;&#x4EE3;&#x7801;&#xFF08;&#x53EA;&#x6709;&#x884C;&#x5185;&#xFF09; &#x540C;&#x6837;&#x9053;&#x7406;&#xFF0C;&#x4F46;&#x662F;&#x66F4;&#x9AD8;&#x7684;&#x8D28;&#x91CF;&#x548C;&#x66F4;&#x4F4E;&#x7684;&#x6027;&#x80FD;</td></tr><tr><td style="text-align:left">cheap-eval-source-map</td><td style="text-align:left">&#x8F6C;&#x6362;&#x4EE3;&#x7801;&#xFF08;&#x884C;&#x5185;&#xFF09; &#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x88AB;eval&#x6267;&#x884C;&#xFF0C;&#x5E76;&#x4E14;sourcemap&#x4F5C;&#x4E3A;eval&#x7684;&#x4E00;&#x4E2A;dataurl</td></tr><tr><td style="text-align:left">eval</td><td style="text-align:left">&#x751F;&#x6210;&#x4EE3;&#x7801; &#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x90FD;&#x88AB;eval&#x6267;&#x884C;&#xFF0C;&#x5E76;&#x4E14;&#x5B58;&#x5728;@sourceURL,&#x5E26;eval&#x7684;&#x6784;&#x5EFA;&#x6A21;&#x5F0F;&#x80FD;cache SourceMap</td></tr><tr><td style="text-align:left">cheap-source-map</td><td style="text-align:left">&#x8F6C;&#x6362;&#x4EE3;&#x7801;&#xFF08;&#x884C;&#x5185;&#xFF09; &#x751F;&#x6210;&#x7684;sourcemap&#x6CA1;&#x6709;&#x5217;&#x6620;&#x5C04;&#xFF0C;&#x4ECE;loaders&#x751F;&#x6210;&#x7684;sourcemap&#x6CA1;&#x6709;&#x88AB;&#x4F7F;&#x7528;</td></tr><tr><td style="text-align:left">cheap-module-source-map</td><td style="text-align:left">&#x539F;&#x59CB;&#x4EE3;&#x7801;&#xFF08;&#x53EA;&#x6709;&#x884C;&#x5185;&#xFF09; &#x4E0E;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#x9664;&#x4E86;&#x6BCF;&#x884C;&#x7279;&#x70B9;&#x7684;&#x4ECE;loader&#x4E2D;&#x8FDB;&#x884C;&#x6620;&#x5C04;</td></tr></tbody></table><p>&#x770B;&#x4F3C;&#x914D;&#x7F6E;&#x9879;&#x5F88;&#x591A;&#xFF0C; &#x5176;&#x5B9E;&#x53EA;&#x662F;&#x4E94;&#x4E2A;&#x5173;&#x952E;&#x5B57;eval&#x3001;source-map&#x3001;cheap&#x3001;module&#x548C;inline&#x7684;&#x4EFB;&#x610F;&#x7EC4;&#x5408;</p><table><thead><tr><th style="text-align:left">&#x5173;&#x952E;&#x5B57;</th><th style="text-align:left">&#x542B;&#x4E49;</th></tr></thead><tbody><tr><td style="text-align:left">eval</td><td style="text-align:left">&#x4F7F;&#x7528;eval&#x5305;&#x88F9;&#x6A21;&#x5757;&#x4EE3;&#x7801;</td></tr><tr><td style="text-align:left">source-map</td><td style="text-align:left">&#x4EA7;&#x751F;.map&#x6587;&#x4EF6;</td></tr><tr><td style="text-align:left">cheap</td><td style="text-align:left">&#x4E0D;&#x5305;&#x542B;&#x5217;&#x4FE1;&#x606F;&#xFF08;&#x5173;&#x4E8E;&#x5217;&#x4FE1;&#x606F;&#x7684;&#x89E3;&#x91CA;&#x4E0B;&#x9762;&#x4F1A;&#x6709;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;)&#x4E5F;&#x4E0D;&#x5305;&#x542B;loader&#x7684;sourcemap</td></tr><tr><td style="text-align:left">module</td><td style="text-align:left">&#x5305;&#x542B;loader&#x7684;sourcemap&#xFF08;&#x6BD4;&#x5982;jsx to js &#xFF0C;babel&#x7684;sourcemap&#xFF09;,&#x5426;&#x5219;&#x65E0;&#x6CD5;&#x5B9A;&#x4E49;&#x6E90;&#x6587;&#x4EF6;</td></tr><tr><td style="text-align:left">inline</td><td style="text-align:left">&#x5C06;.map&#x4F5C;&#x4E3A;DataURI&#x5D4C;&#x5165;&#xFF0C;&#x4E0D;&#x5355;&#x72EC;&#x751F;&#x6210;.map&#x6587;&#x4EF6;</td></tr></tbody></table><ul><li>eval eval&#x6267;&#x884C;</li><li>eval-source-map &#x751F;&#x6210;sourcemap</li><li>cheap-module-eval-source-map &#x4E0D;&#x5305;&#x542B;&#x5217;</li><li>cheap-eval-source-map &#x65E0;&#x6CD5;&#x770B;&#x5230;&#x771F;&#x6B63;&#x7684;&#x6E90;&#x7801;</li></ul><h3 id="t426.2 &#x5982;&#x4F55;&#x9009;&#x62E9;source map&#x7684;&#x7C7B;&#x578B;">6.2 &#x5982;&#x4F55;&#x9009;&#x62E9;source map&#x7684;&#x7C7B;&#x578B; <a href="#t426.2 &#x5982;&#x4F55;&#x9009;&#x62E9;source map&#x7684;&#x7C7B;&#x578B;">#</a></h3><ul><li>&#x9996;&#x5148;&#x5728;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x5217;&#x4FE1;&#x606F;&#x662F;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;&#xFF0C;&#x53EA;&#x8981;&#x6709;&#x884C;&#x4FE1;&#x606F;&#x5C31;&#x80FD;&#x5B8C;&#x6574;&#x7684;&#x5EFA;&#x7ACB;&#x6253;&#x5305;&#x524D;&#x540E;&#x4EE3;&#x7801;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x5F00;&#x53D1;&#x8FD8;&#x662F;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x90FD;&#x4F1A;&#x589E;&#x52A0;cheap&#x5C5E;&#x6027;&#x6765;&#x5FFD;&#x7565;&#x6A21;&#x5757;&#x6253;&#x5305;&#x540E;&#x7684;&#x5217;&#x4FE1;&#x606F;&#x5173;&#x8054;</li><li>&#x4E0D;&#x7BA1;&#x662F;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x8FD8;&#x662F;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x9700;&#x8981;&#x5B9A;&#x4F4D;debug&#x5230;&#x6700;&#x539F;&#x59CB;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x6BD4;&#x5982;&#x5B9A;&#x4F4D;&#x9519;&#x8BEF;&#x5230;jsx&#xFF0C;ts&#x7684;&#x539F;&#x59CB;&#x4EE3;&#x7801;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7ECF;&#x7F16;&#x8BD1;&#x540E;&#x7684;js&#x4EE3;&#x7801;&#x3002;&#x6240;&#x4EE5;&#x4E0D;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x6389;module&#x5C5E;&#x6027;</li><li>&#x9700;&#x8981;&#x751F;&#x6210;.map&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x5F97;&#x6709;source-map&#x5C5E;&#x6027;</li><li>&#x603B;&#x7ED3;<ul><li>&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x4F7F;&#x7528;&#xFF1A;cheap-module-eval-source-map</li><li>&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4F7F;&#x7528;&#xFF1A;cheap-module-source-map</li></ul></li></ul><h2 id="t437.&#x5982;&#x4F55;&#x5229;&#x7528;webpack&#x6765;&#x4F18;&#x5316;&#x524D;&#x7AEF;&#x6027;&#x80FD;?">7.&#x5982;&#x4F55;&#x5229;&#x7528;webpack&#x6765;&#x4F18;&#x5316;&#x524D;&#x7AEF;&#x6027;&#x80FD;? <a href="#t437.&#x5982;&#x4F55;&#x5229;&#x7528;webpack&#x6765;&#x4F18;&#x5316;&#x524D;&#x7AEF;&#x6027;&#x80FD;?">#</a></h2><h3 id="t447.1. &#x5B89;&#x88C5;">7.1. &#x5B89;&#x88C5; <a href="#t447.1. &#x5B89;&#x88C5;">#</a></h3><pre><code class="lang-js">cnpm i react react-dom  -S
cnpm install  webpack webpack-cli webpack-dev-server image-webpack-loader mini-css-extract-plugin purgecss-webpack-plugin babel-loader @babel/core @babel/preset-env @babel/preset-react terser-webpack-plugin html-webpack-plugin optimize-css-assets-webpack-plugin mini-css-extract-plugin qiniu -D
</code></pre><h3 id="t457.2.&#x538B;&#x7F29;JS">7.2.&#x538B;&#x7F29;JS <a href="#t457.2.&#x538B;&#x7F29;JS">#</a></h3><pre><code class="lang-diff">  optimization: {
    minimize: true,
    minimizer: [
      //&#x538B;&#x7F29;JS
<span class="hljs-addition">+     new TerserPlugin({})</span>
    ]
  },
</code></pre><h3 id="t467.3. &#x538B;&#x7F29;CSS">7.3. &#x538B;&#x7F29;CSS <a href="#t467.3. &#x538B;&#x7F29;CSS">#</a></h3><pre><code class="lang-diff">  optimization: {
    minimize: true,
    minimizer: [
      //&#x538B;&#x7F29;CSS
<span class="hljs-addition">+      new OptimizeCSSAssetsPlugin({}),</span>
    ]
  },
</code></pre><h3 id="t477.4. &#x538B;&#x7F29;&#x56FE;&#x7247;">7.4. &#x538B;&#x7F29;&#x56FE;&#x7247; <a href="#t477.4. &#x538B;&#x7F29;&#x56FE;&#x7247;">#</a></h3><pre><code class="lang-diff">      {
        test: /\.(png|svg|jpg|gif|jpeg|ico)$/,
        use: [
          &quot;file-loader&quot;,
          {
<span class="hljs-addition">+            loader: &quot;image-webpack-loader&quot;,</span>
<span class="hljs-addition">+            options: {</span>
<span class="hljs-addition">+              mozjpeg: {</span>
<span class="hljs-addition">+                progressive: true,</span>
<span class="hljs-addition">+                quality: 65,</span>
<span class="hljs-addition">+              },</span>
<span class="hljs-addition">+              optipng: {</span>
<span class="hljs-addition">+                enabled: false,</span>
<span class="hljs-addition">+              },</span>
<span class="hljs-addition">+              pngquant: {</span>
<span class="hljs-addition">+                quality: &quot;65-90&quot;,</span>
<span class="hljs-addition">+                speed: 4,</span>
<span class="hljs-addition">+              },</span>
<span class="hljs-addition">+              gifsicle: {</span>
<span class="hljs-addition">+                interlaced: false,</span>
<span class="hljs-addition">+              },</span>
<span class="hljs-addition">+              webp: {</span>
<span class="hljs-addition">+                quality: 75,</span>
<span class="hljs-addition">+              }</span>
<span class="hljs-addition">+            }</span>
<span class="hljs-addition">+          }</span>
        ]
      }
</code></pre><h3 id="t487.5. &#x6E05;&#x9664;&#x65E0;&#x7528;&#x7684;CSS">7.5. &#x6E05;&#x9664;&#x65E0;&#x7528;&#x7684;CSS <a href="#t487.5. &#x6E05;&#x9664;&#x65E0;&#x7528;&#x7684;CSS">#</a></h3><ul><li>&#x5355;&#x72EC;&#x63D0;&#x53D6;CSS&#x5E76;&#x6E05;&#x9664;&#x7528;&#x4E0D;&#x5230;&#x7684;CSS</li></ul><pre><code class="lang-diff">const path = require(&quot;path&quot;);
<span class="hljs-addition">+const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);</span>
<span class="hljs-addition">+const PurgecssPlugin = require(&quot;purgecss-webpack-plugin&quot;);</span>
module.exports = {
  module: {
    rules: [
       {
        test: /\.css$/,
        include: path.resolve(__dirname, &quot;src&quot;),
        exclude: /node_modules/,
        use: [
          {
<span class="hljs-addition">+            loader: MiniCssExtractPlugin.loader,</span>
          },
          &quot;css-loader&quot;,
        ],
      }
    ]
  },
  plugins: [
<span class="hljs-addition">+    new MiniCssExtractPlugin({</span>
<span class="hljs-addition">+      filename: &quot;[name].css&quot;,</span>
<span class="hljs-addition">+    }),</span>
<span class="hljs-addition">+    new PurgecssPlugin({</span>
<span class="hljs-addition">+      paths: glob.sync(`${PATHS.src}/**/*`,  { nodir: true }),</span>
<span class="hljs-addition">+    })</span>
  ]
  devServer: {},
};

</code></pre><h3 id="t497.6. Tree Shaking">7.6. Tree Shaking <a href="#t497.6. Tree Shaking">#</a></h3><ul><li>&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x53EA;&#x8981;&#x5176;&#x4E2D;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#xFF0C;&#x5219;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x88AB;&#x6253;&#x5230;bundle&#x91CC;&#x9762;&#x53BB;&#xFF0C;tree shaking&#x5C31;&#x662F;&#x53EA;&#x628A;&#x7528;&#x5230;&#x7684;&#x65B9;&#x6CD5;&#x6253;&#x5165;bundle,&#x6CA1;&#x7528;&#x5230;&#x7684;&#x65B9;&#x6CD5;&#x4F1A;uglify&#x9636;&#x6BB5;&#x64E6;&#x9664;&#x6389;</li><li>&#x539F;&#x7406;&#x662F;&#x5229;&#x7528;es6&#x6A21;&#x5757;&#x7684;&#x7279;&#x70B9;,&#x53EA;&#x80FD;&#x4F5C;&#x4E3A;&#x6A21;&#x5757;&#x9876;&#x5C42;&#x8BED;&#x53E5;&#x51FA;&#x73B0;,import&#x7684;&#x6A21;&#x5757;&#x540D;&#x53EA;&#x80FD;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;</li><li>webpack&#x9ED8;&#x8BA4;&#x652F;&#x6301;&#xFF0C;&#x5728;.babelrc&#x91CC;&#x8BBE;&#x7F6E;module:false&#x5373;&#x53EF;&#x5728;production mode&#x4E0B;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;</li></ul><pre><code class="lang-diff">module.exports = {
<span class="hljs-addition">+    mode:&apos;production&apos;,</span>
<span class="hljs-addition">+    devtool:false,</span>
     module: {
        rules: [
            {
                test: /\.js/,
                include: path.resolve(__dirname, &quot;src&quot;),
                use: [
                    {
                        loader: &quot;babel-loader&quot;,
                        options: {
<span class="hljs-addition">+                            presets: [[&quot;@babel/preset-env&quot;, { &quot;modules&quot;: false }]],</span>
                        },
                    },
                ],
            }
     }
}
</code></pre><h3 id="t507.7. Scope Hoisting">7.7. Scope Hoisting <a href="#t507.7. Scope Hoisting">#</a></h3><ul><li>Scope Hoisting &#x53EF;&#x4EE5;&#x8BA9; Webpack &#x6253;&#x5305;&#x51FA;&#x6765;&#x7684;&#x4EE3;&#x7801;&#x6587;&#x4EF6;&#x66F4;&#x5C0F;&#x3001;&#x8FD0;&#x884C;&#x7684;&#x66F4;&#x5FEB;&#xFF0C; &#x5B83;&#x53C8;&#x8BD1;&#x4F5C; &quot;&#x4F5C;&#x7528;&#x57DF;&#x63D0;&#x5347;&quot;&#xFF0C;&#x662F;&#x5728; Webpack3 &#x4E2D;&#x65B0;&#x63A8;&#x51FA;&#x7684;&#x529F;&#x80FD;&#x3002;</li><li>scope hoisting&#x7684;&#x539F;&#x7406;&#x662F;&#x5C06;&#x6240;&#x6709;&#x7684;&#x6A21;&#x5757;&#x6309;&#x7167;&#x5F15;&#x7528;&#x987A;&#x5E8F;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4F5C;&#x7528;&#x57DF;&#x91CC;&#xFF0C;&#x7136;&#x540E;&#x9002;&#x5F53;&#x5730;&#x91CD;&#x547D;&#x540D;&#x4E00;&#x4E9B;&#x53D8;&#x91CF;&#x4EE5;&#x9632;&#x6B62;&#x547D;&#x540D;&#x51B2;&#x7A81;</li><li>&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x5728;mode&#x4E3A;<code>production</code>&#x4E0B;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;,&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x8981;&#x7528; <code>webpack.optimize.ModuleConcatenationPlugin</code>&#x63D2;&#x4EF6;</li></ul><p>hello.js</p><pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&apos;Hello&apos;</span>;
</code></pre><p>index.js</p><pre><code class="lang-js"><span class="hljs-keyword">import</span> str <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./hello.js&apos;</span>;
<span class="hljs-built_in">console</span>.log(str);
</code></pre><p>main.js</p><pre><code class="lang-js:">var hello = (&apos;hello&apos;);
console.log(hello);
</code></pre><h3 id="t517.8. &#x4EE3;&#x7801;&#x5206;&#x5272;">7.8. &#x4EE3;&#x7801;&#x5206;&#x5272; <a href="#t517.8. &#x4EE3;&#x7801;&#x5206;&#x5272;">#</a></h3><ul><li>&#x5BF9;&#x4E8E;&#x5927;&#x7684;Web&#x5E94;&#x7528;&#x6765;&#x8BB2;&#xFF0C;&#x5C06;&#x6240;&#x6709;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x663E;&#x7136;&#x662F;&#x4E0D;&#x591F;&#x6709;&#x6548;&#x7684;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5F53;&#x4F60;&#x7684;&#x67D0;&#x4E9B;&#x4EE3;&#x7801;&#x5757;&#x662F;&#x5728;&#x67D0;&#x4E9B;&#x7279;&#x6B8A;&#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x88AB;&#x7528;&#x5230;&#x3002;</li><li>webpack&#x6709;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x5C31;&#x662F;&#x5C06;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x5E93;&#x5206;&#x5272;&#x6210;chunks&#x8BED;&#x5757;&#xFF0C;&#x5F53;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x5230;&#x9700;&#x8981;&#x5B83;&#x4EEC;&#x7684;&#x65F6;&#x5019;&#x518D;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;</li></ul><h4 id="t527.8.1 &#x5165;&#x53E3;&#x70B9;&#x5206;&#x5272;">7.8.1 &#x5165;&#x53E3;&#x70B9;&#x5206;&#x5272; <a href="#t527.8.1 &#x5165;&#x53E3;&#x70B9;&#x5206;&#x5272;">#</a></h4><ul><li>Entry Points&#xFF1A;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x8BBE;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;</li><li>&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x95EE;&#x9898;<ul><li>&#x5982;&#x679C;&#x5165;&#x53E3; chunks &#x4E4B;&#x95F4;&#x5305;&#x542B;&#x91CD;&#x590D;&#x7684;&#x6A21;&#x5757;(lodash)&#xFF0C;&#x90A3;&#x4E9B;&#x91CD;&#x590D;&#x6A21;&#x5757;&#x90FD;&#x4F1A;&#x88AB;&#x5F15;&#x5165;&#x5230;&#x5404;&#x4E2A; bundle &#x4E2D;</li><li>&#x4E0D;&#x591F;&#x7075;&#x6D3B;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x80FD;&#x5C06;&#x6838;&#x5FC3;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x903B;&#x8F91;&#x8FDB;&#x884C;&#x52A8;&#x6001;&#x62C6;&#x5206;&#x4EE3;&#x7801;</li></ul></li></ul><pre><code class="lang-js">entry: {
        <span class="hljs-attr">index</span>: <span class="hljs-string">&quot;./src/index.js&quot;</span>,
        <span class="hljs-attr">login</span>: <span class="hljs-string">&quot;./src/login.js&quot;</span>
}
</code></pre><h4 id="t537.8.2  &#x52A8;&#x6001;&#x5BFC;&#x5165;&#x548C;&#x61D2;&#x52A0;&#x8F7D;">7.8.2 &#x52A8;&#x6001;&#x5BFC;&#x5165;&#x548C;&#x61D2;&#x52A0;&#x8F7D; <a href="#t537.8.2  &#x52A8;&#x6001;&#x5BFC;&#x5165;&#x548C;&#x61D2;&#x52A0;&#x8F7D;">#</a></h4><ul><li>&#x7528;&#x6237;&#x5F53;&#x524D;&#x9700;&#x8981;&#x7528;&#x4EC0;&#x4E48;&#x529F;&#x80FD;&#x5C31;&#x53EA;&#x52A0;&#x8F7D;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x5BF9;&#x5E94;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684;&#x6309;&#x9700;&#x52A0;&#x8F7D; &#x5728;&#x7ED9;&#x5355;&#x9875;&#x5E94;&#x7528;&#x505A;&#x6309;&#x9700;&#x52A0;&#x8F7D;&#x4F18;&#x5316;&#x65F6;</li><li>&#x4E00;&#x822C;&#x91C7;&#x7528;&#x4EE5;&#x4E0B;&#x539F;&#x5219;&#xFF1A;<ul><li>&#x5BF9;&#x7F51;&#x7AD9;&#x529F;&#x80FD;&#x8FDB;&#x884C;&#x5212;&#x5206;&#xFF0C;&#x6BCF;&#x4E00;&#x7C7B;&#x4E00;&#x4E2A;chunk</li><li>&#x5BF9;&#x4E8E;&#x9996;&#x6B21;&#x6253;&#x5F00;&#x9875;&#x9762;&#x9700;&#x8981;&#x7684;&#x529F;&#x80FD;&#x76F4;&#x63A5;&#x52A0;&#x8F7D;&#xFF0C;&#x5C3D;&#x5FEB;&#x5C55;&#x793A;&#x7ED9;&#x7528;&#x6237;,&#x67D0;&#x4E9B;&#x4F9D;&#x8D56;&#x5927;&#x91CF;&#x4EE3;&#x7801;&#x7684;&#x529F;&#x80FD;&#x70B9;&#x53EF;&#x4EE5;&#x6309;&#x9700;&#x52A0;&#x8F7D;</li><li>&#x88AB;&#x5206;&#x5272;&#x51FA;&#x53BB;&#x7684;&#x4EE3;&#x7801;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x6309;&#x9700;&#x52A0;&#x8F7D;&#x7684;&#x65F6;&#x673A;</li></ul></li></ul><h5 id="t547.8.2.1 hello.js">7.8.2.1 hello.js <a href="#t547.8.2.1 hello.js">#</a></h5><p>hello.js</p><pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-string">&quot;hello&quot;</span>;
</code></pre><p>index.js</p><pre><code class="lang-js"><span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;#clickBtn&apos;</span>).addEventListener(<span class="hljs-string">&apos;click&apos;</span>,() =&gt; {
    <span class="hljs-keyword">import</span>(<span class="hljs-string">&apos;./hello&apos;</span>).then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-built_in">console</span>.log(result.default);
    });
});
</code></pre><p>index.html</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;clickBtn&quot;</span>&gt;</span>&#x70B9;&#x6211;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre><h5 id="t557.8.2.2 &#x6309;&#x9700;&#x52A0;&#x8F7D;">7.8.2.2 &#x6309;&#x9700;&#x52A0;&#x8F7D; <a href="#t557.8.2.2 &#x6309;&#x9700;&#x52A0;&#x8F7D;">#</a></h5><ul><li>&#x5982;&#x4F55;&#x5728;react&#x9879;&#x76EE;&#x4E2D;&#x5B9E;&#x73B0;&#x6309;&#x9700;&#x52A0;&#x8F7D;&#xFF1F;</li></ul><h6 id="t567.8.2.2.1 index.js">7.8.2.2.1 index.js <a href="#t567.8.2.2.1 index.js">#</a></h6><p>index.js</p><pre><code class="lang-js"><span class="hljs-keyword">import</span> React, { Component, Suspense } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom&quot;</span>;
<span class="hljs-keyword">import</span> Loading <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Loading&quot;</span>;
<span class="hljs-comment">/* function lazy(loadFunction) {
  return class LazyComponent extends React.Component {
    state = { Comp: null };
    componentDidMount() {
      loadFunction().then((result) =&gt; {
        this.setState({ Comp: result.default });
      });
    }
    render() {
      let Comp = this.state.Comp;
      return Comp ? &lt;Comp {...this.props} /&gt; : null;
    }
  };
} */</span>
<span class="hljs-keyword">const</span> AppTitle = React.lazy(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span>
  <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;title&quot; */</span> <span class="hljs-string">&quot;./components/Title&quot;</span>)
);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(){
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>.state = {<span class="hljs-attr">visible</span>:<span class="hljs-literal">false</span>};
  }
  show(){
    <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">visible</span>: <span class="hljs-literal">true</span> });
  };
  render() {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        {this.state.visible &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Loading</span> /&gt;</span>}&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">AppTitle</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
        )}
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.show.bind(this)}</span>&gt;</span>&#x52A0;&#x8F7D;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/&gt;</span></span>
    );
  }
}
ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;#root&quot;</span>));

</code></pre><h6 id="t577.8.2.2.2 Loading.js">7.8.2.2.2 Loading.js <a href="#t577.8.2.2.2 Loading.js">#</a></h6><p>src\components\Loading.js</p><pre><code class="lang-js"><span class="hljs-keyword">import</span> React, { Component, Suspense } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (props) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
};
</code></pre><h6 id="t587.8.2.2.3 Title.js">7.8.2.2.3 Title.js <a href="#t587.8.2.2.3 Title.js">#</a></h6><p>src\components\Title.js</p><pre><code class="lang-js"><span class="hljs-keyword">import</span> React, { Component, Suspense } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> props=&gt;{
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
}
</code></pre><h4 id="t597.8.3 preload(&#x9884;&#x5148;&#x52A0;&#x8F7D;)">7.8.3 preload(&#x9884;&#x5148;&#x52A0;&#x8F7D;) <a href="#t597.8.3 preload(&#x9884;&#x5148;&#x52A0;&#x8F7D;)">#</a></h4><ul><li>preload&#x901A;&#x5E38;&#x7528;&#x4E8E;&#x672C;&#x9875;&#x9762;&#x8981;&#x7528;&#x5230;&#x7684;&#x5173;&#x952E;&#x8D44;&#x6E90;&#xFF0C;&#x5305;&#x62EC;&#x5173;&#x952E;js&#x3001;&#x5B57;&#x4F53;&#x3001;css&#x6587;&#x4EF6;</li><li>preload&#x5C06;&#x4F1A;&#x628A;&#x8D44;&#x6E90;&#x5F97;&#x4E0B;&#x8F7D;&#x987A;&#x5E8F;&#x6743;&#x91CD;&#x63D0;&#x9AD8;&#xFF0C;&#x4F7F;&#x5F97;&#x5173;&#x952E;&#x6570;&#x636E;&#x63D0;&#x524D;&#x4E0B;&#x8F7D;&#x597D;,&#x4F18;&#x5316;&#x9875;&#x9762;&#x6253;&#x5F00;&#x901F;&#x5EA6;</li><li>&#x5728;&#x8D44;&#x6E90;&#x4E0A;&#x6DFB;&#x52A0;&#x9884;&#x5148;&#x52A0;&#x8F7D;&#x7684;&#x6CE8;&#x91CA;&#xFF0C;&#x4F60;&#x6307;&#x660E;&#x8BE5;&#x6A21;&#x5757;&#x9700;&#x8981;&#x7ACB;&#x5373;&#x88AB;&#x4F7F;&#x7528;</li><li>&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x7684;&#x52A0;&#x8F7D;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x88AB;&#x5206;&#x4E3A;&#x4E94;&#x4E2A;&#x7EA7;&#x522B;,&#x5206;&#x522B;&#x662F;<ul><li>Highest &#x6700;&#x9AD8;</li><li>High &#x9AD8;</li><li>Medium &#x4E2D;&#x7B49;</li><li>Low &#x4F4E;</li><li>Lowest &#x6700;&#x4F4E;</li></ul></li><li>&#x5F02;&#x6B65;/&#x5EF6;&#x8FDF;/&#x63D2;&#x5165;&#x7684;&#x811A;&#x672C;&#xFF08;&#x65E0;&#x8BBA;&#x5728;&#x4EC0;&#x4E48;&#x4F4D;&#x7F6E;&#xFF09;&#x5728;&#x7F51;&#x7EDC;&#x4F18;&#x5148;&#x7EA7;&#x4E2D;&#x662F; <code>Low</code></li></ul><p><img src="../static/zhufengImg/prefetchpreload.png" alt="prefetchpreload"></p><pre><code class="lang-js">&lt;link rel=<span class="hljs-string">&quot;preload&quot;</span> <span class="hljs-keyword">as</span>=<span class="hljs-string">&quot;script&quot;</span> href=<span class="hljs-string">&quot;utils.js&quot;</span>&gt;
</code></pre><pre><code class="lang-js"><span class="hljs-keyword">import</span>(
  <span class="hljs-string">`./utils.js`</span>
  <span class="hljs-comment">/* webpackPreload: true */</span>
  <span class="hljs-comment">/* webpackChunkName: &quot;utils&quot; */</span>
)
</code></pre><h4 id="t607.8.4 prefetch(&#x9884;&#x5148;&#x62C9;&#x53D6;)">7.8.4 prefetch(&#x9884;&#x5148;&#x62C9;&#x53D6;) <a href="#t607.8.4 prefetch(&#x9884;&#x5148;&#x62C9;&#x53D6;)">#</a></h4><ul><li>prefetch &#x8DDF; preload &#x4E0D;&#x540C;&#xFF0C;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x544A;&#x8BC9;&#x6D4F;&#x89C8;&#x5668;&#x672A;&#x6765;&#x53EF;&#x80FD;&#x4F1A;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x67D0;&#x4E2A;&#x8D44;&#x6E90;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5C31;&#x4F1A;&#x5728;&#x95F2;&#x65F6;&#x53BB;&#x52A0;&#x8F7D;&#x5BF9;&#x5E94;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x82E5;&#x80FD;&#x9884;&#x6D4B;&#x5230;&#x7528;&#x6237;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x6BD4;&#x5982;&#x61D2;&#x52A0;&#x8F7D;&#xFF0C;&#x70B9;&#x51FB;&#x5230;&#x5176;&#x5B83;&#x9875;&#x9762;&#x7B49;&#x5219;&#x76F8;&#x5F53;&#x4E8E;&#x63D0;&#x524D;&#x9884;&#x52A0;&#x8F7D;&#x4E86;&#x9700;&#x8981;&#x7684;&#x8D44;&#x6E90;</li></ul><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;prefetch&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;utils.js&quot;</span> <span class="hljs-attr">as</span>=<span class="hljs-string">&quot;script&quot;</span>&gt;</span>
</code></pre><pre><code class="lang-js">button.addEventListener(<span class="hljs-string">&apos;click&apos;</span>, () =&gt; {
  <span class="hljs-keyword">import</span>(
    <span class="hljs-string">`./utils.js`</span>
    <span class="hljs-comment">/* webpackPrefetch: true */</span>
    <span class="hljs-comment">/* webpackChunkName: &quot;utils&quot; */</span>
  ).then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
    result.default.log(<span class="hljs-string">&apos;hello&apos;</span>);
  })
});

</code></pre><h4 id="t617.8.5 preload vs prefetch">7.8.5 preload vs prefetch <a href="#t617.8.5 preload vs prefetch">#</a></h4><ul><li>preload &#x662F;&#x544A;&#x8BC9;&#x6D4F;&#x89C8;&#x5668;&#x9875;&#x9762;&#x5FC5;&#x5B9A;&#x9700;&#x8981;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4E00;&#x5B9A;&#x4F1A;&#x52A0;&#x8F7D;&#x8FD9;&#x4E9B;&#x8D44;&#x6E90;</li><li>&#x800C; prefetch &#x662F;&#x544A;&#x8BC9;&#x6D4F;&#x89C8;&#x5668;&#x9875;&#x9762;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x4E00;&#x5B9A;&#x4F1A;&#x52A0;&#x8F7D;&#x8FD9;&#x4E9B;&#x8D44;&#x6E90;</li><li>&#x6240;&#x4EE5;&#x5EFA;&#x8BAE;&#xFF1A;&#x5BF9;&#x4E8E;&#x5F53;&#x524D;&#x9875;&#x9762;&#x5F88;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x8D44;&#x6E90;&#x4F7F;&#x7528; preload,&#x5BF9;&#x4E8E;&#x53EF;&#x80FD;&#x5728;&#x5C06;&#x6765;&#x7684;&#x9875;&#x9762;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x4F7F;&#x7528; prefetch</li></ul><h4 id="t627.8.6 &#x63D0;&#x53D6;&#x516C;&#x5171;&#x4EE3;&#x7801;">7.8.6 &#x63D0;&#x53D6;&#x516C;&#x5171;&#x4EE3;&#x7801; <a href="#t627.8.6 &#x63D0;&#x53D6;&#x516C;&#x5171;&#x4EE3;&#x7801;">#</a></h4><ul><li>&#x600E;&#x4E48;&#x914D;&#x7F6E;&#x5355;&#x9875;&#x5E94;&#x7528;?&#x600E;&#x4E48;&#x914D;&#x7F6E;&#x591A;&#x9875;&#x5E94;&#x7528;?<h5 id="t637.8.6.1 &#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x63D0;&#x53D6;&#x516C;&#x5171;&#x4EE3;&#x7801;">7.8.6.1 &#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x63D0;&#x53D6;&#x516C;&#x5171;&#x4EE3;&#x7801; <a href="#t637.8.6.1 &#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x63D0;&#x53D6;&#x516C;&#x5171;&#x4EE3;&#x7801;">#</a></h5></li><li>&#x5927;&#x7F51;&#x7AD9;&#x6709;&#x591A;&#x4E2A;&#x9875;&#x9762;&#xFF0C;&#x6BCF;&#x4E2A;&#x9875;&#x9762;&#x7531;&#x4E8E;&#x91C7;&#x7528;&#x76F8;&#x540C;&#x6280;&#x672F;&#x6808;&#x548C;&#x6837;&#x5F0F;&#x4EE3;&#x7801;&#xFF0C;&#x4F1A;&#x5305;&#x542B;&#x5F88;&#x591A;&#x516C;&#x5171;&#x4EE3;&#x7801;&#xFF0C;&#x5982;&#x679C;&#x90FD;&#x5305;&#x542B;&#x8FDB;&#x6765;&#x4F1A;&#x6709;&#x95EE;&#x9898;</li><li>&#x76F8;&#x540C;&#x7684;&#x8D44;&#x6E90;&#x88AB;&#x91CD;&#x590D;&#x7684;&#x52A0;&#x8F7D;&#xFF0C;&#x6D6A;&#x8D39;&#x7528;&#x6237;&#x7684;&#x6D41;&#x91CF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6210;&#x672C;&#xFF1B;</li><li>&#x6BCF;&#x4E2A;&#x9875;&#x9762;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x7684;&#x8D44;&#x6E90;&#x592A;&#x5927;&#xFF0C;&#x5BFC;&#x81F4;&#x7F51;&#x9875;&#x9996;&#x5C4F;&#x52A0;&#x8F7D;&#x7F13;&#x6162;&#xFF0C;&#x5F71;&#x54CD;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</li><li>&#x5982;&#x679C;&#x80FD;&#x628A;&#x516C;&#x5171;&#x4EE3;&#x7801;&#x62BD;&#x79BB;&#x6210;&#x5355;&#x72EC;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#x80FD;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF0C;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x6D41;&#x91CF;&#xFF0C;&#x964D;&#x4F4E;&#x670D;&#x52A1;&#x5668;&#x6210;&#x672C;</li></ul><h5 id="t647.8.6.2 &#x5982;&#x4F55;&#x63D0;&#x53D6;">7.8.6.2 &#x5982;&#x4F55;&#x63D0;&#x53D6; <a href="#t647.8.6.2 &#x5982;&#x4F55;&#x63D0;&#x53D6;">#</a></h5><ul><li>&#x57FA;&#x7840;&#x7C7B;&#x5E93;&#xFF0C;&#x65B9;&#x4FBF;&#x957F;&#x671F;&#x7F13;&#x5B58;</li><li>&#x9875;&#x9762;&#x4E4B;&#x95F4;&#x7684;&#x516C;&#x7528;&#x4EE3;&#x7801;</li><li>&#x5404;&#x4E2A;&#x9875;&#x9762;&#x5355;&#x72EC;&#x751F;&#x6210;&#x6587;&#x4EF6;</li></ul><h5 id="t657.8.6.3 splitChunks">7.8.6.3 splitChunks <a href="#t657.8.6.3 splitChunks">#</a></h5><h5 id="t667.8.6.3.1 module chunk  bundle">7.8.6.3.1 module chunk bundle <a href="#t667.8.6.3.1 module chunk  bundle">#</a></h5><ul><li>module&#xFF1A;&#x5C31;&#x662F;js&#x7684;&#x6A21;&#x5757;&#x5316;webpack&#x652F;&#x6301;commonJS&#x3001;ES6&#x7B49;&#x6A21;&#x5757;&#x5316;&#x89C4;&#x8303;&#xFF0C;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x4F60;&#x901A;&#x8FC7;import&#x8BED;&#x53E5;&#x5F15;&#x5165;&#x7684;&#x4EE3;&#x7801;</li><li>chunk: chunk&#x662F;webpack&#x6839;&#x636E;&#x529F;&#x80FD;&#x62C6;&#x5206;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x5305;&#x542B;&#x4E09;&#x79CD;&#x60C5;&#x51B5;<ul><li>&#x4F60;&#x7684;&#x9879;&#x76EE;&#x5165;&#x53E3;&#xFF08;entry&#xFF09;</li><li>&#x901A;&#x8FC7;import()&#x52A8;&#x6001;&#x5F15;&#x5165;&#x7684;&#x4EE3;&#x7801;</li><li>&#x901A;&#x8FC7;splitChunks&#x62C6;&#x5206;&#x51FA;&#x6765;&#x7684;&#x4EE3;&#x7801;</li></ul></li><li>bundle&#xFF1A;bundle&#x662F;webpack&#x6253;&#x5305;&#x4E4B;&#x540E;&#x7684;&#x5404;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x822C;&#x5C31;&#x662F;&#x548C;chunk&#x662F;&#x4E00;&#x5BF9;&#x4E00;&#x7684;&#x5173;&#x7CFB;&#xFF0C;bundle&#x5C31;&#x662F;&#x5BF9;chunk&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#x538B;&#x7F29;&#x6253;&#x5305;&#x7B49;&#x5904;&#x7406;&#x4E4B;&#x540E;&#x7684;&#x4EA7;&#x51FA;</li></ul><h5 id="t677.8.6.3.2  &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;">7.8.6.3.2 &#x9ED8;&#x8BA4;&#x914D;&#x7F6E; <a href="#t677.8.6.3.2  &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;">#</a></h5><p>webpack.config.js</p><pre><code class="lang-js">  entry: {
    <span class="hljs-attr">page1</span>: <span class="hljs-string">&quot;./src/page1.js&quot;</span>,
    <span class="hljs-attr">page2</span>: <span class="hljs-string">&quot;./src/page2.js&quot;</span>,
    <span class="hljs-attr">page3</span>: <span class="hljs-string">&quot;./src/page3.js&quot;</span>,
  },
 <span class="hljs-attr">optimization</span>: {
  <span class="hljs-attr">splitChunks</span>: {
      <span class="hljs-attr">chunks</span>: <span class="hljs-string">&quot;all&quot;</span>, <span class="hljs-comment">//&#x9ED8;&#x8BA4;&#x4F5C;&#x7528;&#x4E8E;&#x5F02;&#x6B65;chunk&#xFF0C;&#x503C;&#x4E3A;all/initial/async</span>
      <span class="hljs-attr">minSize</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">//&#x9ED8;&#x8BA4;&#x503C;&#x662F;30kb,&#x4EE3;&#x7801;&#x5757;&#x7684;&#x6700;&#x5C0F;&#x5C3A;&#x5BF8;</span>
      <span class="hljs-attr">minChunks</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">//&#x88AB;&#x591A;&#x5C11;&#x6A21;&#x5757;&#x5171;&#x4EAB;,&#x5728;&#x5206;&#x5272;&#x4E4B;&#x524D;&#x6A21;&#x5757;&#x7684;&#x88AB;&#x5F15;&#x7528;&#x6B21;&#x6570;</span>
      <span class="hljs-attr">maxAsyncRequests</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">//&#x9650;&#x5236;&#x5F02;&#x6B65;&#x6A21;&#x5757;&#x5185;&#x90E8;&#x7684;&#x5E76;&#x884C;&#x6700;&#x5927;&#x8BF7;&#x6C42;&#x6570;&#x7684;&#xFF0C;&#x8BF4;&#x767D;&#x4E86;&#x4F60;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x662F;&#x6BCF;&#x4E2A;import()&#x5B83;&#x91CC;&#x9762;&#x7684;&#x6700;&#x5927;&#x5E76;&#x884C;&#x8BF7;&#x6C42;&#x6570;&#x91CF;</span>
      <span class="hljs-attr">maxInitialRequests</span>: <span class="hljs-number">4</span>, <span class="hljs-comment">//&#x9650;&#x5236;&#x5165;&#x53E3;&#x7684;&#x62C6;&#x5206;&#x6570;&#x91CF;</span>
      <span class="hljs-attr">name</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//&#x6253;&#x5305;&#x540E;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;chunk&#x7684;&#x540D;&#x5B57;&#x901A;&#x8FC7;&#x5206;&#x9694;&#x7B26;&#xFF08;&#x9ED8;&#x8BA4;&#x662F;&#xFF5E;&#xFF09;&#x5206;&#x9694;&#x5F00;&#xFF0C;&#x5982;vendor~</span>
      <span class="hljs-attr">automaticNameDelimiter</span>: <span class="hljs-string">&quot;~&quot;</span>, <span class="hljs-comment">//&#x9ED8;&#x8BA4;webpack&#x5C06;&#x4F1A;&#x4F7F;&#x7528;&#x5165;&#x53E3;&#x540D;&#x548C;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x540D;&#x79F0;&#x751F;&#x6210;&#x547D;&#x540D;,&#x6BD4;&#x5982; &apos;vendors~main.js&apos;</span>
      <span class="hljs-attr">cacheGroups</span>: {
        <span class="hljs-comment">//&#x8BBE;&#x7F6E;&#x7F13;&#x5B58;&#x7EC4;&#x7528;&#x6765;&#x62BD;&#x53D6;&#x6EE1;&#x8DB3;&#x4E0D;&#x540C;&#x89C4;&#x5219;&#x7684;chunk,&#x4E0B;&#x9762;&#x4EE5;&#x751F;&#x6210;common&#x4E3A;&#x4F8B;</span>
        <span class="hljs-attr">vendors</span>: {
          <span class="hljs-attr">chunks</span>: <span class="hljs-string">&quot;all&quot;</span>,
          <span class="hljs-attr">test</span>: <span class="hljs-regexp">/node_modules/</span>, <span class="hljs-comment">//&#x6761;&#x4EF6;</span>
          <span class="hljs-attr">priority</span>: <span class="hljs-number">-10</span>, <span class="hljs-comment">///&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x4E00;&#x4E2A;chunk&#x5F88;&#x53EF;&#x80FD;&#x6EE1;&#x8DB3;&#x591A;&#x4E2A;&#x7F13;&#x5B58;&#x7EC4;&#xFF0C;&#x4F1A;&#x88AB;&#x62BD;&#x53D6;&#x5230;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x7684;&#x7F13;&#x5B58;&#x7EC4;&#x4E2D;,&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x8BA9;&#x81EA;&#x5B9A;&#x4E49;&#x7F13;&#x5B58;&#x7EC4;&#x6709;&#x66F4;&#x9AD8;&#x7684;&#x4F18;&#x5148;&#x7EA7;(&#x9ED8;&#x8BA4;0),&#x9ED8;&#x8BA4;&#x7F13;&#x5B58;&#x7EC4;&#x7684;priority&#x5C5E;&#x6027;&#x4E3A;&#x8D1F;&#x503C;.</span>
        },
        <span class="hljs-attr">commons</span>: {
          <span class="hljs-attr">chunks</span>: <span class="hljs-string">&quot;all&quot;</span>,
          <span class="hljs-attr">minSize</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">//&#x6700;&#x5C0F;&#x63D0;&#x53D6;&#x5B57;&#x8282;&#x6570;</span>
          <span class="hljs-attr">minChunks</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">//&#x6700;&#x5C11;&#x88AB;&#x51E0;&#x4E2A;chunk&#x5F15;&#x7528;</span>
          <span class="hljs-attr">priority</span>: <span class="hljs-number">-20</span>
        }
      }
    }
</code></pre><p>src\page1.js</p><pre><code class="lang-js"><span class="hljs-keyword">import</span> utils1 <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./module1&quot;</span>;
<span class="hljs-keyword">import</span> utils2 <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./module2&quot;</span>;
<span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;jquery&quot;</span>;
<span class="hljs-built_in">console</span>.log(utils1, utils2, $);
<span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;asyncModule1&quot; */</span> <span class="hljs-string">&quot;./asyncModule1&quot;</span>);
</code></pre><p>src\page2.js</p><pre><code class="lang-js"><span class="hljs-keyword">import</span> utils1 <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./module1&quot;</span>;
<span class="hljs-keyword">import</span> utils2 <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./module2&quot;</span>;
<span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;jquery&quot;</span>;
<span class="hljs-built_in">console</span>.log(utils1, utils2, $);
</code></pre><p>src\page3.js</p><pre><code class="lang-js"><span class="hljs-keyword">import</span> utils1 <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./module1&quot;</span>;
<span class="hljs-keyword">import</span> utils3 <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./module3&quot;</span>;
<span class="hljs-keyword">import</span> $ <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;jquery&quot;</span>;
<span class="hljs-built_in">console</span>.log(utils1, utils3, $);
</code></pre><p>src\module1.js</p><pre><code class="lang-js"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;module1&quot;</span>);
</code></pre><p>src\module2.js</p><pre><code class="lang-js"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;module2&quot;</span>);
</code></pre><p>src\module3.js</p><pre><code class="lang-js"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;module3&quot;</span>);
</code></pre><p>src\asyncModule1.js</p><pre><code class="lang-js"><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;lodash&apos;</span>;
<span class="hljs-built_in">console</span>.log(_);
</code></pre><pre><code class="lang-js">                             Asset       Size                     Chunks             Chunk Names
             asyncModule1.chunk.js  <span class="hljs-number">740</span> bytes               asyncModule1  [emitted]  asyncModule1
                        index.html  <span class="hljs-number">498</span> bytes                             [emitted]
                          page1.js   <span class="hljs-number">10.6</span> KiB                      page1  [emitted]  page1
              page1~page2.chunk.js  <span class="hljs-number">302</span> bytes                page1~page2  [emitted]  page1~page2
        page1~page2~page3.chunk.js  <span class="hljs-number">308</span> bytes          page1~page2~page3  [emitted]  page1~page2~page3
                          page2.js   <span class="hljs-number">7.52</span> KiB                      page2  [emitted]  page2
                          page3.js   <span class="hljs-number">7.72</span> KiB                      page3  [emitted]  page3
     vendors~asyncModule1.chunk.js    <span class="hljs-number">532</span> KiB       vendors~asyncModule1  [emitted]  vendors~asyncModule1
vendors~page1~page2~page3.chunk.js    <span class="hljs-number">282</span> KiB  vendors~page1~page2~page3  [emitted]  vendors~page1~page2~page3
Entrypoint page1 = vendors~page1~page2~page3.chunk.js page1~page2~page3.chunk.js page1~page2.chunk.js page1.js
Entrypoint page2 = vendors~page1~page2~page3.chunk.js page1~page2~page3.chunk.js page1~page2.chunk.js page2.js
Entrypoint page3 = vendors~page1~page2~page3.chunk.js page1~page2~page3.chunk.js page3.js
</code></pre><p><img src="../static/zhufengImg/splitChunks.jpg" alt="splitChunks"></p><h3 id="t687.9 CDN">7.9 CDN <a href="#t687.9 CDN">#</a></h3><ul><li>&#x6700;&#x5F71;&#x54CD;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x7684;&#x662F;&#x7F51;&#x9875;&#x9996;&#x6B21;&#x6253;&#x5F00;&#x65F6;&#x7684;&#x52A0;&#x8F7D;&#x7B49;&#x5F85;&#x3002; &#x5BFC;&#x81F4;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x6839;&#x672C;&#x662F;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x8FC7;&#x7A0B;&#x8017;&#x65F6;&#x5927;&#xFF0C;CDN&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x52A0;&#x901F;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x3002;</li><li>CDN &#x53C8;&#x53EB;&#x5185;&#x5BB9;&#x5206;&#x53D1;&#x7F51;&#x7EDC;&#xFF0C;&#x901A;&#x8FC7;&#x628A;&#x8D44;&#x6E90;&#x90E8;&#x7F72;&#x5230;&#x4E16;&#x754C;&#x5404;&#x5730;&#xFF0C;&#x7528;&#x6237;&#x5728;&#x8BBF;&#x95EE;&#x65F6;&#x6309;&#x7167;&#x5C31;&#x8FD1;&#x539F;&#x5219;&#x4ECE;&#x79BB;&#x7528;&#x6237;&#x6700;&#x8FD1;&#x7684;&#x670D;&#x52A1;&#x5668;&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#xFF0C;&#x4ECE;&#x800C;&#x52A0;&#x901F;&#x8D44;&#x6E90;&#x7684;&#x83B7;&#x53D6;&#x901F;&#x5EA6;</li><li>&#x7528;&#x6237;&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x7B2C;&#x4E00;&#x6B21;&#x8BBF;&#x95EE;&#x6211;&#x4EEC;&#x7684;&#x7AD9;&#x70B9;&#x65F6;&#xFF0C;&#x8BE5;&#x9875;&#x9762;&#x5F15;&#x5165;&#x4E86;&#x5404;&#x5F0F;&#x5404;&#x6837;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x80FD;&#x505A;&#x5230;&#x6301;&#x4E45;&#x5316;&#x7F13;&#x5B58;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x5728; http &#x54CD;&#x5E94;&#x5934;&#x52A0;&#x4E0A; Cache-control &#x6216; Expires &#x5B57;&#x6BB5;&#x6765;&#x8BBE;&#x7F6E;&#x7F13;&#x5B58;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x8D44;&#x6E90;&#x4E00;&#x4E00;&#x7F13;&#x5B58;&#x5230;&#x672C;&#x5730;</li><li>&#x7528;&#x6237;&#x5728;&#x540E;&#x7EED;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x518D;&#x6B21;&#x8BF7;&#x6C42;&#x540C;&#x6837;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x4E14;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6CA1;&#x6709;&#x8FC7;&#x671F;&#xFF0C;&#x90A3;&#x4E48;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8D70;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x800C;&#x4E0D;&#x7528;&#x518D;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x8D44;&#x6E90;</li><li>&#x7F13;&#x5B58;&#x914D;&#x7F6E;<ul><li>HTML&#x6587;&#x4EF6;&#x4E0D;&#x7F13;&#x5B58;&#xFF0C;&#x653E;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x5173;&#x95ED;&#x81EA;&#x5DF1;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x7684;URL&#x53D8;&#x6210;&#x6307;&#x5411;CDN&#x670D;&#x52A1;&#x5668;&#x7684;&#x5730;&#x5740;</li><li>&#x9759;&#x6001;&#x7684;JavaScript&#x3001;CSS&#x3001;&#x56FE;&#x7247;&#x7B49;&#x6587;&#x4EF6;&#x5F00;&#x542F;CDN&#x548C;&#x7F13;&#x5B58;&#xFF0C;&#x5E76;&#x4E14;&#x6587;&#x4EF6;&#x540D;&#x5E26;&#x4E0A;HASH&#x503C;</li><li>&#x4E3A;&#x4E86;&#x5E76;&#x884C;&#x52A0;&#x8F7D;&#x4E0D;&#x963B;&#x585E;&#xFF0C;&#x628A;&#x4E0D;&#x540C;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x5206;&#x914D;&#x5230;&#x4E0D;&#x540C;&#x7684;CDN&#x670D;&#x52A1;&#x5668;&#x4E0A;</li></ul></li><li>&#x57DF;&#x540D;&#x9650;&#x5236;<ul><li>&#x540C;&#x4E00;&#x65F6;&#x523B;&#x9488;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x57DF;&#x540D;&#x7684;&#x8D44;&#x6E90;&#x5E76;&#x884C;&#x8BF7;&#x6C42;&#x662F;&#x6709;&#x9650;&#x5236;</li><li>&#x53EF;&#x4EE5;&#x628A;&#x8FD9;&#x4E9B;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x5206;&#x6563;&#x5230;&#x4E0D;&#x540C;&#x7684; CDN &#x670D;&#x52A1;&#x4E0A;&#x53BB;</li><li>&#x591A;&#x4E2A;&#x57DF;&#x540D;&#x540E;&#x4F1A;&#x589E;&#x52A0;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x65F6;&#x95F4;</li><li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5728; HTML HEAD &#x6807;&#x7B7E;&#x4E2D; &#x52A0;&#x5165;<link rel="dns-prefetch" href="http://img.zhufengpeixun.cn">&#x53BB;&#x9884;&#x89E3;&#x6790;&#x57DF;&#x540D;&#xFF0C;&#x4EE5;&#x964D;&#x4F4E;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5E26;&#x6765;&#x7684;&#x5EF6;&#x8FDF;</li></ul></li></ul><h4 id="t697.9.1 webpack.config.js">7.9.1 webpack.config.js <a href="#t697.9.1 webpack.config.js">#</a></h4><pre><code class="lang-diff">const path = require(&quot;path&quot;);
const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);
const PurgecssPlugin = require(&quot;purgecss-webpack-plugin&quot;);
const TerserPlugin = require(&quot;terser-webpack-plugin&quot;);
const OptimizeCSSAssetsPlugin = require(&quot;optimize-css-assets-webpack-plugin&quot;);
const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);
const UploadPlugin = require(&quot;./plugins/UploadPlugin&quot;);
const glob = require(&quot;glob&quot;);
const PATHS = {
    src: path.join(__dirname, &quot;src&quot;),
};
module.exports = {
  mode: &quot;development&quot;,
  devtool: false,
  context: process.cwd(),
  entry: {
    main: &quot;./src/index.js&quot;,
  },
  output: {
    path: path.resolve(__dirname, &quot;dist&quot;),
<span class="hljs-addition">+    filename: &quot;[name].[hash].js&quot;,</span>
<span class="hljs-addition">+    chunkFilename: &quot;[name].[hash].chunk.js&quot;,</span>
<span class="hljs-addition">+    publicPath: &quot;http://img.zhufengpeixun.cn/&quot;,</span>
  },
  optimization: {
    minimize: true,
    minimizer: [
      //&#x538B;&#x7F29;JS
      /* new TerserPlugin({
        sourceMap: false,
        extractComments: false,
      }),
      //&#x538B;&#x7F29;CSS
      new OptimizeCSSAssetsPlugin({}), */
    ],
    //&#x81EA;&#x52A8;&#x5206;&#x5272;&#x7B2C;&#x4E09;&#x65B9;&#x6A21;&#x5757;&#x548C;&#x516C;&#x5171;&#x6A21;&#x5757;
    splitChunks: {
      chunks: &quot;all&quot;, //&#x9ED8;&#x8BA4;&#x4F5C;&#x7528;&#x4E8E;&#x5F02;&#x6B65;chunk&#xFF0C;&#x503C;&#x4E3A;all/initial/async
      minSize: 0, //&#x9ED8;&#x8BA4;&#x503C;&#x662F;30kb,&#x4EE3;&#x7801;&#x5757;&#x7684;&#x6700;&#x5C0F;&#x5C3A;&#x5BF8;
      minChunks: 1, //&#x88AB;&#x591A;&#x5C11;&#x6A21;&#x5757;&#x5171;&#x4EAB;,&#x5728;&#x5206;&#x5272;&#x4E4B;&#x524D;&#x6A21;&#x5757;&#x7684;&#x88AB;&#x5F15;&#x7528;&#x6B21;&#x6570;
      maxAsyncRequests: 2, //&#x9650;&#x5236;&#x5F02;&#x6B65;&#x6A21;&#x5757;&#x5185;&#x90E8;&#x7684;&#x5E76;&#x884C;&#x6700;&#x5927;&#x8BF7;&#x6C42;&#x6570;&#x7684;&#xFF0C;&#x8BF4;&#x767D;&#x4E86;&#x4F60;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x662F;&#x6BCF;&#x4E2A;import()&#x5B83;&#x91CC;&#x9762;&#x7684;&#x6700;&#x5927;&#x5E76;&#x884C;&#x8BF7;&#x6C42;&#x6570;&#x91CF;
      maxInitialRequests: 4, //&#x9650;&#x5236;&#x5165;&#x53E3;&#x7684;&#x62C6;&#x5206;&#x6570;&#x91CF;
      name: true, //&#x6253;&#x5305;&#x540E;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;chunk&#x7684;&#x540D;&#x5B57;&#x901A;&#x8FC7;&#x5206;&#x9694;&#x7B26;&#xFF08;&#x9ED8;&#x8BA4;&#x662F;&#xFF5E;&#xFF09;&#x5206;&#x9694;&#x5F00;&#xFF0C;&#x5982;vendor~
      automaticNameDelimiter: &quot;~&quot;, //&#x9ED8;&#x8BA4;webpack&#x5C06;&#x4F1A;&#x4F7F;&#x7528;&#x5165;&#x53E3;&#x540D;&#x548C;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x540D;&#x79F0;&#x751F;&#x6210;&#x547D;&#x540D;,&#x6BD4;&#x5982; &apos;vendors~main.js&apos;
      cacheGroups: {
        //&#x8BBE;&#x7F6E;&#x7F13;&#x5B58;&#x7EC4;&#x7528;&#x6765;&#x62BD;&#x53D6;&#x6EE1;&#x8DB3;&#x4E0D;&#x540C;&#x89C4;&#x5219;&#x7684;chunk,&#x4E0B;&#x9762;&#x4EE5;&#x751F;&#x6210;common&#x4E3A;&#x4F8B;
        vendors: {
          chunks: &quot;all&quot;,
          test: /node_modules/, //&#x6761;&#x4EF6;
          priority: -10, ///&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x4E00;&#x4E2A;chunk&#x5F88;&#x53EF;&#x80FD;&#x6EE1;&#x8DB3;&#x591A;&#x4E2A;&#x7F13;&#x5B58;&#x7EC4;&#xFF0C;&#x4F1A;&#x88AB;&#x62BD;&#x53D6;&#x5230;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x7684;&#x7F13;&#x5B58;&#x7EC4;&#x4E2D;,&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x8BA9;&#x81EA;&#x5B9A;&#x4E49;&#x7F13;&#x5B58;&#x7EC4;&#x6709;&#x66F4;&#x9AD8;&#x7684;&#x4F18;&#x5148;&#x7EA7;(&#x9ED8;&#x8BA4;0),&#x9ED8;&#x8BA4;&#x7F13;&#x5B58;&#x7EC4;&#x7684;priority&#x5C5E;&#x6027;&#x4E3A;&#x8D1F;&#x503C;.
        },
        commons: {
          chunks: &quot;all&quot;,
          minSize: 0, //&#x6700;&#x5C0F;&#x63D0;&#x53D6;&#x5B57;&#x8282;&#x6570;
          minChunks: 2, //&#x6700;&#x5C11;&#x88AB;&#x51E0;&#x4E2A;chunk&#x5F15;&#x7528;
          priority: -20,
          reuseExistingChunk: true, //&#x5982;&#x679C;&#x8BE5;chunk&#x4E2D;&#x5F15;&#x7528;&#x4E86;&#x5DF2;&#x7ECF;&#x88AB;&#x62BD;&#x53D6;&#x7684;chunk&#xFF0C;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x8BE5;chunk&#xFF0C;&#x4E0D;&#x4F1A;&#x91CD;&#x590D;&#x6253;&#x5305;&#x4EE3;&#x7801;
        },
      },
    },
    //&#x4E3A;&#x4E86;&#x957F;&#x671F;&#x7F13;&#x5B58;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#x65F6;&#x4EE3;&#x7801;&#x5757;&#x662F;&#x5355;&#x72EC;&#x7684;&#x6587;&#x4EF6;
    /*  runtimeChunk: {
      name: (entrypoint) =&gt; `runtime-${entrypoint.name}`,
    }, */
  },
  module: {
    rules: [
      {
        test: /\.js/,
        include: path.resolve(__dirname, &quot;src&quot;),
        use: [
          {
            loader: &quot;babel-loader&quot;,
            options: {
              presets: [
                [&quot;@babel/preset-env&quot;, { modules: false }],
                &quot;@babel/preset-react&quot;,
              ],
            },
          },
        ],
      },
      {
        test: /\.css$/,
        include: path.resolve(__dirname, &quot;src&quot;),
        exclude: /node_modules/,
        use: [
          {
            loader: MiniCssExtractPlugin.loader,
          },
          &quot;css-loader&quot;,
        ],
      },
      {
        test: /\.(png|svg|jpg|gif|jpeg|ico)$/,
        use: [
          &quot;file-loader&quot;,
          {
            loader: &quot;image-webpack-loader&quot;,
            options: {
              mozjpeg: {
                progressive: true,
                quality: 65,
              },
              optipng: {
                enabled: false,
              },
              pngquant: {
                quality: &quot;65-90&quot;,
                speed: 4,
              },
              gifsicle: {
                interlaced: false,
              },
              webp: {
                quality: 75,
              },
            },
          },
        ],
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      inject: true,
      template: &quot;./src/index.html&quot;,
    }),
    new MiniCssExtractPlugin({
<span class="hljs-addition">+      filename: &quot;[name].[hash].css&quot;,</span>
    }),
    new PurgecssPlugin({
      paths: glob.sync(`${PATHS.src}/**/*`, { nodir: true }),
    }),
    new UploadPlugin({}),
  ],
  devServer: {},
};
</code></pre><h4 id="t707.9.2 UploadPlugin.js">7.9.2 UploadPlugin.js <a href="#t707.9.2 UploadPlugin.js">#</a></h4><pre><code class="lang-js"><span class="hljs-keyword">const</span> qiniu = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;qiniu&quot;</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;path&quot;</span>);
<span class="hljs-comment">//https://developer.qiniu.com/kodo/sdk/1289/nodejs</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;dotenv&quot;</span>).config();
<span class="hljs-keyword">const</span> defaultAccessKey = process.env.accessKey;
<span class="hljs-keyword">const</span> defaultSecretKey = process.env.secretKey;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UploadPlugin</span> </span>{
  <span class="hljs-keyword">constructor</span>(options) {
    <span class="hljs-keyword">this</span>.options = options || {};
  }
  apply(compiler) {
    compiler.hooks.afterEmit.tap(<span class="hljs-string">&quot;UploadPlugin&quot;</span>, (compilation) =&gt; {
      <span class="hljs-keyword">let</span> assets = compilation.assets;
      <span class="hljs-keyword">let</span> promises = <span class="hljs-built_in">Object</span>.keys(assets).filter(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>!item.includes(<span class="hljs-string">&apos;.html&apos;</span>)).map(<span class="hljs-keyword">this</span>.upload.bind(<span class="hljs-keyword">this</span>));
      <span class="hljs-built_in">Promise</span>.all(promises).then(<span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(err, data));
    });
  }
  upload(filename) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">let</span> {
        bucket = <span class="hljs-string">&quot;cnpmjs&quot;</span>,
        accessKey = defaultAccessKey,
        secretKey = defaultSecretKey,
      } = <span class="hljs-keyword">this</span>.options;
      <span class="hljs-keyword">let</span> mac = <span class="hljs-keyword">new</span> qiniu.auth.digest.Mac(accessKey, secretKey);
      <span class="hljs-keyword">let</span> options = {
        <span class="hljs-attr">scope</span>: bucket,
      };

      <span class="hljs-keyword">let</span> putPolicy = <span class="hljs-keyword">new</span> qiniu.rs.PutPolicy(options);
      <span class="hljs-keyword">let</span> uploadToken = putPolicy.uploadToken(mac);
      <span class="hljs-keyword">let</span> config = <span class="hljs-keyword">new</span> qiniu.conf.Config();

      <span class="hljs-keyword">let</span> localFile = path.resolve(__dirname, <span class="hljs-string">&quot;../dist&quot;</span>, filename);
      <span class="hljs-keyword">let</span> formUploader = <span class="hljs-keyword">new</span> qiniu.form_up.FormUploader(config);
      <span class="hljs-keyword">let</span> putExtra = <span class="hljs-keyword">new</span> qiniu.form_up.PutExtra();
      formUploader.putFile(
        uploadToken,
        filename,
        localFile,
        putExtra,
        (err, body, info) =&gt; {
          err ? reject(err) : resolve(body);
        }
      );
    });
  }
}

<span class="hljs-built_in">module</span>.exports = UploadPlugin;
</code></pre><h2 id="t718. webpack&#x4E2D;hash&#x3001;chunkhash&#x3001;contenthash&#x533A;&#x522B;?">8. webpack&#x4E2D;hash&#x3001;chunkhash&#x3001;contenthash&#x533A;&#x522B;? <a href="#t718. webpack&#x4E2D;hash&#x3001;chunkhash&#x3001;contenthash&#x533A;&#x522B;?">#</a></h2><ul><li>&#x6587;&#x4EF6;&#x6307;&#x7EB9;</li><li>&#x6253;&#x5305;&#x540E;&#x8F93;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x548C;&#x540E;&#x7F00;</li><li>hash&#x4E00;&#x822C;&#x662F;&#x7ED3;&#x5408;CDN&#x7F13;&#x5B58;&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x901A;&#x8FC7;webpack&#x6784;&#x5EFA;&#x4E4B;&#x540E;&#xFF0C;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x6587;&#x4EF6;&#x540D;&#x81EA;&#x52A8;&#x5E26;&#x4E0A;&#x5BF9;&#x5E94;&#x7684;MD5&#x503C;&#x3002;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x6539;&#x53D8;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9;&#x5E94;&#x6587;&#x4EF6;&#x54C8;&#x5E0C;&#x503C;&#x4E5F;&#x4F1A;&#x6539;&#x53D8;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;HTML&#x5F15;&#x7528;&#x7684;URL&#x5730;&#x5740;&#x4E5F;&#x4F1A;&#x6539;&#x53D8;&#xFF0C;&#x89E6;&#x53D1;CDN&#x670D;&#x52A1;&#x5668;&#x4ECE;&#x6E90;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x62C9;&#x53D6;&#x5BF9;&#x5E94;&#x6570;&#x636E;&#xFF0C;&#x8FDB;&#x800C;&#x66F4;&#x65B0;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x3002;</li></ul><p>&#x6307;&#x7EB9;&#x5360;&#x4F4D;&#x7B26;</p><table><thead><tr><th style="text-align:left">&#x5360;&#x4F4D;&#x7B26;&#x540D;&#x79F0;</th><th style="text-align:left">&#x542B;&#x4E49;</th></tr></thead><tbody><tr><td style="text-align:left">ext</td><td style="text-align:left">&#x8D44;&#x6E90;&#x540E;&#x7F00;&#x540D;</td></tr><tr><td style="text-align:left">name</td><td style="text-align:left">&#x6587;&#x4EF6;&#x540D;&#x79F0;</td></tr><tr><td style="text-align:left">path</td><td style="text-align:left">&#x6587;&#x4EF6;&#x7684;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;</td></tr><tr><td style="text-align:left">folder</td><td style="text-align:left">&#x6587;&#x4EF6;&#x6240;&#x5728;&#x7684;&#x6587;&#x4EF6;&#x5939;</td></tr><tr><td style="text-align:left">hash</td><td style="text-align:left">&#x6BCF;&#x6B21;webpack&#x6784;&#x5EFA;&#x65F6;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x7684;hash&#x503C;</td></tr><tr><td style="text-align:left">chunkhash</td><td style="text-align:left">&#x6839;&#x636E;chunk&#x751F;&#x6210;hash&#x503C;&#xFF0C;&#x6765;&#x6E90;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;chunk&#xFF0C;&#x5219;hash&#x503C;&#x5C31;&#x4E00;&#x6837;</td></tr><tr><td style="text-align:left">contenthash</td><td style="text-align:left">&#x6839;&#x636E;&#x5185;&#x5BB9;&#x751F;&#x6210;hash&#x503C;&#xFF0C;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x76F8;&#x540C;hash&#x503C;&#x5C31;&#x76F8;&#x540C;</td></tr></tbody></table><h3 id="t728.1  hash">8.1 hash <a href="#t728.1  hash">#</a></h3><ul><li>Hash &#x662F;&#x6574;&#x4E2A;&#x9879;&#x76EE;&#x7684;hash&#x503C;&#xFF0C;&#x5176;&#x6839;&#x636E;&#x6BCF;&#x6B21;&#x7F16;&#x8BD1;&#x5185;&#x5BB9;&#x8BA1;&#x7B97;&#x5F97;&#x5230;&#xFF0C;&#x6BCF;&#x6B21;&#x7F16;&#x8BD1;&#x4E4B;&#x540E;&#x90FD;&#x4F1A;&#x751F;&#x6210;&#x65B0;&#x7684;hash,&#x5373;&#x4FEE;&#x6539;&#x4EFB;&#x4F55;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x5BFC;&#x81F4;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x7684;hash&#x53D1;&#x751F;&#x6539;&#x53D8;</li></ul><pre><code class="lang-diff">const path = require(&quot;path&quot;);
const glob = require(&quot;glob&quot;);
const PurgecssPlugin = require(&quot;purgecss-webpack-plugin&quot;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
const PATHS = {
  src: path.join(__dirname, &apos;src&apos;)
}
module.exports = {
  mode: &quot;production&quot;,
<span class="hljs-addition">+  entry: {</span>
<span class="hljs-addition">+    main: &apos;./src/index.js&apos;,</span>
<span class="hljs-addition">+    vender:[&apos;lodash&apos;]</span>
<span class="hljs-addition">+  },</span>
  output:{
    path:path.resolve(__dirname,&apos;dist&apos;),
<span class="hljs-addition">+    filename:&apos;[name].[hash].js&apos;</span>
  },
  devServer:{
    hot:false
  },
  module: {
    rules: [
      {
        test: /\.js/,
        include: path.resolve(__dirname, &quot;src&quot;),
        use: [
          {
            loader:&apos;thread-loader&apos;,
            options:{
              workers:3
            }
          },
          {
            loader: &quot;babel-loader&quot;,
            options: {
              presets: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-react&quot;],
            },
          },
        ],
      },
      {
        test: /\.css$/,
        include: path.resolve(__dirname, &quot;src&quot;),
        exclude: /node_modules/,
        use: [
          {
            loader: MiniCssExtractPlugin.loader,
          },
          &quot;css-loader&quot;,
        ],
      },
    ],
  },
  plugins: [
    new MiniCssExtractPlugin({
<span class="hljs-addition">+      filename: &quot;[name].[hash].css&quot;</span>
    }),
    new PurgecssPlugin({
      paths: glob.sync(`${PATHS.src}/**/*`,  { nodir: true }),
    }),
  ],
};

</code></pre><h3 id="t738.2 chunkhash">8.2 chunkhash <a href="#t738.2 chunkhash">#</a></h3><ul><li>chunkhash &#x91C7;&#x7528;hash&#x8BA1;&#x7B97;&#x7684;&#x8BDD;&#xFF0C;&#x6BCF;&#x4E00;&#x6B21;&#x6784;&#x5EFA;&#x540E;&#x751F;&#x6210;&#x7684;&#x54C8;&#x5E0C;&#x503C;&#x90FD;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x5373;&#x4F7F;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x538B;&#x6839;&#x6CA1;&#x6709;&#x6539;&#x53D8;&#x3002;&#x8FD9;&#x6837;&#x5B50;&#x662F;&#x6CA1;&#x529E;&#x6CD5;&#x5B9E;&#x73B0;&#x7F13;&#x5B58;&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6362;&#x53E6;&#x4E00;&#x79CD;&#x54C8;&#x5E0C;&#x503C;&#x8BA1;&#x7B97;&#x65B9;&#x5F0F;&#xFF0C;&#x5373;chunkhash</li><li>chunkhash&#x548C;hash&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x5B83;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x5165;&#x53E3;&#x6587;&#x4EF6;(Entry)&#x8FDB;&#x884C;&#x4F9D;&#x8D56;&#x6587;&#x4EF6;&#x89E3;&#x6790;&#x3001;&#x6784;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;chunk&#xFF0C;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;&#x54C8;&#x5E0C;&#x503C;&#x3002;&#x6211;&#x4EEC;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x91CC;&#x628A;&#x4E00;&#x4E9B;&#x516C;&#x5171;&#x5E93;&#x548C;&#x7A0B;&#x5E8F;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#x533A;&#x5206;&#x5F00;&#xFF0C;&#x5355;&#x72EC;&#x6253;&#x5305;&#x6784;&#x5EFA;&#xFF0C;&#x63A5;&#x7740;&#x6211;&#x4EEC;&#x91C7;&#x7528;chunkhash&#x7684;&#x65B9;&#x5F0F;&#x751F;&#x6210;&#x54C8;&#x5E0C;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x4E0D;&#x6539;&#x52A8;&#x516C;&#x5171;&#x5E93;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x5176;&#x54C8;&#x5E0C;&#x503C;&#x4E0D;&#x4F1A;&#x53D7;&#x5F71;&#x54CD;</li></ul><pre><code class="lang-diff">const path = require(&quot;path&quot;);
const glob = require(&quot;glob&quot;);
const PurgecssPlugin = require(&quot;purgecss-webpack-plugin&quot;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
const PATHS = {
  src: path.join(__dirname, &apos;src&apos;)
}
module.exports = {
  mode: &quot;production&quot;,
  entry: {
    main: &apos;./src/index.js&apos;,
    vender:[&apos;lodash&apos;]
  },
  output:{
    path:path.resolve(__dirname,&apos;dist&apos;),
<span class="hljs-addition">+    filename:&apos;[name].[chunkhash].js&apos;</span>
  },
  devServer:{
    hot:false
  },
  module: {
    rules: [
      {
        test: /\.js/,
        include: path.resolve(__dirname, &quot;src&quot;),
        use: [
          {
            loader:&apos;thread-loader&apos;,
            options:{
              workers:3
            }
          },
          {
            loader: &quot;babel-loader&quot;,
            options: {
              presets: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-react&quot;],
            },
          },
        ],
      },
      {
        test: /\.css$/,
        include: path.resolve(__dirname, &quot;src&quot;),
        exclude: /node_modules/,
        use: [
          {
            loader: MiniCssExtractPlugin.loader,
          },
          &quot;css-loader&quot;,
        ],
      },
    ],
  },
  plugins: [
    new MiniCssExtractPlugin({
<span class="hljs-addition">+      filename: &quot;[name].[chunkhash].css&quot;</span>
    }),
    new PurgecssPlugin({
      paths: glob.sync(`${PATHS.src}/**/*`,  { nodir: true }),
    }),
  ],
};

</code></pre><h3 id="t748.3 contenthash">8.3 contenthash <a href="#t748.3 contenthash">#</a></h3><ul><li>&#x4F7F;&#x7528;chunkhash&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x662F;&#x5F53;&#x5728;&#x4E00;&#x4E2A;JS&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x5165;CSS&#x6587;&#x4EF6;&#xFF0C;&#x7F16;&#x8BD1;&#x540E;&#x5B83;&#x4EEC;&#x7684;hash&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x53EA;&#x8981;js&#x6587;&#x4EF6;&#x53D1;&#x751F;&#x6539;&#x53D8; &#xFF0C;&#x5173;&#x8054;&#x7684;css&#x6587;&#x4EF6;hash&#x4E5F;&#x4F1A;&#x6539;&#x53D8;,&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>mini-css-extract-plugin</code>&#x91CC;&#x7684;<code>contenthash</code>&#x503C;&#xFF0C;&#x4FDD;&#x8BC1;&#x5373;&#x4F7F;css&#x6587;&#x4EF6;&#x6240;&#x5904;&#x7684;&#x6A21;&#x5757;&#x91CC;&#x5C31;&#x7B97;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x6539;&#x53D8;&#xFF0C;&#x53EA;&#x8981;css&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x4E0D;&#x53D8;&#xFF0C;&#x90A3;&#x4E48;&#x4E0D;&#x4F1A;&#x91CD;&#x590D;&#x6784;&#x5EFA;</li></ul><pre><code class="lang-diff">const path = require(&quot;path&quot;);
const glob = require(&quot;glob&quot;);
const PurgecssPlugin = require(&quot;purgecss-webpack-plugin&quot;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
const PATHS = {
  src: path.join(__dirname, &apos;src&apos;)
}
module.exports = {
  mode: &quot;production&quot;,
  entry: {
    main: &apos;./src/index.js&apos;,
    vender:[&apos;lodash&apos;]
  },
  output:{
    path:path.resolve(__dirname,&apos;dist&apos;),
    filename:&apos;[name].[chunkhash].js&apos;
  },
  devServer:{
    hot:false
  },
  module: {
    rules: [
      {
        test: /\.js/,
        include: path.resolve(__dirname, &quot;src&quot;),
        use: [
          {
            loader:&apos;thread-loader&apos;,
            options:{
              workers:3
            }
          },
          {
            loader: &quot;babel-loader&quot;,
            options: {
              presets: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-react&quot;],
            },
          },
        ],
      },
      {
        test: /\.css$/,
        include: path.resolve(__dirname, &quot;src&quot;),
        exclude: /node_modules/,
        use: [
          {
            loader: MiniCssExtractPlugin.loader,
          },
          &quot;css-loader&quot;,
        ],
      },
    ],
  },
  plugins: [
    new MiniCssExtractPlugin({
<span class="hljs-addition">+      filename: &quot;[name].[contenthash].css&quot;</span>
    }),
    new PurgecssPlugin({
      paths: glob.sync(`${PATHS.src}/**/*`,  { nodir: true }),
    }),
  ],
};
</code></pre><h2 id="t759.&#x5982;&#x4F55;&#x5BF9;bundle&#x4F53;&#x79EF;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#x548C;&#x5206;&#x6790;&#xFF1F;">9.&#x5982;&#x4F55;&#x5BF9;bundle&#x4F53;&#x79EF;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#x548C;&#x5206;&#x6790;&#xFF1F; <a href="#t759.&#x5982;&#x4F55;&#x5BF9;bundle&#x4F53;&#x79EF;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#x548C;&#x5206;&#x6790;&#xFF1F;">#</a></h2><ul><li>&#x662F;&#x4E00;&#x4E2A;webpack&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x5408;webpack&#x548C;webpack-cli&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x7684;&#x529F;&#x80FD;&#x662F;&#x751F;&#x6210;&#x4EE3;&#x7801;&#x5206;&#x6790;&#x62A5;&#x544A;&#xFF0C;&#x5E2E;&#x52A9;&#x63D0;&#x5347;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x548C;&#x7F51;&#x7AD9;&#x6027;&#x80FD;</li></ul><h3 id="t769.1 &#x5B89;&#x88C5;">9.1 &#x5B89;&#x88C5; <a href="#t769.1 &#x5B89;&#x88C5;">#</a></h3><pre><code class="lang-js">cnpm i webpack-bundle-analyzer -D
</code></pre><pre><code class="lang-js"><span class="hljs-keyword">const</span> {BundleAnalyzerPlugin} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack-bundle-analyzer&apos;</span>)
<span class="hljs-built_in">module</span>.exports={
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> BundleAnalyzerPlugin()  <span class="hljs-comment">// &#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;</span>
    <span class="hljs-comment">// &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x7684;&#x5177;&#x4F53;&#x914D;&#x7F6E;&#x9879;</span>
    <span class="hljs-comment">// new BundleAnalyzerPlugin({</span>
    <span class="hljs-comment">//   analyzerMode: &apos;server&apos;,</span>
    <span class="hljs-comment">//   analyzerHost: &apos;127.0.0.1&apos;,</span>
    <span class="hljs-comment">//   analyzerPort: &apos;8888&apos;,</span>
    <span class="hljs-comment">//   reportFilename: &apos;report.html&apos;,</span>
    <span class="hljs-comment">//   defaultSizes: &apos;parsed&apos;,</span>
    <span class="hljs-comment">//   openAnalyzer: true,</span>
    <span class="hljs-comment">//   generateStatsFile: false,</span>
    <span class="hljs-comment">//   statsFilename: &apos;stats.json&apos;,</span>
    <span class="hljs-comment">//   statsOptions: null,</span>
    <span class="hljs-comment">//   excludeAssets: null,</span>
    <span class="hljs-comment">//   logLevel: info</span>
    <span class="hljs-comment">// })</span>
  ]
}
</code></pre><pre><code class="lang-json">{
 <span class="hljs-attr">&quot;scripts&quot;</span>: {
    <span class="hljs-attr">&quot;dev&quot;</span>: <span class="hljs-string">&quot;webpack --config webpack.dev.js --progress&quot;</span>
  }
}
</code></pre><h3 id="t779.2 &#x5148;&#x751F;&#x6210;&#x6587;&#x4EF6;&#x518D;&#x5206;&#x6790;">9.2 &#x5148;&#x751F;&#x6210;&#x6587;&#x4EF6;&#x518D;&#x5206;&#x6790; <a href="#t779.2 &#x5148;&#x751F;&#x6210;&#x6587;&#x4EF6;&#x518D;&#x5206;&#x6790;">#</a></h3><p>webpack.config.js</p><pre><code class="lang-js"><span class="hljs-keyword">const</span> {BundleAnalyzerPlugin} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack-bundle-analyzer&apos;</span>)
<span class="hljs-built_in">module</span>.exports={
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> BundleAnalyzerPlugin({
      <span class="hljs-attr">analyzerMode</span>: <span class="hljs-string">&apos;disabled&apos;</span>, <span class="hljs-comment">// &#x4E0D;&#x542F;&#x52A8;&#x5C55;&#x793A;&#x6253;&#x5305;&#x62A5;&#x544A;&#x7684;http&#x670D;&#x52A1;&#x5668;</span>
      <span class="hljs-attr">generateStatsFile</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// &#x662F;&#x5426;&#x751F;&#x6210;stats.json&#x6587;&#x4EF6;</span>
    }),
  ]
}
</code></pre><pre><code class="lang-js">{
 <span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;generateAnalyzFile&quot;</span>: <span class="hljs-string">&quot;webpack --profile --json &gt; stats.json&quot;</span>, <span class="hljs-comment">// &#x751F;&#x6210;&#x5206;&#x6790;&#x6587;&#x4EF6;</span>
    <span class="hljs-string">&quot;analyz&quot;</span>: <span class="hljs-string">&quot;webpack-bundle-analyzer --port 8888 ./dist/stats.json&quot;</span> <span class="hljs-comment">// &#x542F;&#x52A8;&#x5C55;&#x793A;&#x6253;&#x5305;&#x62A5;&#x544A;&#x7684;http&#x670D;&#x52A1;&#x5668;</span>
  }
}
</code></pre><pre><code class="lang-js">npm run generateAnalyzFile
npm run analyz
</code></pre><h2 id="t7810.&#x5982;&#x4F55;&#x63D0;&#x9AD8;webpack&#x7684;&#x6784;&#x5EFA;&#x901F;&#x5EA6;?">10.&#x5982;&#x4F55;&#x63D0;&#x9AD8;webpack&#x7684;&#x6784;&#x5EFA;&#x901F;&#x5EA6;? <a href="#t7810.&#x5982;&#x4F55;&#x63D0;&#x9AD8;webpack&#x7684;&#x6784;&#x5EFA;&#x901F;&#x5EA6;?">#</a></h2><h3 id="t7910.1 &#x8D39;&#x65F6;&#x5206;&#x6790;">10.1 &#x8D39;&#x65F6;&#x5206;&#x6790; <a href="#t7910.1 &#x8D39;&#x65F6;&#x5206;&#x6790;">#</a></h3><pre><code class="lang-js"><span class="hljs-keyword">const</span> SpeedMeasureWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;speed-measure-webpack-plugin&apos;</span>);
<span class="hljs-keyword">const</span> smw = <span class="hljs-keyword">new</span> SpeedMeasureWebpackPlugin();
<span class="hljs-built_in">module</span>.exports =smw.wrap({
});
</code></pre><h3 id="t8010.2 &#x7F29;&#x5C0F;&#x8303;&#x56F4;">10.2 &#x7F29;&#x5C0F;&#x8303;&#x56F4; <a href="#t8010.2 &#x7F29;&#x5C0F;&#x8303;&#x56F4;">#</a></h3><h4 id="t8110.2.1 extensions">10.2.1 extensions <a href="#t8110.2.1 extensions">#</a></h4><p>&#x6307;&#x5B9A;extension&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x5728;<code>require</code>&#x6216;&#x662F;<code>import</code>&#x7684;&#x65F6;&#x5019;&#x52A0;&#x6587;&#x4EF6;&#x6269;&#x5C55;&#x540D;,&#x4F1A;&#x4F9D;&#x6B21;&#x5C1D;&#x8BD5;&#x6DFB;&#x52A0;&#x6269;&#x5C55;&#x540D;&#x8FDB;&#x884C;&#x5339;&#x914D;</p><pre><code class="lang-js">resolve: {
  <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&quot;.js&quot;</span>,<span class="hljs-string">&quot;.jsx&quot;</span>,<span class="hljs-string">&quot;.json&quot;</span>,<span class="hljs-string">&quot;.css&quot;</span>]
},
</code></pre><h4 id="t8210.2.2 alias">10.2.2 alias <a href="#t8210.2.2 alias">#</a></h4><p>&#x914D;&#x7F6E;&#x522B;&#x540D;&#x53EF;&#x4EE5;&#x52A0;&#x5FEB;webpack&#x67E5;&#x627E;&#x6A21;&#x5757;&#x7684;&#x901F;&#x5EA6;</p><ul><li>&#x6BCF;&#x5F53;&#x5F15;&#x5165;bootstrap&#x6A21;&#x5757;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x76F4;&#x63A5;&#x5F15;&#x5165;<code>bootstrap</code>,&#x800C;&#x4E0D;&#x9700;&#x8981;&#x4ECE;<code>node_modules</code>&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x6309;&#x6A21;&#x5757;&#x7684;&#x67E5;&#x627E;&#x89C4;&#x5219;&#x67E5;&#x627E;</li></ul><pre><code class="lang-diff">const bootstrap = path.resolve(__dirname,&apos;node_modules/_bootstrap@3.3.7@bootstrap/dist/css/bootstrap.css&apos;);
resolve: {
<span class="hljs-addition">+    alias:{</span>
<span class="hljs-addition">+        &quot;bootstrap&quot;:bootstrap</span>
<span class="hljs-addition">+    }</span>
},
</code></pre><h4 id="t8310.2.3 modules">10.2.3 modules <a href="#t8310.2.3 modules">#</a></h4><ul><li>&#x5BF9;&#x4E8E;&#x76F4;&#x63A5;&#x58F0;&#x660E;&#x4F9D;&#x8D56;&#x540D;&#x7684;&#x6A21;&#x5757;&#xFF08;&#x5982; react &#xFF09;&#xFF0C;webpack &#x4F1A;&#x7C7B;&#x4F3C; Node.js &#x4E00;&#x6837;&#x8FDB;&#x884C;&#x8DEF;&#x5F84;&#x641C;&#x7D22;&#xFF0C;&#x641C;&#x7D22;<code>node_modules</code>&#x76EE;&#x5F55;</li><li>&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x5C31;&#x662F;&#x4F7F;&#x7528;<code>resolve.modules</code>&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x7684; &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;<pre><code class="lang-js">resolve: {
<span class="hljs-attr">modules</span>: [<span class="hljs-string">&apos;node_modules&apos;</span>],
}
</code></pre>&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x9879;&#x76EE;&#x5185;&#x6240;&#x6709;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x4F9D;&#x8D56;&#x6A21;&#x5757;&#x90FD;&#x662F;&#x5728;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x7684; node_modules &#x4E2D;&#x7684;&#x8BDD;<pre><code class="lang-js">resolve: {
<span class="hljs-attr">modules</span>: [path.resolve(__dirname, <span class="hljs-string">&apos;node_modules&apos;</span>)],
}
</code></pre></li></ul><h4 id="t8410.2.4 mainFields">10.2.4 mainFields <a href="#t8410.2.4 mainFields">#</a></h4><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;package.json &#x6587;&#x4EF6;&#x5219;&#x6309;&#x7167;&#x6587;&#x4EF6;&#x4E2D; main &#x5B57;&#x6BB5;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x6765;&#x67E5;&#x627E;&#x6587;&#x4EF6;</p><pre><code class="lang-js">resolve: {
  <span class="hljs-comment">// &#x914D;&#x7F6E; target === &quot;web&quot; &#x6216;&#x8005; target === &quot;webworker&quot; &#x65F6; mainFields &#x9ED8;&#x8BA4;&#x503C;&#x662F;&#xFF1A;</span>
  <span class="hljs-attr">mainFields</span>: [<span class="hljs-string">&apos;browser&apos;</span>, <span class="hljs-string">&apos;module&apos;</span>, <span class="hljs-string">&apos;main&apos;</span>],
  <span class="hljs-comment">// target &#x7684;&#x503C;&#x4E3A;&#x5176;&#x4ED6;&#x65F6;&#xFF0C;mainFields &#x9ED8;&#x8BA4;&#x503C;&#x4E3A;&#xFF1A;</span>
  <span class="hljs-attr">mainFields</span>: [<span class="hljs-string">&quot;module&quot;</span>, <span class="hljs-string">&quot;main&quot;</span>],
}
</code></pre><h4 id="t8510.2.5 mainFiles">10.2.5 mainFiles <a href="#t8510.2.5 mainFiles">#</a></h4><p>&#x5F53;&#x76EE;&#x5F55;&#x4E0B;&#x6CA1;&#x6709; package.json &#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x8BF4;&#x4F1A;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x76EE;&#x5F55;&#x4E0B;&#x7684; index.js &#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x7684;</p><pre><code class="lang-js">resolve: {
  <span class="hljs-attr">mainFiles</span>: [<span class="hljs-string">&apos;index&apos;</span>], <span class="hljs-comment">// &#x4F60;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5176;&#x4ED6;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684;&#x6587;&#x4EF6;&#x540D;</span>
},
</code></pre><h4 id="t8610.2.6 resolveLoader">10.2.6 resolveLoader <a href="#t8610.2.6 resolveLoader">#</a></h4><p><code>resolve.resolveLoader</code>&#x7528;&#x4E8E;&#x914D;&#x7F6E;&#x89E3;&#x6790; loader &#x65F6;&#x7684; resolve &#x914D;&#x7F6E;,&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#xFF1A;</p><pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">resolveLoader</span>: {
    <span class="hljs-attr">modules</span>: [ <span class="hljs-string">&apos;node_modules&apos;</span> ],
    <span class="hljs-attr">extensions</span>: [ <span class="hljs-string">&apos;.js&apos;</span>, <span class="hljs-string">&apos;.json&apos;</span> ],
    <span class="hljs-attr">mainFields</span>: [ <span class="hljs-string">&apos;loader&apos;</span>, <span class="hljs-string">&apos;main&apos;</span> ]
  }
};
</code></pre><h3 id="t8710.3 noParse">10.3 noParse <a href="#t8710.3 noParse">#</a></h3><ul><li><code>module.noParse</code> &#x5B57;&#x6BB5;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x914D;&#x7F6E;&#x54EA;&#x4E9B;&#x6A21;&#x5757;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x4E0D;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x89E3;&#x6790;</li><li>&#x4E0D;&#x9700;&#x8981;&#x89E3;&#x6790;&#x4F9D;&#x8D56;&#xFF08;&#x5373;&#x65E0;&#x4F9D;&#x8D56;&#xFF09; &#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5927;&#x578B;&#x7C7B;&#x5E93;&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x6765;&#x914D;&#x7F6E;&#xFF0C;&#x4EE5;&#x63D0;&#x9AD8;&#x6574;&#x4F53;&#x7684;&#x6784;&#x5EFA;&#x901F;&#x5EA6;<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
<span class="hljs-comment">// ...</span>
<span class="hljs-attr">module</span>: {
  <span class="hljs-attr">noParse</span>: <span class="hljs-regexp">/jquery|lodash/</span>, <span class="hljs-comment">// &#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</span>
  <span class="hljs-comment">// &#x6216;&#x8005;&#x4F7F;&#x7528;&#x51FD;&#x6570;</span>
  noParse(content) {
    <span class="hljs-keyword">return</span> <span class="hljs-regexp">/jquery|lodash/</span>.test(content)
  },
}
}...
</code></pre><blockquote><p>&#x4F7F;&#x7528; noParse &#x8FDB;&#x884C;&#x5FFD;&#x7565;&#x7684;&#x6A21;&#x5757;&#x6587;&#x4EF6;&#x4E2D;&#x4E0D;&#x80FD;&#x4F7F;&#x7528; import&#x3001;require&#x3001;define &#x7B49;&#x5BFC;&#x5165;&#x673A;&#x5236;</p></blockquote></li></ul><h3 id="t8810.4 IgnorePlugin">10.4 IgnorePlugin <a href="#t8810.4 IgnorePlugin">#</a></h3><p>IgnorePlugin&#x7528;&#x4E8E;&#x5FFD;&#x7565;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x8BA9; webpack &#x4E0D;&#x628A;&#x8FD9;&#x4E9B;&#x6307;&#x5B9A;&#x7684;&#x6A21;&#x5757;&#x6253;&#x5305;&#x8FDB;&#x53BB;</p><pre><code class="lang-js"><span class="hljs-keyword">import</span> moment <span class="hljs-keyword">from</span>  <span class="hljs-string">&apos;moment&apos;</span>;
<span class="hljs-built_in">console</span>.log(moment);
</code></pre><pre><code class="lang-js"><span class="hljs-keyword">new</span> webpack.IgnorePlugin(<span class="hljs-regexp">/^\.\/locale/</span>,/moment$/)
</code></pre><ul><li>&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x5339;&#x914D;&#x5F15;&#x5165;&#x6A21;&#x5757;&#x8DEF;&#x5F84;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</li><li>&#x7B2C;&#x4E8C;&#x4E2A;&#x662F;&#x5339;&#x914D;&#x6A21;&#x5757;&#x7684;&#x5BF9;&#x5E94;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x5373;&#x6240;&#x5728;&#x76EE;&#x5F55;&#x540D;</li></ul><h3 id="t8910.5 &#x65E5;&#x5FD7;&#x4F18;&#x5316;">10.5 &#x65E5;&#x5FD7;&#x4F18;&#x5316; <a href="#t8910.5 &#x65E5;&#x5FD7;&#x4F18;&#x5316;">#</a></h3><ul><li>&#x65E5;&#x5FD7;&#x592A;&#x591A;&#x592A;&#x5C11;&#x90FD;&#x4E0D;&#x7F8E;&#x89C2;</li><li>&#x53EF;&#x4EE5;&#x4FEE;&#x6539;stats</li></ul><table><thead><tr><th style="text-align:left">&#x9884;&#x8BBE;</th><th style="text-align:left">&#x66FF;&#x4EE3;</th><th>&#x63CF;&#x8FF0;</th></tr></thead><tbody><tr><td style="text-align:left">errors-only</td><td style="text-align:left">none</td><td>&#x53EA;&#x5728;&#x9519;&#x8BEF;&#x65F6;&#x8F93;&#x51FA;</td></tr><tr><td style="text-align:left">minimal</td><td style="text-align:left">none</td><td>&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x548C;&#x65B0;&#x7684;&#x7F16;&#x8BD1;&#x65F6;&#x8F93;&#x51FA;</td></tr><tr><td style="text-align:left">none</td><td style="text-align:left">false</td><td>&#x6CA1;&#x6709;&#x8F93;&#x51FA;</td></tr><tr><td style="text-align:left">normal</td><td style="text-align:left">true</td><td>&#x6807;&#x51C6;&#x8F93;&#x51FA;</td></tr><tr><td style="text-align:left">verbose</td><td style="text-align:left">none</td><td>&#x5168;&#x90E8;&#x8F93;&#x51FA;</td></tr></tbody></table><h4 id="t9010.5.1 friendly-errors-webpack-plugin">10.5.1 friendly-errors-webpack-plugin <a href="#t9010.5.1 friendly-errors-webpack-plugin">#</a></h4><ul><li><a href="https://www.npmjs.com/package/friendly-errors-webpack-plugin">friendly-errors-webpack-plugin</a></li><li>success &#x6784;&#x5EFA;&#x6210;&#x529F;&#x7684;&#x65E5;&#x5FD7;&#x63D0;&#x793A;</li><li>warning &#x6784;&#x5EFA;&#x8B66;&#x544A;&#x7684;&#x65E5;&#x5FD7;&#x63D0;&#x793A;</li><li>error &#x6784;&#x5EFA;&#x62A5;&#x9519;&#x7684;&#x65E5;&#x5FD7;&#x63D0;&#x793A;</li></ul><pre><code class="lang-js">cnpm i friendly-errors-webpack-plugin
</code></pre><pre><code class="lang-diff"><span class="hljs-addition">+ stats:&apos;verbose&apos;,</span>
  plugins:[
<span class="hljs-addition">+   new FriendlyErrorsWebpackPlugin()</span>
  ]
</code></pre><blockquote><p>&#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x540E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>echo $?</code>&#x83B7;&#x53D6;&#x9519;&#x8BEF;&#x7801;&#xFF0C;0&#x4E3A;&#x6210;&#x529F;&#xFF0C;&#x975E;0&#x4E3A;&#x5931;&#x8D25;</p></blockquote><h3 id="t9110.6.DLL">10.6.DLL <a href="#t9110.6.DLL">#</a></h3><ul><li><code>.dll</code>&#x4E3A;&#x540E;&#x7F00;&#x7684;&#x6587;&#x4EF6;&#x79F0;&#x4E3A;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;&#x4E2D;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x7ED9;&#x5176;&#x4ED6;&#x6A21;&#x5757;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x548C;&#x6570;&#x636E;</li><li>&#x628A;&#x57FA;&#x7840;&#x6A21;&#x5757;&#x72EC;&#x7ACB;&#x51FA;&#x6765;&#x6253;&#x5305;&#x5230;&#x5355;&#x72EC;&#x7684;&#x52A8;&#x6001;&#x8FDE;&#x63A5;&#x5E93;&#x91CC;</li><li>&#x5F53;&#x9700;&#x8981;&#x5BFC;&#x5165;&#x7684;&#x6A21;&#x5757;&#x5728;&#x52A8;&#x6001;&#x8FDE;&#x63A5;&#x5E93;&#x91CC;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6A21;&#x5757;&#x4E0D;&#x80FD;&#x518D;&#x6B21;&#x88AB;&#x6253;&#x5305;&#xFF0C;&#x800C;&#x662F;&#x53BB;&#x52A8;&#x6001;&#x8FDE;&#x63A5;&#x5E93;&#x91CC;&#x83B7;&#x53D6;</li><li><a href="https://webpack.js.org/plugins/dll-plugin/">dll-plugin</a></li></ul><h4 id="t9210.6.1 &#x5B9A;&#x4E49;Dll">10.6.1 &#x5B9A;&#x4E49;Dll <a href="#t9210.6.1 &#x5B9A;&#x4E49;Dll">#</a></h4><ul><li>DllPlugin&#x63D2;&#x4EF6;&#xFF1A; &#x7528;&#x4E8E;&#x6253;&#x5305;&#x51FA;&#x4E00;&#x4E2A;&#x4E2A;&#x52A8;&#x6001;&#x8FDE;&#x63A5;&#x5E93;</li><li>DllReferencePlugin: &#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x5165;DllPlugin&#x63D2;&#x4EF6;&#x6253;&#x5305;&#x597D;&#x7684;&#x52A8;&#x6001;&#x8FDE;&#x63A5;&#x5E93;</li></ul><p>webpack.dll.config.js</p><pre><code class="lang-js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;path&quot;</span>);

<span class="hljs-keyword">const</span> DllPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;webpack/lib/DllPlugin&quot;</span>);
<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">&quot;development&quot;</span>,
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">react</span>: [<span class="hljs-string">&quot;react&quot;</span>, <span class="hljs-string">&quot;react-dom&quot;</span>],
  },
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">path</span>: path.resolve(__dirname, <span class="hljs-string">&quot;dist&quot;</span>),
    <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;[name].dll.js&quot;</span>, <span class="hljs-comment">//react.dll.js</span>
    <span class="hljs-attr">library</span>: <span class="hljs-string">&quot;_dll_[name]&quot;</span>,
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> DllPlugin({
      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;_dll_[name]&quot;</span>,
      <span class="hljs-attr">path</span>: path.join(__dirname, <span class="hljs-string">&quot;dist&quot;</span>, <span class="hljs-string">&quot;[name].manifest.json&quot;</span>), <span class="hljs-comment">//react.manifest.json</span>
    }),
  ],
};

</code></pre><pre><code class="lang-js">webpack --config webpack.dll.config.js --mode=development
</code></pre><h4 id="t9310.6.2 &#x4F7F;&#x7528;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;&#x6587;&#x4EF6;">10.6.2 &#x4F7F;&#x7528;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;&#x6587;&#x4EF6; <a href="#t9310.6.2 &#x4F7F;&#x7528;&#x52A8;&#x6001;&#x94FE;&#x63A5;&#x5E93;&#x6587;&#x4EF6;">#</a></h4><pre><code class="lang-diff">const path = require(&quot;path&quot;);
const glob = require(&quot;glob&quot;);
const PurgecssPlugin = require(&quot;purgecss-webpack-plugin&quot;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
<span class="hljs-addition">+const DllReferencePlugin = require(&quot;webpack/lib/DllReferencePlugin.js&quot;);</span>
const PATHS = {
  src: path.join(__dirname, &apos;src&apos;)
}
module.exports = {
  mode: &quot;development&quot;,
  entry: &quot;./src/index.js&quot;,
  module: {
    rules: [
      {
        test: /\.js/,
        include: path.resolve(__dirname, &quot;src&quot;),
        use: [
          {
            loader: &quot;babel-loader&quot;,
            options: {
              presets: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-react&quot;],
            },
          },
        ],
      },
      {
        test: /\.css$/,
        include: path.resolve(__dirname, &quot;src&quot;),
        exclude: /node_modules/,
        use: [
          {
            loader: MiniCssExtractPlugin.loader,
          },
          &quot;css-loader&quot;,
        ],
      },
    ],
  },
  plugins: [
    new MiniCssExtractPlugin({
      filename: &quot;[name].css&quot;,
    }),
    new PurgecssPlugin({
      paths: glob.sync(`${PATHS.src}/**/*`,  { nodir: true }),
    }),
<span class="hljs-addition">+    new DllReferencePlugin({</span>
<span class="hljs-addition">+      manifest: require(&quot;./dist/react.manifest.json&quot;),</span>
<span class="hljs-addition">+    }),</span>
  ],
};

</code></pre><pre><code class="lang-js">webpack --config webpack.config.js --mode development
</code></pre><h4 id="t9410.6.3 html&#x4E2D;&#x4F7F;&#x7528;">10.6.3 html&#x4E2D;&#x4F7F;&#x7528; <a href="#t9410.6.3 html&#x4E2D;&#x4F7F;&#x7528;">#</a></h4><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;react.dll.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;bundle.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><h3 id="t9510.7 &#x5229;&#x7528;&#x7F13;&#x5B58;">10.7 &#x5229;&#x7528;&#x7F13;&#x5B58; <a href="#t9510.7 &#x5229;&#x7528;&#x7F13;&#x5B58;">#</a></h3><ul><li>webpack&#x4E2D;&#x5229;&#x7528;&#x7F13;&#x5B58;&#x4E00;&#x822C;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#x601D;&#x8DEF;&#xFF1A;<ul><li>babel-loader&#x5F00;&#x542F;&#x7F13;&#x5B58;</li><li>&#x4F7F;&#x7528;cache-loader</li><li>&#x4F7F;&#x7528;hard-source-webpack-plugin</li></ul></li></ul><h4 id="t9610.7.1 babel-loader">10.7.1 babel-loader <a href="#t9610.7.1 babel-loader">#</a></h4><ul><li>Babel&#x5728;&#x8F6C;&#x4E49;js&#x6587;&#x4EF6;&#x8FC7;&#x7A0B;&#x4E2D;&#x6D88;&#x8017;&#x6027;&#x80FD;&#x8F83;&#x9AD8;&#xFF0C;&#x5C06;babel-loader&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x7F13;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x5F53;&#x91CD;&#x65B0;&#x6253;&#x5305;&#x6784;&#x5EFA;&#x65F6;&#x4F1A;&#x5C1D;&#x8BD5;&#x8BFB;&#x53D6;&#x7F13;&#x5B58;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x6253;&#x5305;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x3001;&#x964D;&#x4F4E;&#x6D88;&#x8017;</li></ul><pre><code class="lang-js"> {
    <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
    <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
    <span class="hljs-attr">use</span>: [{
      <span class="hljs-attr">loader</span>: <span class="hljs-string">&quot;babel-loader&quot;</span>,
      <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">cacheDirectory</span>: <span class="hljs-literal">true</span>
      }
    }]
  },
</code></pre><h4 id="t9710.7.2 cache-loader">10.7.2 cache-loader <a href="#t9710.7.2 cache-loader">#</a></h4><ul><li>&#x5728;&#x4E00;&#x4E9B;&#x6027;&#x80FD;&#x5F00;&#x9500;&#x8F83;&#x5927;&#x7684; loader &#x4E4B;&#x524D;&#x6DFB;&#x52A0;&#x6B64; loader,&#x4EE5;&#x5C06;&#x7ED3;&#x679C;&#x7F13;&#x5B58;&#x5230;&#x78C1;&#x76D8;&#x91CC;</li><li>&#x5B58;&#x548C;&#x8BFB;&#x53D6;&#x8FD9;&#x4E9B;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x65F6;&#x95F4;&#x5F00;&#x9500;,&#x6240;&#x4EE5;&#x8BF7;&#x53EA;&#x5BF9;&#x6027;&#x80FD;&#x5F00;&#x9500;&#x8F83;&#x5927;&#x7684; loader &#x4F7F;&#x7528;&#x6B64; loader</li></ul><pre><code class="lang-js">cnpm i  cache-loader -D
</code></pre><pre><code class="lang-js"><span class="hljs-keyword">const</span> loaders = [<span class="hljs-string">&apos;babel-loader&apos;</span>];
<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">use</span>: [
          <span class="hljs-string">&apos;cache-loader&apos;</span>,
          ...loaders
        ],
        <span class="hljs-attr">include</span>: path.resolve(<span class="hljs-string">&apos;src&apos;</span>)
      }
    ]
  }
}
</code></pre><h4 id="t9810.7.3 hard-source-webpack-plugin">10.7.3 hard-source-webpack-plugin <a href="#t9810.7.3 hard-source-webpack-plugin">#</a></h4><ul><li><code>HardSourceWebpackPlugin</code>&#x4E3A;&#x6A21;&#x5757;&#x63D0;&#x4F9B;&#x4E86;&#x4E2D;&#x95F4;&#x7F13;&#x5B58;,&#x7F13;&#x5B58;&#x9ED8;&#x8BA4;&#x7684;&#x5B58;&#x653E;&#x8DEF;&#x5F84;&#x662F; <code>node_modules/.cache/hard-source</code>&#x3002;`</li><li>&#x914D;&#x7F6E; hard-source-webpack-plugin&#x540E;&#xFF0C;&#x9996;&#x6B21;&#x6784;&#x5EFA;&#x65F6;&#x95F4;&#x5E76;&#x4E0D;&#x4F1A;&#x6709;&#x592A;&#x5927;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x4F46;&#x662F;&#x4ECE;&#x7B2C;&#x4E8C;&#x6B21;&#x5F00;&#x59CB;&#xFF0C;&#x6784;&#x5EFA;&#x65F6;&#x95F4;&#x5927;&#x7EA6;&#x53EF;&#x4EE5;&#x51CF;&#x5C11; 80%&#x5DE6;&#x53F3;</li><li>webpack5&#x4E2D;&#x4F1A;&#x5185;&#x7F6E;<code>hard-source-webpack-plugin</code></li></ul><pre><code class="lang-js">cnpm i  hard-source-webpack-plugin -D 
</code></pre><pre><code class="lang-js"><span class="hljs-keyword">var</span> HardSourceWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;hard-source-webpack-plugin&apos;</span>);

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">entry</span>: <span class="hljs-comment">// ...</span>
  output: <span class="hljs-comment">// ...</span>
  plugins: [
    <span class="hljs-keyword">new</span> HardSourceWebpackPlugin()
  ]
}
</code></pre><h4 id="t9910.7.4 oneOf">10.7.4 oneOf <a href="#t9910.7.4 oneOf">#</a></h4><ul><li>&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x5BF9;&#x4E8E;rules&#x4E2D;&#x7684;&#x6240;&#x6709;&#x89C4;&#x5219;&#x90FD;&#x4F1A;&#x904D;&#x5386;&#x4E00;&#x904D;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;oneOf&#x5C31;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8BE5;&#x95EE;&#x9898;&#xFF0C;&#x53EA;&#x8981;&#x80FD;&#x5339;&#x914D;&#x4E00;&#x4E2A;&#x5373;&#x53EF;&#x9000;&#x51FA;&#x3002;(&#x6CE8;&#x610F;&#xFF1A;&#x5728;oneOf&#x4E2D;&#x4E0D;&#x80FD;&#x4E24;&#x4E2A;&#x914D;&#x7F6E;&#x5904;&#x7406;&#x540C;&#x4E00;&#x79CD;&#x7C7B;&#x578B;&#x6587;&#x4EF6;)</li></ul><pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
        <span class="hljs-comment">//&#x4F18;&#x5148;&#x6267;&#x884C;</span>
        <span class="hljs-attr">enforce</span>: <span class="hljs-string">&apos;pre&apos;</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">&apos;eslint-loader&apos;</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-attr">fix</span>: <span class="hljs-literal">true</span>
        }
      },
      {
        <span class="hljs-comment">// &#x4EE5;&#x4E0B; loader &#x53EA;&#x4F1A;&#x5339;&#x914D;&#x4E00;&#x4E2A;</span>
        <span class="hljs-attr">oneOf</span>: [
          ...,
          {},
          {}
        ]
      }
    ]
  }
}
</code></pre><h3 id="t10010.8 &#x591A;&#x8FDB;&#x7A0B;&#x5904;&#x7406;">10.8 &#x591A;&#x8FDB;&#x7A0B;&#x5904;&#x7406; <a href="#t10010.8 &#x591A;&#x8FDB;&#x7A0B;&#x5904;&#x7406;">#</a></h3><h4 id="t10110.8.1 thread-loader">10.8.1 thread-loader <a href="#t10110.8.1 thread-loader">#</a></h4><ul><li>&#x628A;&#x8FD9;&#x4E2A; loader &#x653E;&#x7F6E;&#x5728;&#x5176;&#x4ED6; loader &#x4E4B;&#x524D;&#xFF0C; &#x653E;&#x7F6E;&#x5728;&#x8FD9;&#x4E2A; loader &#x4E4B;&#x540E;&#x7684; loader &#x5C31;&#x4F1A;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684; worker &#x6C60;(worker pool)&#x4E2D;&#x8FD0;&#x884C;</li><li><a href="https://webpack.js.org/loaders/thread-loader/">thread-loader</a></li></ul><pre><code class="lang-js">cnpm  i thread-loader- D
</code></pre><pre><code class="lang-diff">const path = require(&quot;path&quot;);
const glob = require(&quot;glob&quot;);
const PurgecssPlugin = require(&quot;purgecss-webpack-plugin&quot;);
const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);
const DllReferencePlugin = require(&quot;webpack/lib/DllReferencePlugin.js&quot;);
const PATHS = {
  src: path.join(__dirname, &apos;src&apos;)
}
module.exports = {
  mode: &quot;development&quot;,
  entry: &quot;./src/index.js&quot;,
  module: {
    rules: [
      {
        test: /\.js/,
        include: path.resolve(__dirname, &quot;src&quot;),
        use: [
<span class="hljs-addition">+          {</span>
<span class="hljs-addition">+            loader:&apos;thread-loader&apos;,</span>
<span class="hljs-addition">+            options:{</span>
<span class="hljs-addition">+              workers:3</span>
<span class="hljs-addition">+            }</span>
<span class="hljs-addition">+          },</span>
          {
            loader: &quot;babel-loader&quot;,
            options: {
              presets: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-react&quot;],
            },
          },
        ],
      },
      {
        test: /\.css$/,
        include: path.resolve(__dirname, &quot;src&quot;),
        exclude: /node_modules/,
        use: [
          {
            loader: MiniCssExtractPlugin.loader,
          },
          &quot;css-loader&quot;,
        ],
      },
    ],
  },
  plugins: [
    new MiniCssExtractPlugin({
      filename: &quot;[name].css&quot;,
    }),
    new PurgecssPlugin({
      paths: glob.sync(`${PATHS.src}/**/*`,  { nodir: true }),
    }),
    new DllReferencePlugin({
      manifest: require(&quot;./dist/react.manifest.json&quot;),
    }),
  ],
};

</code></pre><h4 id="t10210.8.2 parallel">10.8.2 parallel <a href="#t10210.8.2 parallel">#</a></h4><p>terser-webpack-plugin &#x5F00;&#x542F; parallel &#x53C2;&#x6570;</p><pre><code class="lang-js"><span class="hljs-keyword">const</span> TerserPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;terser-webpack-plugin&apos;</span>);
<span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">optimization</span>: {
        <span class="hljs-attr">minimizer</span>: [
            <span class="hljs-keyword">new</span> TerserPlugin({
                <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span>,
            }),
        ],
    },
};
</code></pre></div></div><div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="loginModalLabel">请登录</h4></div><div class="modal-body"><form><div class="form-group"><label for="username" class="control-label">姓名:</label> <input type="text" class="form-control" id="username" placeholder="珠峰架构VIP会员系统用户名"></div><div class="form-group"><label for="password" class="control-label">密码:</label> <input type="text" class="form-control" id="password" placeholder="珠峰架构VIP会员系统密码"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">登录</button></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script><script>$(".warpper .page-toc ul ul li a").on("click",function(){$(".warpper .page-toc ul ul li a").removeClass("my-active"),$(this).addClass("my-active")}),$(".logo").on("mouseenter",function(){$(".nav").height("450px")}),$(".nav").on("mouseleave",function(){$(".nav").height("80px")}),$(".logo").on("click",function(){$(".nav").css("display","none"),$(".warpper").css("padding","0px")})</script><script type="text/javascript" src="../static/js/theme.js"></script></body></html>